"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[364],{4714:function(e,n,t){function s(e){if("+1"!==e.slice(0,2))return e;if(console.log("calling"),!e)return;let n="";return e=e.slice(2),n=e.length<=3?e:e.length<=6?`${e.slice(0,3)} ${e.slice(3)}`:`${e.slice(0,3)} ${e.slice(3,6)} ${e.slice(6)}`,n}t.d(n,{A:function(){return s}})},1076:function(e,n,t){t.d(n,{A:function(){return l}});var s=t(4116),o=t(6156);function l(e){if(console.log("calling"),!e)return;const n=s.c9.fromMillis(1e3*e).setZone((0,o.A)());return n.toLocaleString({weekday:"short",month:"short",day:"numeric",year:"numeric"})}},7364:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var s=t(6768),o=t(5130),l=t(4232);const a=["onClick"],r={class:"newCol"},c={class:"flexBox"},u={key:0,class:"newCell"},i={key:1,class:"todayCell"},d={class:"flex"};function h(e,n,t,h,k,f){return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bo)((0,s.Lk)("input",{type:"text",id:"search",placeholder:"Search...","onUpdate:modelValue":n[0]||(n[0]=e=>h.query=e),onInput:n[1]||(n[1]=(...e)=>h.onSearchUsers&&h.onSearchUsers(...e))},null,544),[[o.Jo,h.query]]),(0,s.Lk)("table",null,[(0,s.Lk)("tbody",null,[n[3]||(n[3]=(0,s.Lk)("tr",null,[(0,s.Lk)("th",{class:"newCol"}),(0,s.Lk)("th",null,"Account Name"),(0,s.Lk)("th",null,"Phone Number"),(0,s.Lk)("th",null,"Role"),(0,s.Lk)("th",null,"Client Name"),(0,s.Lk)("th",null,"Joined on")],-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(h.users,((e,n)=>((0,s.uX)(),(0,s.CE)("tr",{class:"row",key:n,onClick:n=>h.toUser(e.userId)},[(0,s.Lk)("td",r,[(0,s.Lk)("div",c,[e.joinedOn>h.lastTracked?((0,s.uX)(),(0,s.CE)("div",u,"NEW")):(0,s.Q3)("",!0),e.joinedOn>=h.today?((0,s.uX)(),(0,s.CE)("div",i,"TODAY")):(0,s.Q3)("",!0)])]),(0,s.Lk)("td",null,(0,l.v_)(e.firstName)+" "+(0,l.v_)(e.lastName),1),(0,s.Lk)("td",null,(0,l.v_)(h.formatPhone(e.phoneNum)),1),(0,s.Lk)("td",null,(0,l.v_)(e.role),1),(0,s.Lk)("td",null,(0,l.v_)(e.contactName),1),(0,s.Lk)("td",null,(0,l.v_)(h.unixToReadable(e.joinedOn)),1)],8,a)))),128))])]),(0,s.Lk)("div",d,[h.users?.length===h.limit?((0,s.uX)(),(0,s.CE)("button",{key:0,id:"show",class:"blueBtn",onClick:n[2]||(n[2]=(...e)=>h.showMore&&h.showMore(...e))}," showMore ")):(0,s.Q3)("",!0)])],64)}t(4114);var k=t(144),f=t(1076),m=t(4714),y=t(1387),p=t(8199);async function v(e,n){try{const t="",s=await fetch(`${t}/api/users/search_users`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e.trim(),limit:n})}),o=await s.json();if(s.ok){const e=[],n=o.users;for(let t of n){const[n,s,o,l,a,r,c,u]=t,i={userId:n,phoneNumId:s,phoneNum:o,role:l,firstName:a,lastName:r,joinedOn:c,contactName:u};e.push(i)}return e}(0,p.A)(o.message),console.log("Failed to search users, message: ",o.message)}catch(t){console.error("Unexpected Error: ",t)}}async function w(){try{const e="",n=await fetch(`${e}/api/users/get_last_tracked`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await n.json();if(n.ok){const e=t.last_tracked;return console.log("last: ",e),e}console.log("Failed to last tracked on users, message: ",t.message)}catch(e){console.error("Unexpected Error: ",e)}}var L=t(2405),g=t(445),C={name:"Users-",setup(){const e=(0,y.rd)(),n=(0,k.KR)(""),t=(0,k.KR)([]),o=(0,k.KR)(null),l=(0,k.KR)(25),a=(0,g.A)(),r=n=>{e.push(`/users/${n}`)},c=async()=>{t.value=await v(n.value,l.value)},u=async()=>{l.value+=25,await c()};return(0,s.sV)((async()=>{o.value=await w(),await c()})),(0,y.JZ)(((e,n,t)=>{(0,L.nO)(),t()})),{today:a,query:n,users:t,lastTracked:o,unixToReadable:f.A,formatPhone:m.A,toUser:r,onSearchUsers:c,showMore:u,limit:l}}},N=t(1241);const _=(0,N.A)(C,[["render",h],["__scopeId","data-v-247a0efa"]]);var b=_}}]);
//# sourceMappingURL=364.d9c8c190.js.map