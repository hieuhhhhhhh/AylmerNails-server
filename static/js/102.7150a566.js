"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[102],{4714:function(e,t,n){function o(e){if("+1"!==e.slice(0,2))return e;if(console.log("calling"),!e)return;let t="";return e=e.slice(2),t=e.length<=3?e:e.length<=6?`${e.slice(0,3)} ${e.slice(3)}`:`${e.slice(0,3)} ${e.slice(3,6)} ${e.slice(6)}`,t}n.d(t,{A:function(){return o}})},6769:function(e,t,n){n.d(t,{A:function(){return a}});var o=n(4116);function a(e){return console.log("calling"),o.c9.fromObject({hour:0}).plus({seconds:e}).toFormat("h:mm a")}},3519:function(e,t,n){n.d(t,{A:function(){return a}});var o=n(4116);function a(e){if(console.log("calling"),!e)return;const t=o.c9.fromSeconds(e).startOf("day"),n=o.c9.local().startOf("day"),a=t.diff(n,"days").toObject(),l=Math.round(a.days);if(t.equals(n))return"Today";if(1===l)return"Tomorrow";if(-1===l)return"Yesterday";const r=l>0?"next":"last";return Math.abs(l)>=30?`${r} ${Math.abs(Math.round(l/30))}m`:Math.abs(l)>=7?`${r} ${Math.abs(Math.round(l/7))}w`:`${r} ${Math.abs(l)}d`}},1076:function(e,t,n){n.d(t,{A:function(){return l}});var o=n(4116),a=n(6156);function l(e){if(console.log("calling"),!e)return;const t=o.c9.fromMillis(1e3*e).setZone((0,a.A)());return t.toLocaleString({weekday:"short",month:"short",day:"numeric",year:"numeric"})}},5102:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var o=n(6768),a=n(4232);const l=["onClick"];function r(e,t,n,r,c,s){return(0,o.uX)(),(0,o.CE)(o.FK,null,[t[2]||(t[2]=(0,o.Lk)("div",{id:"title"},"Employee Availability Conflicts",-1)),(0,o.Lk)("table",null,[t[1]||(t[1]=(0,o.Lk)("colgroup",null,[(0,o.Lk)("col",{style:{width:"auto"}}),(0,o.Lk)("col",{style:{width:"auto"}})],-1)),(0,o.Lk)("tbody",null,[t[0]||(t[0]=(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Client"),(0,o.Lk)("th",null,"Service"),(0,o.Lk)("th",null,"Time")],-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.conflicts,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{class:"row",key:t,onClick:t=>r.toAppoDetails(e.appoDate,e.appoId)},[(0,o.Lk)("td",null,[(0,o.eW)((0,a.v_)(e.contactName)+" ",1),(0,o.Lk)("div",null,(0,a.v_)(r.formatPhone(e.phoneNum)),1)]),(0,o.Lk)("td",null,[(0,o.eW)((0,a.v_)(e.serviceName)+" ",1),(0,o.Lk)("div",null,(0,a.v_)(e.category),1)]),(0,o.Lk)("td",null,[(0,o.eW)((0,a.v_)(r.unixToReadable(e.appoDate))+" ("+(0,a.v_)(r.unixTimeToReminder(e.appoDate))+") ",1),(0,o.Lk)("div",null,(0,a.v_)(r.secsToHours(e.appoStart))+" - "+(0,a.v_)(r.secsToHours(e.appoEnd)),1)])],8,l)))),128))])])],64)}n(4114);var c=n(1387),s=n(144),i=n(8199);async function u(e){try{const t="",n=await fetch(`${t}/api/employees/get_employee_ld_conflicts/${e}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),o=await n.json();if(n.ok){let e=[];const t=o.conflicts;console.log("table",t);for(let n of t){const[t,o,a,l,r,c,s,i,u,d,p,f]=n;e.push({serviceId:t,appoId:o,appoDate:a,appoDOW:l,appoStart:r,appoEnd:c,empAlias:s,serviceName:i,contactName:u,phoneNumId:d,phoneNum:p,category:f})}return e}(0,i.A)(o.message),console.log("Failed to fetch employee's last date conflicts, message: ",o.message)}catch(t){console.error("Unexpected Error: ",t)}}var d=n(4714),p=n(1076),f=n(3519),m=n(6769),h={setup(){const e=(0,c.lq)(),t=e.params.empId,n=(0,c.rd)(),a=(0,s.KR)([]),l=(e,t)=>{console.log("date, appoId",e,t),n.push(`/calendar/${e}/${t}`)};return(0,o.sV)((async()=>{a.value=await u(t)})),{empId:t,conflicts:a,toAppoDetails:l,unixTimeToReminder:f.A,secsToHours:m.A,unixToReadable:p.A,formatPhone:d.A}}},v=n(1241);const k=(0,v.A)(h,[["render",r],["__scopeId","data-v-8fa49958"]]);var y=k}}]);
//# sourceMappingURL=102.7150a566.js.map