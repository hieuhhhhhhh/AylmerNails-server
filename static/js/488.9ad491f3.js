"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[488],{1076:function(e,t,o){o.d(t,{A:function(){return n}});var c=o(4116),s=o(6156);function n(e){if(console.log("calling"),!e)return;const t=c.c9.fromMillis(1e3*e).setZone((0,s.A)());return t.toLocaleString({weekday:"short",month:"short",day:"numeric",year:"numeric"})}},6488:function(e,t,o){o.r(t),o.d(t,{default:function(){return E}});var c=o(6768);const s={id:"services"},n={id:"flexBox"};function r(e,t,o,r,a,i){const d=(0,c.g2)("Category"),l=(0,c.g2)("FontAwesomeIcon");return(0,c.uX)(),(0,c.CE)(c.FK,null,[(0,c.Lk)("div",s,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(a.categories,((e,t)=>((0,c.uX)(),(0,c.Wv)(d,{key:t,category:e},null,8,["category"])))),128))]),(0,c.Lk)("div",n,[(0,c.Lk)("button",{class:"blueBtn",id:"add",onClick:t[0]||(t[0]=(...e)=>i.addCate&&i.addCate(...e))},[(0,c.bF)(l,{icon:a.plusIcon},null,8,["icon"]),t[1]||(t[1]=(0,c.eW)(" Add Category "))])])],64)}o(4114);var a=o(8249),i=o(2353),d=(o(8992),o(3949),o(445)),l=o(8199);async function u(){try{const e="",t=await fetch(`${e}/api/services/get_services/${(0,d.A)()}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),o=await t.json();if(t.ok){const e=v(o.services,o.categories);return e}(0,l.A)(o.message),console.log("Failed to fetch employee list, message: ",o.message)}catch(e){console.error("Unexpected Error: ",e)}}function v(e,t){const o={null:{cate_id:null,cate_name:"Unclassified",services:[]}};t.forEach((e=>{const[t,c,s]=e;o[t]={cate_id:t,cate_name:c,sort_order:s,services:[]}})),e.forEach((e=>{const[t,c,s,n,r]=e;o[r].services.push({service_id:t,service_name:c,last_date:s,is_active:n})})),!o[null].services.length>0&&delete o[null];const c=Object.values(o).sort(((e,t)=>t.sort_order-e.sort_order));return c}var g=o(4232);const p={id:"category"},m={id:"title"},h=["onClick"],y={id:"flexBox"};function f(e,t,o,s,n,r){const a=(0,c.g2)("FontAwesomeIcon");return(0,c.uX)(),(0,c.CE)("div",p,[(0,c.Lk)("div",m,(0,g.v_)(o.category.cate_name),1),((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(o.category.services,((e,t)=>((0,c.uX)(),(0,c.CE)("div",{id:"service",class:(0,g.C4)({faded:!e.is_active}),key:t,onClick:t=>r.openServiceDetails(e.service_id)},(0,g.v_)(e.service_name),11,h)))),128)),(0,c.Lk)("div",y,[(0,c.Lk)("button",{class:"blueBtn",id:"plus",onClick:t[0]||(t[0]=e=>r.addService(o.category.cate_id))},[(0,c.bF)(a,{icon:n.plusIcon},null,8,["icon"])]),o.category.services.length?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("button",{key:0,class:"redBtn",id:"plus",onClick:t[1]||(t[1]=e=>r.removeCate(o.category.cate_id))},[(0,c.bF)(a,{icon:n.removeIcon},null,8,["icon"])]))])])}async function _(e){try{const t="",o=await fetch(`${t}/api/services/remove_category`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({cate_id:e})});if(o.ok)return!0;{const e=await o.json();(0,l.A)(e.message),console.log("Failed to add category, message: ",e.message)}}catch(t){console.error("Unexpected Error: ",t)}}var C=o(1076),k={name:"Category-",components:{FontAwesomeIcon:a.gc},data(){return{plusIcon:i.QLR,removeIcon:i.sjs}},props:{category:Object},methods:{openServiceDetails(e){this.$router.push(`/services/details/${e}`)},addService(e){this.$router.push(`/services/add_service/${e}`)},async removeCate(e){const t=await _(e);t&&this.$router.push("/services/refresh")},formatDate(e){return(0,C.A)(e)}}},b=o(1241);const I=(0,b.A)(k,[["render",f],["__scopeId","data-v-4a01a6dc"]]);var w=I,A={name:"Services-",components:{Category:w,FontAwesomeIcon:a.gc},data(){return{categories:[],plusIcon:i.QLR}},async created(){this.categories=await u(),console.log("categories: ",this.categories)},methods:{addCate(){this.$router.push("/services/add_category")}}};const F=(0,b.A)(A,[["render",r],["__scopeId","data-v-757b40fc"]]);var E=F}}]);
//# sourceMappingURL=488.9ad491f3.js.map