{"version":3,"file":"js/634.472ef7f8.js","mappings":"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","sources":["webpack://frontend/./src/lib/formatPhone.js","webpack://frontend/./src/lib/unixToHours.js","webpack://frontend/./src/lib/unixToReadable.js","webpack://frontend/./src/views/users/apis/banUnbanPhoneNum.js","webpack://frontend/./src/views/users/Blacklist.vue","webpack://frontend/./src/views/users/apis/searchBlacklist.js","webpack://frontend/./src/views/users/apis/fetchBlacklistLastTracked.js","webpack://frontend/./src/views/users/comps/AddBlacklistBtn.vue","webpack://frontend/./src/views/users/comps/AddBlacklistBtn.vue?75a2","webpack://frontend/./src/views/users/Blacklist.vue?cf05"],"sourcesContent":["export default function formatPhone(rawPhone) {\r\n  if (rawPhone.slice(0, 2) !== \"+1\") return rawPhone;\r\n  console.log(\"calling\");\r\n  if (!rawPhone) return;\r\n  let formatted = \"\";\r\n\r\n  rawPhone = rawPhone.slice(2);\r\n\r\n  if (rawPhone.length <= 3) {\r\n    formatted = rawPhone;\r\n  } else if (rawPhone.length <= 6) {\r\n    formatted = `${rawPhone.slice(0, 3)} ${rawPhone.slice(3)}`;\r\n  } else {\r\n    formatted = `${rawPhone.slice(0, 3)} ${rawPhone.slice(\r\n      3,\r\n      6\r\n    )} ${rawPhone.slice(6)}`;\r\n  }\r\n\r\n  // return result\r\n  return formatted;\r\n}\r\n","import { DateTime } from \"luxon\";\r\nimport getTimezone from \"./getTimeZone\";\r\n\r\nexport default function unixToHours(unix) {\r\n  console.log(\"calling\");\r\n\r\n  // Create a Luxon DateTime instance from the Unix timestamp (seconds)\r\n  const dt = DateTime.fromSeconds(unix);\r\n\r\n  // Convert to Toronto timezone\r\n  const torontoDate = dt.setZone(getTimezone());\r\n\r\n  // Format the DateTime to return only the hour in 24-hour format (e.g., \"09\" or \"17\")\r\n  return torontoDate.toFormat(\"h:mm a\");\r\n}\r\n","import { DateTime } from \"luxon\";\r\nimport getTimezone from \"./getTimeZone\";\r\n\r\nexport default function unixToReadable(unixTimestamp) {\r\n  console.log(\"calling\");\r\n\r\n  if (!unixTimestamp) {\r\n    return;\r\n  }\r\n\r\n  // Convert the Unix timestamp to a Luxon DateTime object in the specified timezone\r\n  const dateTime = DateTime.fromMillis(unixTimestamp * 1000).setZone(\r\n    getTimezone()\r\n  );\r\n\r\n  // Format the date with short weekday and month (e.g., \"Mon, Jan 20, 2025\")\r\n  return dateTime.toLocaleString({\r\n    weekday: \"short\",\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n    year: \"numeric\",\r\n  });\r\n}\r\n","import notifyReqError from \"@/stores/notifyReqError\";\r\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\r\n\r\nexport default async function banUnbanPhoneNum(phoneNum, boolean) {\r\n  try {\r\n    try {\r\n      // parse phone number to E.164\r\n      phoneNum = parsePhoneNumberFromString(phoneNum, \"CA\").number; // E.164 format\r\n      console.log(\"phoneNum: \", phoneNum);\r\n    } catch (e) {\r\n      throw new Error(\"Invalid Phone Number\");\r\n    }\r\n\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(`${baseURL}/api/users/ban_unban_phone_number`, {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ phone_num: phoneNum, boolean }),\r\n    });\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      return true;\r\n    } else {\r\n      // fetch json\r\n      const json = await res.json();\r\n\r\n      notifyReqError(json.message);\r\n      console.log(\"Failed to ban/unban phone number, message: \", json.message);\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n","<template>\r\n  <div id=\"topBox\">\r\n    <input\r\n      id=\"search\"\r\n      type=\"text\"\r\n      placeholder=\"Search...\"\r\n      v-model=\"query\"\r\n      @input=\"onSearch\"\r\n    />\r\n    <div>\r\n      <AddBlacklistBtn />\r\n    </div>\r\n  </div>\r\n  <table>\r\n    <tbody>\r\n      <tr>\r\n        <th class=\"newCol\"></th>\r\n        <th>Phone Number</th>\r\n        <th>Banned On</th>\r\n        <th>Client Name</th>\r\n        <th>Account Name</th>\r\n      </tr>\r\n      <tr class=\"row\" v-for=\"(row, index) in rows\" :key=\"index\">\r\n        <td class=\"newCol\">\r\n          <div class=\"flexBox\">\r\n            <div class=\"newCell\" v-if=\"row.bannedOn > lastTracked\">NEW</div>\r\n            <div class=\"todayCell\" v-if=\"row.bannedOn >= today\">TODAY</div>\r\n          </div>\r\n        </td>\r\n        <td>\r\n          {{ formatPhone(row.phoneNum) }}\r\n        </td>\r\n        <td>\r\n          {{ unixToReadable(row.bannedOn) }}\r\n          <div>{{ unixToHours(row.bannedOn) }}</div>\r\n        </td>\r\n        <td>\r\n          {{ row.contactName }}\r\n        </td>\r\n        <td>{{ row.firstName }} {{ row.lastName }}</td>\r\n        <td class=\"btn\">\r\n          <button class=\"blueBtn\" @click=\"onUnban(row.phoneNum)\">\r\n            Unblacklist\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <div class=\"flex\">\r\n    <button\r\n      id=\"show\"\r\n      class=\"blueBtn\"\r\n      v-if=\"rows?.length === limit\"\r\n      @click=\"showMore\"\r\n    >\r\n      Show more\r\n    </button>\r\n  </div>\r\n</template>\r\n<script>\r\n// lib\r\nimport { onMounted, ref } from \"vue\";\r\nimport formatPhone from \"@/lib/formatPhone\";\r\nimport unixToReadable from \"@/lib/unixToReadable\";\r\nimport unixToHours from \"@/lib/unixToHours\";\r\n// apis\r\nimport searchBlacklist from \"./apis/searchBlacklist\";\r\nimport fetchBlacklistLastTracked from \"./apis/fetchBlacklistLastTracked\";\r\nimport banUnbanPhoneNum from \"./apis/banUnbanPhoneNum\";\r\nimport { onBeforeRouteLeave, useRouter } from \"vue-router\";\r\nimport { fetchNewBlacklistCount } from \"@/components/view-shell/drawer-navigation/apis/connectSocket\";\r\n// icon\r\nimport getTodayUnixTime from \"@/lib/getTodayUnixTime\";\r\nimport AddBlacklistBtn from \"./comps/AddBlacklistBtn.vue\";\r\n\r\nexport default {\r\n  name: \"CanceledAppos\",\r\n  components: {\r\n    AddBlacklistBtn,\r\n  },\r\n  setup() {\r\n    // resoures\r\n    const query = ref(\"\");\r\n    const rows = ref([]);\r\n    const lastTracked = ref(null);\r\n    const limit = ref(25);\r\n    const today = getTodayUnixTime();\r\n    // lib\r\n    const router = useRouter();\r\n\r\n    // INPUT\r\n    const onSearch = async () => {\r\n      rows.value = await searchBlacklist(query.value, limit.value);\r\n    };\r\n\r\n    const onUnban = async (phoneNum) => {\r\n      const res = await banUnbanPhoneNum(phoneNum, false);\r\n      if (res) {\r\n        router.push(\"/refresh\");\r\n      }\r\n    };\r\n\r\n    const showMore = async () => {\r\n      limit.value += 25;\r\n      await onSearch();\r\n    };\r\n\r\n    // LIFECYCLE\r\n    onMounted(async () => {\r\n      lastTracked.value = await fetchBlacklistLastTracked();\r\n      await onSearch();\r\n    });\r\n\r\n    onBeforeRouteLeave((to, from, next) => {\r\n      console.log(\"leaving\");\r\n      fetchNewBlacklistCount();\r\n      next();\r\n    });\r\n\r\n    return {\r\n      today,\r\n      query,\r\n      rows,\r\n      lastTracked,\r\n      formatPhone,\r\n      onSearch,\r\n      unixToReadable,\r\n      unixToHours,\r\n      onUnban,\r\n      showMore,\r\n      limit,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  font-size: 14px;\r\n}\r\nth,\r\ntd {\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n\r\n  text-align: center;\r\n}\r\ntr {\r\n  border: 1px solid;\r\n}\r\n.newCol {\r\n  padding: 0px;\r\n  font-size: 8px;\r\n}\r\n.flexBox {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 5px;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.newCell {\r\n  padding: 2px;\r\n  background: var(--trans-red);\r\n  color: white;\r\n  border-radius: 2px;\r\n}\r\n#search {\r\n  margin-bottom: 10px;\r\n}\r\n.btn {\r\n  margin: 0;\r\n  width: 20px;\r\n}\r\nbutton {\r\n  font-size: 12px;\r\n}\r\n#topBox {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  flex-wrap: wrap;\r\n}\r\n.todayCell {\r\n  padding: 2px;\r\n  background: var(--trans-blue);\r\n  color: white;\r\n  border-radius: 2px;\r\n}\r\n#show {\r\n  padding: 10px 30px;\r\n  margin: 10px;\r\n  border-radius: 20px;\r\n}\r\n.flex {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n</style>\r\n\r\n","import notifyReqError from \"@/stores/notifyReqError\";\r\n\r\nexport default async function searchBlacklist(query, limit) {\r\n  try {\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(`${baseURL}/api/users/search_blacklist`, {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        query: query.trim(),\r\n        limit,\r\n      }),\r\n    });\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      // res holder\r\n      const appos = [];\r\n\r\n      // unpack\r\n      const tables = json.appos;\r\n\r\n      for (let row of tables) {\r\n        const [phoneNum, bannedOn, firstName, lastName, contactName] = row;\r\n\r\n        const appo = {\r\n          phoneNum,\r\n          bannedOn,\r\n          firstName,\r\n          lastName,\r\n          contactName,\r\n        };\r\n        appos.push(appo);\r\n      }\r\n\r\n      //  return results\r\n      return appos;\r\n    } else {\r\n      notifyReqError(json.message);\r\n      console.log(\"Failed to search on blacklist, message: \", json.message);\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n","export default async function fetchBlacklistLastTracked() {\r\n  try {\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(`${baseURL}/api/users/get_blacklist_last_tracked`, {\r\n      method: \"GET\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      // res holder\r\n      const lastTracked = json.last_tracked;\r\n      console.log(\"last: \", lastTracked);\r\n\r\n      return lastTracked;\r\n    } else {\r\n      // notifyReqError(json.message);\r\n      console.log(\r\n        \"Failed to get last tracked on blacklist, message: \",\r\n        json.message\r\n      );\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n","<template>\r\n  <button id=\"unsave\" class=\"redBtn\" @click=\"onOpenModal\">\r\n    <FontAwesomeIcon :icon=\"faPlus\" />\r\n    Add to Blacklist\r\n  </button>\r\n\r\n  <div id=\"parent\" v-if=\"isAdding\">\r\n    <div id=\"background\" @click=\"onCloseModal\" />\r\n    <form @submit.prevent=\"onSubmit\" id=\"window\">\r\n      <button type=\"button\" @click=\"onCloseModal\" id=\"closeBtn\" class=\"redBtn\">\r\n        X\r\n      </button>\r\n      <div id=\"content\">\r\n        <label>\r\n          Phone Number\r\n          <input\r\n            type=\"tel\"\r\n            placeholder=\"Phone number\"\r\n            v-model=\"phoneNum\"\r\n            required\r\n          />\r\n        </label>\r\n      </div>\r\n      <div id=\"flexBox\">\r\n        <button class=\"redBtn\">Add to Blacklist</button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// icon\r\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\r\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { ref } from \"vue\";\r\n// apis\r\nimport banUnbanPhoneNum from \"../apis/banUnbanPhoneNum\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\n// lib\r\nconst router = useRouter();\r\n// resources\r\nconst phoneNum = ref(\"\");\r\n// status\r\nconst isAdding = ref(false);\r\n\r\n// INPUT\r\nfunction onCloseModal() {\r\n  isAdding.value = false;\r\n}\r\n\r\nfunction onOpenModal() {\r\n  isAdding.value = true;\r\n}\r\n\r\n// APIS\r\nasync function onSubmit() {\r\n  const realPN = \"+1\" + phoneNum.value.replace(/\\D/g, \"\");\r\n  const res = await banUnbanPhoneNum(realPN, true);\r\n  if (res) {\r\n    router.push(\"/refresh\");\r\n  }\r\n}\r\n</script>\r\n\r\n<script>\r\nexport default {};\r\n</script>\r\n\r\n<style scoped>\r\n#unsave {\r\n  font-size: 13px;\r\n}\r\n#parent {\r\n  z-index: 15;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n#background {\r\n  position: fixed;\r\n  height: 100%;\r\n  width: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n}\r\n#window {\r\n  position: relative;\r\n  z-index: 20;\r\n  width: 300px;\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  background-color: var(--background-i2);\r\n  overflow-y: auto;\r\n  max-height: 80%;\r\n}\r\n#content {\r\n  padding: 20px;\r\n  margin-top: 15px;\r\n}\r\ninput {\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n#closeBtn {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  aspect-ratio: 1;\r\n  height: 30px;\r\n  padding: 0;\r\n  border-radius: 0;\r\n  border: none;\r\n}\r\n#unsave {\r\n  font-size: 13px;\r\n}\r\n#flexBox {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 10px;\r\n}\r\n</style>\r\n","import script from \"./AddBlacklistBtn.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AddBlacklistBtn.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AddBlacklistBtn.vue?vue&type=style&index=0&id=8566601a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8566601a\"]])\n\nexport default __exports__","import { render } from \"./Blacklist.vue?vue&type=template&id=783961e8&scoped=true\"\nimport script from \"./Blacklist.vue?vue&type=script&lang=js\"\nexport * from \"./Blacklist.vue?vue&type=script&lang=js\"\n\nimport \"./Blacklist.vue?vue&type=style&index=0&id=783961e8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-783961e8\"]])\n\nexport default __exports__"],"names":["formatPhone","rawPhone","slice","console","log","formatted","length","unixToHours","unix","dt","DateTime","fromSeconds","torontoDate","setZone","getTimezone","toFormat","unixToReadable","unixTimestamp","dateTime","fromMillis","toLocaleString","weekday","month","day","year","async","banUnbanPhoneNum","phoneNum","boolean","parsePhoneNumberFromString","number","e","Error","baseURL","process","res","fetch","method","credentials","headers","body","JSON","stringify","phone_num","ok","json","notifyReqError","message","error","id","class","key","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","type","placeholder","_cache","$event","$setup","query","onInput","args","onSearch","_createVNode","_component_AddBlacklistBtn","_renderList","rows","row","index","_hoisted_2","_hoisted_3","bannedOn","lastTracked","_hoisted_4","_createCommentVNode","today","_hoisted_5","_toDisplayString","_createTextVNode","contactName","firstName","lastName","_hoisted_6","onClick","onUnban","_hoisted_7","_hoisted_8","limit","showMore","searchBlacklist","trim","appos","tables","appo","push","fetchBlacklistLastTracked","last_tracked","__default__","router","useRouter","ref","isAdding","onCloseModal","value","onOpenModal","onSubmit","realPN","replace","__exports__","name","components","AddBlacklistBtn","setup","getTodayUnixTime","onMounted","onBeforeRouteLeave","to","from","next","fetchNewBlacklistCount","render"],"sourceRoot":""}