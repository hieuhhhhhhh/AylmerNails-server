"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[741],{4714:function(e,n,o){function t(e){if("+1"!==e.slice(0,2))return e;if(console.log("calling"),!e)return;let n="";return e=e.slice(2),n=e.length<=3?e:e.length<=6?`${e.slice(0,3)} ${e.slice(3)}`:`${e.slice(0,3)} ${e.slice(3,6)} ${e.slice(6)}`,n}o.d(n,{A:function(){return t}})},6769:function(e,n,o){o.d(n,{A:function(){return l}});var t=o(4116);function l(e){return console.log("calling"),t.c9.fromObject({hour:0}).plus({seconds:e}).toFormat("h:mm a")}},3519:function(e,n,o){o.d(n,{A:function(){return l}});var t=o(4116);function l(e){if(console.log("calling"),!e)return;const n=t.c9.fromSeconds(e).startOf("day"),o=t.c9.local().startOf("day"),l=n.diff(o,"days").toObject(),a=Math.round(l.days);if(n.equals(o))return"Today";if(1===a)return"Tomorrow";if(-1===a)return"Yesterday";const c=a>0?"next":"last";return Math.abs(a)>=30?`${c} ${Math.abs(Math.round(a/30))}m`:Math.abs(a)>=7?`${c} ${Math.abs(Math.round(a/7))}w`:`${c} ${Math.abs(a)}d`}},1076:function(e,n,o){o.d(n,{A:function(){return a}});var t=o(4116),l=o(6156);function a(e){if(console.log("calling"),!e)return;const n=t.c9.fromMillis(1e3*e).setZone((0,l.A)());return n.toLocaleString({weekday:"short",month:"short",day:"numeric",year:"numeric"})}},5741:function(e,n,o){o.r(n),o.d(n,{default:function(){return L}});var t=o(6768),l=o(4232);const a=["onClick"],c={key:0},r={key:1,style:{color:"red"}};function s(e,n,o,s,i,u){return(0,t.uX)(),(0,t.CE)(t.FK,null,[n[2]||(n[2]=(0,t.Lk)("div",{id:"title"},"Service Availability Conflicts",-1)),(0,t.Lk)("table",null,[n[1]||(n[1]=(0,t.Lk)("colgroup",null,[(0,t.Lk)("col",{style:{width:"auto"}}),(0,t.Lk)("col",{style:{width:"auto"}})],-1)),(0,t.Lk)("tbody",null,[n[0]||(n[0]=(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"Client"),(0,t.Lk)("th",null,"Service"),(0,t.Lk)("th",null,"Time"),(0,t.Lk)("th",null,"Opening Hours")],-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.conflicts,((e,n)=>((0,t.uX)(),(0,t.CE)("tr",{class:"row",key:n,onClick:n=>s.toAppoDetails(e.appoDate,e.appoId)},[(0,t.Lk)("td",null,[(0,t.eW)((0,l.v_)(e.contactName)+" ",1),(0,t.Lk)("div",null,(0,l.v_)(s.formatPhone(e.phoneNum)),1)]),(0,t.Lk)("td",null,[(0,t.eW)((0,l.v_)(e.serviceName)+" ",1),(0,t.Lk)("div",null,(0,l.v_)(e.category),1)]),(0,t.Lk)("td",null,[(0,t.eW)((0,l.v_)(s.unixToReadable(e.appoDate))+" ("+(0,l.v_)(s.unixTimeToReminder(e.appoDate))+") ",1),(0,t.Lk)("div",null,(0,l.v_)(s.secsToHours(e.appoStart))+" - "+(0,l.v_)(s.secsToHours(e.appoEnd)),1)]),(0,t.Lk)("td",null,[(0,t.eW)((0,l.v_)(e.appoDOW)+" ",1),e.opening&&e.closing?((0,t.uX)(),(0,t.CE)("div",c,(0,l.v_)(s.secsToHours(e.opening))+" - "+(0,l.v_)(s.secsToHours(e.closing)),1)):((0,t.uX)(),(0,t.CE)("div",r,"closed"))])],8,a)))),128))])])],64)}o(4114);var i=o(1387),u=o(144),d=o(8199);async function p(e){try{const n="",o=await fetch(`${n}/api/employees/get_schedule_conflicts/${e}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await o.json();if(o.ok){let e=[];const n=t.conflicts;for(let o of n){const[n,t,l,a,c,r,s,i,u,d,p,f,h,m]=o;e.push({empId:n,appoId:t,appoDate:l,appoDOW:a,appoStart:c,appoEnd:r,empAlias:s,serviceName:i,category:u,contactName:d,phoneNumId:p,phoneNum:f,opening:h,closing:m})}return e}(0,d.A)(t.message),console.log("Failed to fetch schedule conflicts, message: ",t.message)}catch(n){console.error("Unexpected Error: ",n)}}var f=o(4714),h=o(1076),m=o(3519),v=o(6769),k={setup(){const e=(0,i.lq)(),n=e.params.empId,o=(0,i.rd)(),l=(0,u.KR)([]),a=(e,n)=>{console.log("date, appoId",e,n),o.push(`/calendar/${e}/${n}`)};return(0,t.sV)((async()=>{l.value=await p(n)})),{empId:n,conflicts:l,toAppoDetails:a,unixTimeToReminder:m.A,secsToHours:v.A,unixToReadable:h.A,formatPhone:f.A}}},g=o(1241);const y=(0,g.A)(k,[["render",s],["__scopeId","data-v-65d93e24"]]);var L=y}}]);
//# sourceMappingURL=741.22f9a9a4.js.map