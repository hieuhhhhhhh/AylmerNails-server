{"version":3,"file":"js/954.70fa5ae2.js","mappings":"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","sources":["webpack://frontend/./src/lib/parseDate.js","webpack://frontend/./src/views/book_now/comps/welcome_modal/apis/logIn.js","webpack://frontend/./src/views/book_now/Parent.vue","webpack://frontend/./src/views/book_now/comps/services/Services.vue","webpack://frontend/./src/views/book_now/comps/services/SelectService.vue","webpack://frontend/./src/views/book_now/comps/services/Category.vue","webpack://frontend/./src/views/book_now/comps/services/Category.vue?cd20","webpack://frontend/./src/views/book_now/apis/fetchActiveServices.js","webpack://frontend/./src/views/book_now/comps/services/SelectAOSOs.vue","webpack://frontend/./src/views/book_now/apis/fetchAOSs.js","webpack://frontend/./src/views/book_now/comps/services/SelectAOSOs.vue?e1ea","webpack://frontend/./src/views/book_now/comps/services/SelectService.vue?b543","webpack://frontend/./src/views/book_now/comps/services/Service.vue","webpack://frontend/./src/views/book_now/apis/fetchServicePreview.js","webpack://frontend/./src/views/book_now/apis/fetchSEs.js","webpack://frontend/./src/views/book_now/comps/services/Service.vue?981c","webpack://frontend/./src/views/book_now/comps/services/Services.vue?51f5","webpack://frontend/./src/views/book_now/comps/time_slots/SelectTime.vue","webpack://frontend/./src/views/book_now/apis/secondsToClock.js","webpack://frontend/./src/views/book_now/apis/fetchAvailability.js","webpack://frontend/./src/views/book_now/comps/time_slots/SelectTime.vue?ddc1","webpack://frontend/./src/views/book_now/apis/requestOTP.js","webpack://frontend/./src/views/book_now/comps/final_preview/guest_booking/PhoneNumInput.vue","webpack://frontend/./src/views/book_now/comps/final_preview/guest_booking/PhoneNumInput.vue?2937","webpack://frontend/./src/views/book_now/apis/guestAddAppo.js","webpack://frontend/./src/views/book_now/comps/final_preview/guest_booking/OTPverify.vue","webpack://frontend/./src/views/book_now/comps/final_preview/guest_booking/OTPverify.vue?2ee3","webpack://frontend/./src/views/book_now/comps/final_preview/guest_booking/GuestBooking.vue","webpack://frontend/./src/views/book_now/comps/final_preview/guest_booking/GuestBooking.vue?da01","webpack://frontend/./src/views/book_now/apis/clientAddAppo.js","webpack://frontend/./src/views/book_now/comps/final_preview/Parent.vue","webpack://frontend/./src/views/book_now/comps/final_preview/Parent.vue?485f","webpack://frontend/./src/views/book_now/comps/confirmation/BookingConfirmation.vue","webpack://frontend/./src/views/book_now/comps/confirmation/BookingConfirmation.vue?3222","webpack://frontend/./src/views/book_now/comps/welcome_modal/LogInForm.vue","webpack://frontend/./src/views/book_now/comps/welcome_modal/LogInForm.vue?5f4a","webpack://frontend/./src/views/book_now/comps/welcome_modal/WelcomeModal.vue","webpack://frontend/./src/views/book_now/comps/welcome_modal/WelcomeModal.vue?67e5","webpack://frontend/./src/views/book_now/Parent.vue?3175"],"sourcesContent":["import { DateTime } from \"luxon\";\r\nimport getTimezone from \"./getTimeZone\";\r\n\r\nexport default function dateToUnixTime(date) {\r\n  console.log(\"calling\");\r\n\r\n  if (!date) {\r\n    return null;\r\n  }\r\n\r\n  // Parse the date string using Luxon and set it to Toronto timezone\r\n  const torontoDateTime = DateTime.fromISO(date, { zone: getTimezone() });\r\n\r\n  // Convert the date to Unix timestamp (seconds)\r\n  const unixTimestamp = torontoDateTime.toSeconds();\r\n\r\n  console.log(\"date to unix: \", unixTimestamp);\r\n\r\n  return unixTimestamp;\r\n}\r\n","import { useMyProfile } from \"@/stores/myProfile\";\r\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\r\n\r\nexport default async function logIn(phoneNum, password, rememberMe) {\r\n  try {\r\n    try {\r\n      // parse phone number to E.164\r\n      phoneNum = parsePhoneNumberFromString(phoneNum, \"CA\").number; // E.164 format\r\n      console.log(\"phoneNum: \", phoneNum);\r\n    } catch (e) {\r\n      return { message: \"Invalid phone number\" };\r\n    }\r\n\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(`${baseURL}/api/authentication/log_in`, {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        phone_num: phoneNum,\r\n        password,\r\n        remember_me: rememberMe,\r\n      }),\r\n    });\r\n\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      // update pinia states\r\n      const store = useMyProfile();\r\n\r\n      store.setMyProfile({\r\n        token: json.token,\r\n        role: json.user_role,\r\n      });\r\n\r\n      return true;\r\n    } else {\r\n      console.log(\"Failed to log in, message: \", json.message);\r\n      return { message: json.message };\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n    return { message: \"Unexpected Error\" };\r\n  }\r\n}\r\n","<template>\r\n  <div id=\"layout\">\r\n    <WelcomeModal />\r\n    <div v-show=\"page == 1 || page == 0\">\r\n      <Services\r\n        :getServices=\"getServices\"\r\n        :onNavigateNext=\"onNavigateNext\"\r\n        :resetPage2=\"resetPage2\"\r\n      />\r\n    </div>\r\n    <div v-show=\"page == 2\" :key=\"page2trigger\">\r\n      <SelectTime\r\n        :isReady=\"page == 2\"\r\n        :services=\"services\"\r\n        :onSelectChain=\"onSelectChain\"\r\n        :onReturn=\"onReturn\"\r\n      />\r\n    </div>\r\n    <div v-show=\"page == 3\" :key=\"page3trigger\">\r\n      <FinalPreview\r\n        :chain=\"chain\"\r\n        :date=\"date\"\r\n        :onInputMessage=\"onInputMessage\"\r\n        :onSubmit=\"onSubmit\"\r\n        :onReturn=\"onReturn\"\r\n      />\r\n    </div>\r\n    <div v-if=\"page == 4\">\r\n      <BookingConfirmation\r\n        :chain=\"chain\"\r\n        :date=\"date\"\r\n        :onClearForm=\"onClearForm\"\r\n        :customer=\"customer\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// lib\r\nimport { computed, ref, watch } from \"vue\";\r\nimport { onBeforeRouteLeave, useRoute, useRouter } from \"vue-router\";\r\n// comps\r\nimport Services from \"./comps/services/Services.vue\";\r\nimport SelectTime from \"./comps/time_slots/SelectTime.vue\";\r\nimport FinalPreview from \"./comps/final_preview/Parent.vue\";\r\nimport BookingConfirmation from \"./comps/confirmation/BookingConfirmation.vue\";\r\nimport WelcomeModal from \"./comps/welcome_modal/WelcomeModal.vue\";\r\n\r\nexport default {\r\n  name: \"BookNowParent\",\r\n  components: {\r\n    Services,\r\n    SelectTime,\r\n    FinalPreview,\r\n    WelcomeModal,\r\n    BookingConfirmation,\r\n  },\r\n  setup() {\r\n    // lib\r\n    const router = useRouter();\r\n    const route = useRoute();\r\n    // RESOURCES\r\n    const services = ref({});\r\n    const page = ref(1);\r\n    const page2trigger = ref(0);\r\n    const page3trigger = ref(0);\r\n    const chain = ref({});\r\n    const date = ref(null);\r\n    const customer = ref({});\r\n\r\n    const formIsEmpty = computed(\r\n      () =>\r\n        Object.keys(chain.value).length < 1 &&\r\n        Object.keys(services.value).length < 1\r\n    );\r\n\r\n    // Methods\r\n\r\n    const getServices = () => services.value;\r\n\r\n    const updateURL = () => {\r\n      router.push(`/booknow/${page.value}`);\r\n    };\r\n\r\n    const onNavigateNext = () => {\r\n      page.value++;\r\n      updateURL();\r\n    };\r\n\r\n    const resetPage2 = () => {\r\n      page2trigger.value++;\r\n    };\r\n\r\n    const onReturn = () => {\r\n      if (!formIsEmpty.value) router.back();\r\n    };\r\n\r\n    const onSelectChain = (selectedChain, selectedDate) => {\r\n      console.log(\"date\", selectedDate);\r\n      date.value = selectedDate;\r\n      chain.value = selectedChain;\r\n      page3trigger.value++;\r\n      onNavigateNext();\r\n    };\r\n\r\n    const onInputMessage = (index, value) => {\r\n      chain.value.slots[index].message = value;\r\n    };\r\n\r\n    const onClearForm = () => {\r\n      console.log(\"clearing form\");\r\n\r\n      chain.value = {};\r\n      services.value = {};\r\n      date.value = null;\r\n    };\r\n\r\n    const onSubmit = (name, phoneNum) => {\r\n      customer.value = { name, phoneNum };\r\n      onNavigateNext();\r\n    };\r\n\r\n    // DEPENDENCIES\r\n\r\n    watch(\r\n      () => route.params.page,\r\n      (value) => {\r\n        console.log(\"navigating: \", value);\r\n        console.log(\"formIsEmpty\", formIsEmpty.value);\r\n        if (page.value == value) {\r\n          return;\r\n        }\r\n\r\n        if (value !== 1 && value !== 0 && formIsEmpty.value) {\r\n          page.value = 1;\r\n          updateURL();\r\n          router.push(\"/refresh\");\r\n          return;\r\n        }\r\n\r\n        page.value = value;\r\n      }\r\n    );\r\n\r\n    // Route guard before leaving\r\n    onBeforeRouteLeave((to, from, next) => {\r\n      if (to.fullPath.startsWith(\"/booknow\")) {\r\n        next();\r\n        return;\r\n      }\r\n\r\n      if (Object.keys(services.value).length === 0) {\r\n        next();\r\n        return;\r\n      }\r\n\r\n      const answer = confirm(\r\n        \"Current selections won't be saved. Proceed to leave?\"\r\n      );\r\n      if (answer) {\r\n        next(); // Proceed with navigation\r\n      } else {\r\n        next(false); // Prevent navigation\r\n      }\r\n    });\r\n\r\n    // Return to template\r\n    return {\r\n      services,\r\n      page,\r\n      page2trigger,\r\n      page3trigger,\r\n      chain,\r\n      date,\r\n      customer,\r\n      getServices,\r\n      onNavigateNext,\r\n      resetPage2,\r\n      onReturn,\r\n      onSelectChain,\r\n      onInputMessage,\r\n      onSubmit,\r\n      onClearForm,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#layout {\r\n  background-color: var(--background-i1);\r\n  padding: 10px;\r\n  width: 900px;\r\n  max-width: 100vw;\r\n  margin-inline: auto;\r\n  flex-grow: 1;\r\n  box-sizing: border-box;\r\n}\r\n#xs {\r\n  color: rgb(193, 0, 0);\r\n}\r\n</style>\r\n","<template>\r\n  <div v-show=\"!isSelecting\" id=\"flexBox\">\r\n    <div id=\"note\">Step 2: Use checkboxes to select technicians</div>\r\n\r\n    <Service\r\n      v-for=\"(service, index) in services\"\r\n      :key=\"index\"\r\n      :service=\"service\"\r\n      :onRemoveService=\"onRemoveService\"\r\n      :onInputEmpIds=\"onInputEmpIds\"\r\n    />\r\n    <br />\r\n    <button class=\"greenBtn\" id=\"addBtn\" @click=\"openSelect\">\r\n      <FontAwesomeIcon :icon=\"addIcon\" /> Add Service\r\n    </button>\r\n    <br />\r\n\r\n    <div id=\"duo\">\r\n      <button class=\"blueBtn\" id=\"rightBtn\" @click=\"onSubmit\">\r\n        Continue <FontAwesomeIcon :icon=\"continueIcon\" />\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <div v-show=\"isSelecting\">\r\n    <SelectService\r\n      :onInputService=\"onInputService\"\r\n      :onClose=\"closeSelect\"\r\n      :isReturnable=\"isReturnable\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, watch } from \"vue\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\r\nimport {\r\n  faPlus,\r\n  faLeftLong,\r\n  faRightLong,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\n// comps\r\nimport SelectService from \"./SelectService.vue\";\r\nimport Service from \"./Service.vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\n\r\nexport default {\r\n  name: \"BookNowParent\",\r\n  components: {\r\n    SelectService,\r\n    Service,\r\n    FontAwesomeIcon,\r\n  },\r\n  props: {\r\n    getServices: Function,\r\n    onNavigateNext: Function,\r\n    resetPage2: Function,\r\n  },\r\n  setup(props) {\r\n    const addIcon = faPlus;\r\n    const backIcon = faLeftLong;\r\n    const continueIcon = faRightLong;\r\n    const router = useRouter();\r\n    const route = useRoute();\r\n\r\n    const isSelecting = ref(false);\r\n    const isReturnable = ref(false);\r\n    const services = ref({});\r\n\r\n    const onInputService = (id, AOSOs, name) => {\r\n      if (!services.value[id]) {\r\n        services.value[id] = {\r\n          serviceId: id,\r\n          empIds: [],\r\n          AOSOs: AOSOs,\r\n          serviceName: name,\r\n        };\r\n      }\r\n      isReturnable.value = true;\r\n\r\n      isSelecting.value = false;\r\n      router.push(`/booknow/1`);\r\n      props.resetPage2();\r\n    };\r\n\r\n    const openSelect = () => {\r\n      isSelecting.value = true;\r\n      router.push(`/booknow/0`);\r\n    };\r\n\r\n    const closeSelect = () => {\r\n      router.back();\r\n    };\r\n\r\n    const onRemoveService = (id) => {\r\n      delete services.value[id];\r\n      props.resetPage2();\r\n    };\r\n\r\n    const onInputEmpIds = (serviceId, ids, aliases) => {\r\n      services.value[serviceId].empIds = ids;\r\n      services.value[serviceId].empAliases = aliases;\r\n\r\n      props.resetPage2();\r\n    };\r\n\r\n    const onSubmit = () => {\r\n      if (!Object.keys(services.value).length) {\r\n        isSelecting.value = true;\r\n        return;\r\n      }\r\n      props.onNavigateNext();\r\n    };\r\n\r\n    onMounted(() => {\r\n      services.value = props.getServices();\r\n      if (!Object.keys(services.value).length) {\r\n        isSelecting.value = true;\r\n      }\r\n    });\r\n\r\n    // DEPENDENCIES\r\n    watch(\r\n      () => route.params.page,\r\n      (value) => {\r\n        if (value == 1) {\r\n          isSelecting.value = false;\r\n          return;\r\n        }\r\n\r\n        if (value == 0) {\r\n          isSelecting.value = true;\r\n          return;\r\n        }\r\n      }\r\n    );\r\n    return {\r\n      addIcon,\r\n      backIcon,\r\n      continueIcon,\r\n      isSelecting,\r\n      isReturnable,\r\n      services,\r\n      onInputService,\r\n      openSelect,\r\n      closeSelect,\r\n      onRemoveService,\r\n      onInputEmpIds,\r\n      onSubmit,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#flexBox {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: column;\r\n}\r\n#addBtn {\r\n  border-radius: 30px;\r\n}\r\n#note {\r\n  padding: 10px;\r\n  padding-top: 0px;\r\n  color: rgb(184, 121, 3);\r\n}\r\n#rightBtn {\r\n  padding-inline: 15px;\r\n  font-size: 20px;\r\n  border-top-right-radius: 30px;\r\n  border-bottom-right-radius: 30px;\r\n}\r\n#leftBtn {\r\n  font-size: 23px;\r\n  border-top-left-radius: 30px;\r\n  border-bottom-left-radius: 30px;\r\n}\r\n#duo {\r\n  display: flex;\r\n  gap: 5px;\r\n  width: 90%;\r\n  justify-content: flex-end;\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <button\r\n      v-if=\"isReturnable\"\r\n      class=\"orangeBtn\"\r\n      id=\"backBtn\"\r\n      @click=\"closeSelect\"\r\n    >\r\n      <FontAwesomeIcon :icon=\"backIcon\" /> Back\r\n    </button>\r\n  </div>\r\n  <div id=\"note\">\r\n    Note: this website is intended for individual appointments\r\n    <!-- <br /> -->\r\n    <!-- Contact us for multiple people appointments -->\r\n    <br />\r\n    Step 1: Select your service\r\n  </div>\r\n\r\n  <div v-if=\"isFetched\" id=\"flexBox\">\r\n    <Category\r\n      v-for=\"(category, index) in categories\"\r\n      :key=\"index\"\r\n      :category=\"category\"\r\n      :onInputServiceId=\"onInputServiceId\"\r\n    />\r\n  </div>\r\n\r\n  <div v-if=\"openAOSs\">\r\n    <SelectAOSOs\r\n      :serviceId=\"serviceId\"\r\n      :onClose=\"closeAOSOs\"\r\n      :onInputAOSOs=\"onInputAOSOs\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// icons\r\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\r\nimport { faLeftLong } from \"@fortawesome/free-solid-svg-icons\";\r\n// comps\r\nimport Category from \"./Category.vue\";\r\n// lib\r\nimport fetchActiveServices from \"../../apis/fetchActiveServices\";\r\nimport SelectAOSOs from \"./SelectAOSOs.vue\";\r\n\r\nexport default {\r\n  props: {\r\n    isReturnable: Boolean,\r\n    onInputService: Function,\r\n    onClose: Function,\r\n  },\r\n  components: {\r\n    FontAwesomeIcon,\r\n    Category,\r\n    SelectAOSOs,\r\n  },\r\n  data() {\r\n    return {\r\n      // icons\r\n      backIcon: faLeftLong,\r\n      // status\r\n      isFetched: false,\r\n      openAOSs: false,\r\n      // resources\r\n      categories: [],\r\n      // outcome\r\n      serviceId: null,\r\n      serviceName: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    closeSelect() {\r\n      this.onClose();\r\n    },\r\n    onInputServiceId(serviceId, name) {\r\n      this.serviceId = serviceId;\r\n      this.serviceName = name;\r\n      this.openAOSs = true;\r\n    },\r\n    closeAOSOs() {\r\n      this.openAOSs = false;\r\n    },\r\n    onInputAOSOs(AOSOs) {\r\n      this.onInputService(this.serviceId, AOSOs, this.serviceName);\r\n    },\r\n  },\r\n  async created() {\r\n    this.categories = await fetchActiveServices();\r\n    this.isFetched = true;\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#flexBox {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  gap: 10px;\r\n}\r\n\r\n#backBtn {\r\n  position: sticky;\r\n  top: 10px;\r\n  left: 10px;\r\n  z-index: 10;\r\n  font-size: 22px;\r\n}\r\n#note {\r\n  padding: 10px;\r\n  padding-top: 0px;\r\n  color: rgb(184, 121, 3);\r\n  text-align: center;\r\n}\r\n</style>\r\n\r\n","<template>\r\n  <div id=\"category\" v-if=\"category.services.length\">\r\n    <div id=\"title\">{{ category.cate_name }}</div>\r\n    <div\r\n      id=\"service\"\r\n      v-for=\"(service, index) in category.services\"\r\n      :key=\"index\"\r\n      @click=\"onSelectService(service.service_id, service.service_name)\"\r\n    >\r\n      <div>\r\n        {{ service.service_name }}\r\n      </div>\r\n      <div v-if=\"service.price\">$ {{ service.price }} +</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// lib\r\nimport unixToReadable from \"@/lib/unixToReadable\";\r\n\r\nexport default {\r\n  name: \"Category-\",\r\n  props: {\r\n    category: Object,\r\n    onInputServiceId: Function,\r\n  },\r\n  methods: {\r\n    formatDate(unixTime) {\r\n      return unixToReadable(unixTime);\r\n    },\r\n    onSelectService(id, name) {\r\n      this.onInputServiceId(id, name);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#category {\r\n  box-shadow: 0 0 5px var(--shadow-color);\r\n  max-width: 90vw;\r\n  width: 350px;\r\n  border-radius: 5px;\r\n  background-color: var(--background-i2);\r\n  box-sizing: border-box;\r\n  height: fit-content;\r\n}\r\n#title {\r\n  padding: 10px;\r\n  text-align: center;\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n  box-sizing: border-box;\r\n}\r\n#service {\r\n  padding: 8px;\r\n  padding-inline: 15px;\r\n  font-size: 17px;\r\n  border-top: 1px solid var(--xtrans-gray);\r\n  box-sizing: border-box;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n#service:hover {\r\n  background: var(--hover);\r\n}\r\n#service:active {\r\n  background: var(--active);\r\n}\r\n/* phone view */\r\n@media (orientation: portrait) {\r\n  #service {\r\n    padding: 13px;\r\n  }\r\n  #title {\r\n    padding: 15px;\r\n  }\r\n}\r\n</style>","import { render } from \"./Category.vue?vue&type=template&id=97f2fcee&scoped=true\"\nimport script from \"./Category.vue?vue&type=script&lang=js\"\nexport * from \"./Category.vue?vue&type=script&lang=js\"\n\nimport \"./Category.vue?vue&type=style&index=0&id=97f2fcee&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-97f2fcee\"]])\n\nexport default __exports__","import getTodayUnixTime from \"@/lib/getTodayUnixTime\";\r\nimport notifyReqError from \"@/stores/notifyReqError\";\r\n\r\nexport default async function fetchActiveServices() {\r\n  try {\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(\r\n      `${baseURL}/api/services/get_services/${getTodayUnixTime()}`,\r\n      {\r\n        method: \"GET\",\r\n        credentials: \"include\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    );\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      // refactor services to categories and return result\r\n      const categories = refactorServices(json.services, json.categories);\r\n\r\n      return categories;\r\n    } else {\r\n      notifyReqError(json.message);\r\n      console.log(\"Failed to fetch employee list, message: \", json.message);\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n\r\n// re-group services by category_ids, then sort the group by number of services\r\nfunction refactorServices(rawServices, rawCategories) {\r\n  // a map of categories where category_id is key\r\n  const categories = {};\r\n  categories[null] = {\r\n    cate_id: null,\r\n    cate_name: \"Others\",\r\n    services: [],\r\n  };\r\n\r\n  rawCategories.forEach((raw) => {\r\n    const [cate_id, cate_name] = raw;\r\n    categories[cate_id] = { cate_id, cate_name, services: [] };\r\n  });\r\n\r\n  // re-group services based on their category_id\r\n  rawServices.forEach((raw) => {\r\n    const [service_id, service_name, last_date, is_active, cate_id, price] =\r\n      raw;\r\n\r\n    // add the service to the matching category_id\r\n    if (is_active) {\r\n      categories[cate_id].services.push({\r\n        service_id,\r\n        service_name,\r\n        last_date,\r\n        price,\r\n      });\r\n    }\r\n  });\r\n\r\n  // remove 'Unclassified' if no services in there\r\n  if (!categories[null].services.length > 0) {\r\n    delete categories[null];\r\n  }\r\n\r\n  // sort the map based on the length of prop 'services'\r\n  const sorted = Object.values(categories).sort(\r\n    (a, b) => b.services.length - a.services.length\r\n  );\r\n\r\n  // return result\r\n  return sorted;\r\n}\r\n","<template>\r\n  <div id=\"parent\">\r\n    <div id=\"background\" @click=\"handleClose\" />\r\n    <div id=\"window\">\r\n      <button @click=\"handleClose\" id=\"closeBtn\" class=\"redBtn\">\r\n        <FontAwesomeIcon :icon=\"faXmark\" />\r\n      </button>\r\n\r\n      <div v-if=\"fetched\">\r\n        <div id=\"title\">\r\n          {{ serviceInfo.name }}\r\n          <div id=\"description\">\r\n            {{ serviceInfo.description }}\r\n          </div>\r\n        </div>\r\n        <form\r\n          v-if=\"serviceInfo.client_can_book\"\r\n          @submit.prevent=\"onSubmit\"\r\n          id=\"content\"\r\n        >\r\n          <div\r\n            v-for=\"(question, index) in questions\"\r\n            :key=\"index\"\r\n            class=\"questionBox\"\r\n          >\r\n            <span class=\"question\"\r\n              >{{ index + 1 }}. {{ question.questionText }}</span\r\n            >\r\n            <div class=\"optionBox\">\r\n              <div\r\n                v-for=\"(option, childIndex) in question.options\"\r\n                :key=\"childIndex\"\r\n                class=\"options\"\r\n              >\r\n                <label>\r\n                  <input\r\n                    type=\"radio\"\r\n                    :value=\"option.optionId\"\r\n                    v-model=\"answers[question.questionId]\"\r\n                    required\r\n                  />\r\n                  {{ option.optionText }}\r\n                  {{ formatOffset(option.optionOffset) }}\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div v-if=\"msg\" id=\"msg\">{{ msg }}</div>\r\n          <div id=\"btnBox\">\r\n            <button id=\"confirm\" class=\"blueBtn\">Confirm</button>\r\n          </div>\r\n        </form>\r\n        <div v-else id=\"notAvail\">\r\n          This service is not available for online booking, please contact us to\r\n          book\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n// icon\r\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\r\nimport { faXmark } from \"@fortawesome/free-solid-svg-icons\";\r\n// apis\r\nimport fetchAOSs from \"../../apis/fetchAOSs\";\r\n\r\nexport default {\r\n  props: {\r\n    serviceId: Number,\r\n    onClose: Function,\r\n    onInputAOSOs: Function,\r\n  },\r\n  data() {\r\n    return {\r\n      // resource\r\n      faXmark,\r\n      questions: [],\r\n      serviceInfo: {},\r\n      msg: \"\",\r\n      // outcome\r\n      answers: {},\r\n      // status\r\n      fetched: false,\r\n    };\r\n  },\r\n  components: {\r\n    FontAwesomeIcon,\r\n  },\r\n  methods: {\r\n    onSubmit() {\r\n      const AOSOs = [];\r\n      for (let key in this.answers) {\r\n        AOSOs.push(Number(key));\r\n        AOSOs.push(this.answers[key]);\r\n      }\r\n      if (AOSOs.length / 2 !== this.questions.length) {\r\n        this.msg = \"Please provide answers to all questions\";\r\n        return;\r\n      }\r\n      this.onInputAOSOs(AOSOs);\r\n      this.onClose();\r\n    },\r\n    handleClose() {\r\n      this.onClose();\r\n    },\r\n    formatOffset(seconds) {\r\n      if (seconds === 0) return;\r\n\r\n      let sign = seconds >= 0 ? \"+\" : \"-\";\r\n      let absMinutes = Math.abs(Math.floor(seconds / 60));\r\n\r\n      return `(${sign}${absMinutes} mins)`;\r\n    },\r\n    onInputAnswer() {},\r\n  },\r\n  async created() {\r\n    // fetch data\r\n    const { questions, serviceInfo } = await fetchAOSs(this.serviceId);\r\n    this.questions = questions;\r\n    this.serviceInfo = serviceInfo;\r\n    this.fetched = true;\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#parent {\r\n  z-index: 15;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n#background {\r\n  position: fixed;\r\n  height: 100%;\r\n  width: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n}\r\n#window {\r\n  position: relative;\r\n  z-index: 20;\r\n  width: 500px;\r\n  max-width: 90%;\r\n  background-color: var(--background-i1);\r\n  overflow-y: auto;\r\n  max-height: 80%;\r\n}\r\n#content {\r\n  padding: 10px 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n}\r\n#closeBtn {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  aspect-ratio: 1;\r\n  height: 30px;\r\n  padding: 0;\r\n  border: none;\r\n  border-radius: 0px;\r\n  font-size: 20px;\r\n}\r\n#btnBox {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n#msg {\r\n  text-align: center;\r\n  font-size: 14px;\r\n  color: red;\r\n}\r\n.question {\r\n  font-size: 16px;\r\n}\r\n.questionBox {\r\n  margin-bottom: 20px;\r\n}\r\n.optionBox {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  gap: 5px;\r\n}\r\n\r\ninput[type=\"radio\"] {\r\n  position: relative;\r\n  top: -1px;\r\n  margin-left: -5px;\r\n  margin-right: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\nlabel {\r\n  font-size: 14px;\r\n  background: var(--background-i2);\r\n  box-shadow: 0 0 5px var(--shadow-color);\r\n  border-radius: 3px;\r\n  margin: 5px;\r\n  padding: 6px 12px;\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\nlabel:active {\r\n  background: var(--active);\r\n}\r\n#title {\r\n  text-align: center;\r\n  font-size: 25px;\r\n  margin-top: 10px;\r\n}\r\n#description {\r\n  font-size: 15px;\r\n  color: gray;\r\n}\r\n#confirm {\r\n  padding: 5px 30px;\r\n  border-radius: 20px;\r\n}\r\n#notAvail {\r\n  padding: 20px;\r\n  text-align: center;\r\n  font-size: 15px;\r\n  color: rgb(184, 121, 3);\r\n}\r\n</style>\r\n","import notifyReqError from \"@/stores/notifyReqError\";\r\n\r\nexport default async function fetchAOSs(serviceId) {\r\n  try {\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(\r\n      `${baseURL}/api/services/get_add_on_services/${serviceId}`,\r\n      {\r\n        method: \"GET\",\r\n        credentials: \"include\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    );\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      // read response\r\n      const questions = rawToQuestions(json.add_on_services);\r\n      const serviceInfo = readServiceInfo(json.service_info);\r\n\r\n      // return formatted result\r\n      return { questions, serviceInfo };\r\n    } else {\r\n      notifyReqError(json.message);\r\n      console.log(\"Failed to fetch add-on services, message: \", json.message);\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n\r\nfunction rawToQuestions(raw) {\r\n  // result holder\r\n  let questions = [];\r\n\r\n  // iterate every element (row)\r\n  let i = -1;\r\n  let currentId = null;\r\n  for (let row of raw) {\r\n    // unpack\r\n    const [optionId, optionText, optionOffset, questionId, questionText] = row;\r\n\r\n    // read questionId, if same id do nothing, if new push new question\r\n    if (currentId !== questionId) {\r\n      // push new quesiton\r\n      const question = { questionId, questionText, options: [] };\r\n      questions.push(question);\r\n\r\n      // increment index\r\n      currentId = questionId;\r\n      i++;\r\n    }\r\n\r\n    // push new option\r\n    const option = { optionId, optionText, optionOffset };\r\n    questions[i].options.push(option);\r\n  }\r\n\r\n  // return result\r\n  return questions;\r\n}\r\n\r\nfunction readServiceInfo(raw) {\r\n  // unpack\r\n  const [name, description, duration, price, client_can_book] = raw;\r\n\r\n  // return object\r\n  return { name, description, duration, price, client_can_book };\r\n}\r\n","import { render } from \"./SelectAOSOs.vue?vue&type=template&id=23738a09&scoped=true\"\nimport script from \"./SelectAOSOs.vue?vue&type=script&lang=js\"\nexport * from \"./SelectAOSOs.vue?vue&type=script&lang=js\"\n\nimport \"./SelectAOSOs.vue?vue&type=style&index=0&id=23738a09&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-23738a09\"]])\n\nexport default __exports__","import { render } from \"./SelectService.vue?vue&type=template&id=7143514d&scoped=true\"\nimport script from \"./SelectService.vue?vue&type=script&lang=js\"\nexport * from \"./SelectService.vue?vue&type=script&lang=js\"\n\nimport \"./SelectService.vue?vue&type=style&index=0&id=7143514d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7143514d\"]])\n\nexport default __exports__","<template>\r\n  <div id=\"bar\">\r\n    <div id=\"card\">\r\n      <div id=\"name\">{{ name }}</div>\r\n      <div id=\"des\">{{ description }}</div>\r\n      <br />\r\n      <div id=\"technicians\" v-if=\"SEs.length && fetched\">\r\n        <div v-for=\"employee in SEs\" :key=\"employee.employee_id\">\r\n          <label>\r\n            <input\r\n              id=\"check\"\r\n              type=\"checkbox\"\r\n              :value=\"{ id: employee.employee_id, alias: employee.alias }\"\r\n              v-model=\"checked\"\r\n              @change=\"onCheckEmp\"\r\n            />\r\n            <FontAwesomeIcon :icon=\"userIcon\" /> {{ employee.alias }}\r\n          </label>\r\n        </div>\r\n      </div>\r\n      <div id=\"note\" v-else>\r\n        No available technicians right now, please deselect this service\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <button class=\"redBtn\" id=\"remove\" @click=\"onRemove(service.serviceId)\">\r\n        <FontAwesomeIcon :icon=\"removeIcon\" />\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n// icons\r\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\r\nimport {\r\n  faClock,\r\n  faDollarSign,\r\n  faTrashCan,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nimport { faUser } from \"@fortawesome/free-regular-svg-icons\";\r\n// apis\r\nimport fetchServicePreview from \"../../apis/fetchServicePreview\";\r\nimport fetchServiceEmployees from \"../../apis/fetchSEs\";\r\n\r\nexport default {\r\n  name: \"Service-\",\r\n  props: {\r\n    service: Object,\r\n    onRemoveService: Function,\r\n    onInputEmpIds: Function,\r\n  },\r\n  components: {\r\n    FontAwesomeIcon,\r\n  },\r\n  data() {\r\n    return {\r\n      // icons\r\n      timeIcon: faClock,\r\n      dollarIcon: faDollarSign,\r\n      removeIcon: faTrashCan,\r\n      userIcon: faUser,\r\n      // status\r\n      fetched: false,\r\n      // resources\r\n      SEs: [],\r\n      checked: [],\r\n      // products\r\n      name: \"\",\r\n      description: \"\",\r\n      length: \"\",\r\n      price: null,\r\n    };\r\n  },\r\n  methods: {\r\n    onRemove(serviceId) {\r\n      this.onRemoveService(serviceId);\r\n    },\r\n    onCheckEmp() {\r\n      this.onInputEmpIds(\r\n        this.service.serviceId,\r\n        this.checked.map((e) => e.id),\r\n        this.checked.map((e) => e.alias)\r\n      );\r\n    },\r\n  },\r\n  async created() {\r\n    const [preview, employees] = await Promise.all([\r\n      fetchServicePreview(this.service.serviceId),\r\n      fetchServiceEmployees(this.service.serviceId),\r\n    ]);\r\n\r\n    // Assign preview details\r\n    this.name = preview.name;\r\n    this.description = preview.description;\r\n    this.length = preview.length;\r\n    this.price = preview.price;\r\n\r\n    // Assign employees\r\n    this.SEs = employees;\r\n    this.max = employees.length;\r\n\r\n    this.checked = employees.map((e) => ({\r\n      id: e.employee_id,\r\n      alias: e.alias,\r\n    }));\r\n    this.onCheckEmp();\r\n\r\n    // update status\r\n    this.fetched = true;\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#technicians {\r\n  border-top: 2px solid var(--xtrans-gray);\r\n  padding: 5px;\r\n}\r\n#check {\r\n  transform: scale(2);\r\n  margin: 10px;\r\n}\r\n#note {\r\n  padding: 10px;\r\n  padding-top: 0px;\r\n  color: rgb(184, 121, 3);\r\n}\r\n#remove {\r\n  margin-left: 5px;\r\n  box-sizing: border-box;\r\n}\r\n#bar {\r\n  display: flex;\r\n  max-width: 100%;\r\n}\r\n#card {\r\n  box-shadow: 0 0 5px var(--shadow-color);\r\n  max-width: 90vw;\r\n  padding: 10px;\r\n  margin: 3px;\r\n  width: 350px;\r\n  border-radius: 5px;\r\n  background-color: var(--background-i2);\r\n  box-sizing: border-box;\r\n  height: fit-content;\r\n}\r\n#name {\r\n  font-size: 23px;\r\n  padding-inline: 10px;\r\n}\r\n\r\n#flexBox {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n#item {\r\n  flex: 1;\r\n  text-align: right;\r\n}\r\n#des {\r\n  margin-top: 3px;\r\n  padding-inline: 10px;\r\n  color: gray;\r\n}\r\nlabel {\r\n  user-select: none;\r\n}\r\n</style>\r\n","import notifyReqError from \"@/stores/notifyReqError\";\r\n\r\nexport default async function fetchServicePreview(serviceId) {\r\n  try {\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(\r\n      `${baseURL}/api/services/get_service_preview/${serviceId}`,\r\n      {\r\n        method: \"GET\",\r\n        credentials: \"include\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    );\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      // return result if successufl\r\n      const raw = json.preview;\r\n\r\n      // extract resources\r\n      const [\r\n        ,\r\n        name,\r\n        description,\r\n        ,\r\n        cate_id,\r\n        cate_name,\r\n        length,\r\n        price,\r\n        client_can_book,\r\n      ] = raw;\r\n      const preview = {\r\n        name,\r\n        description,\r\n        cate_id,\r\n        cate_name,\r\n        length,\r\n        price,\r\n        client_can_book,\r\n      };\r\n\r\n      // return formatted result\r\n      return preview;\r\n    } else {\r\n      notifyReqError(json.message);\r\n      console.log(\"Failed to fetch service preview, message: \", json.message);\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n","import getTodayUnixTime from \"@/lib/getTodayUnixTime\";\r\nimport notifyReqError from \"@/stores/notifyReqError\";\r\n\r\nexport default async function fetchServiceEmployees(\r\n  serviceId,\r\n  date = getTodayUnixTime()\r\n) {\r\n  try {\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(\r\n      `${baseURL}/api/services/get_service_employees/${serviceId}/${date}`,\r\n      {\r\n        method: \"GET\",\r\n        credentials: \"include\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    );\r\n\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      // refactor data and return result\r\n      const raw = json.employees;\r\n      const employees = [];\r\n      raw.forEach((e) => {\r\n        // unpack properties and create new employee\r\n        const [employee_id, alias, last_date, service_id] = e;\r\n        if (service_id) {\r\n          const employee = { employee_id, alias, service_id, last_date };\r\n          employees.push(employee);\r\n        }\r\n      });\r\n\r\n      // return result\r\n      return employees;\r\n    } else {\r\n      notifyReqError(json.message);\r\n      console.log(\r\n        \"Failed to fetch service's employees, message: \",\r\n        json.message\r\n      );\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n","import { render } from \"./Service.vue?vue&type=template&id=2c133d12&scoped=true\"\nimport script from \"./Service.vue?vue&type=script&lang=js\"\nexport * from \"./Service.vue?vue&type=script&lang=js\"\n\nimport \"./Service.vue?vue&type=style&index=0&id=2c133d12&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2c133d12\"]])\n\nexport default __exports__","import { render } from \"./Services.vue?vue&type=template&id=12274b94&scoped=true\"\nimport script from \"./Services.vue?vue&type=script&lang=js\"\nexport * from \"./Services.vue?vue&type=script&lang=js\"\n\nimport \"./Services.vue?vue&type=style&index=0&id=12274b94&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-12274b94\"]])\n\nexport default __exports__","<template>\r\n  <div id=\"note\">Step 3: Select date and time</div>\r\n  <div class=\"flexBox\">\r\n    <div class=\"top\">\r\n      <button class=\"dayBtn\" @click=\"onMoveDate(-1)\">\r\n        <FontAwesomeIcon :icon=\"faMinus\" />\r\n      </button>\r\n      <div>\r\n        <input\r\n          id=\"date\"\r\n          type=\"date\"\r\n          ref=\"dateInput\"\r\n          :value=\"date\"\r\n          @change=\"onInputDate($event.target.value)\"\r\n        />\r\n      </div>\r\n      <button class=\"dayBtn\" @click=\"onMoveDate(1)\">\r\n        <FontAwesomeIcon :icon=\"faPlus\" />\r\n      </button>\r\n    </div>\r\n    <div v-if=\"unixDate\">\r\n      {{ unixToReadable(unixDate) }}\r\n    </div>\r\n    <div v-if=\"unixDate\">\r\n      {{ unixTimeToReminder(unixDate) }}\r\n    </div>\r\n  </div>\r\n  <div id=\"openingBox\">\r\n    <div v-if=\"!date\">Input a date to continue</div>\r\n    <div v-if=\"fetched && !sortedOpenings.length\">\r\n      No open slots on this date\r\n    </div>\r\n    <div v-for=\"(opening, index) in sortedOpenings\" :key=\"index\">\r\n      <button class=\"openings\" @click=\"onChooseOpening(opening)\">\r\n        <div>{{ formatTime(opening.start) }}</div>\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <div id=\"msg\" v-if=\"msg\">{{ msg }}</div>\r\n  <div id=\"duo\">\r\n    <button class=\"orangeBtn\" id=\"leftBtn\" @click=\"onBack\">\r\n      <FontAwesomeIcon :icon=\"backIcon\" /> Back\r\n    </button>\r\n    <button class=\"blueBtn\" id=\"rightBtn\" @click=\"onContinue\">\r\n      Continue <FontAwesomeIcon :icon=\"continueIcon\" />\r\n    </button>\r\n  </div>\r\n</template>\r\n<script>\r\n// icons\r\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\r\nimport {\r\n  faLeftLong,\r\n  faRightLong,\r\n  faPlus,\r\n  faMinus,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\n// lib\r\nimport getTodayUnixTime from \"@/lib/getTodayUnixTime\";\r\nimport secondsToClock from \"../../apis/secondsToClock\";\r\nimport parseDate from \"@/lib/parseDate\";\r\nimport unixTimeToReminder from \"@/lib/unixTimeToReminder\";\r\nimport unixToReadable from \"@/lib/unixToReadable\";\r\n// apis\r\nimport fetchAvailability from \"../../apis/fetchAvailability\";\r\n\r\nexport default {\r\n  props: {\r\n    isReady: Boolean,\r\n    services: Object,\r\n    onSelectChain: Function,\r\n    onReturn: Function,\r\n  },\r\n\r\n  components: {\r\n    FontAwesomeIcon,\r\n  },\r\n  data() {\r\n    return {\r\n      // icons\r\n      backIcon: faLeftLong,\r\n      continueIcon: faRightLong,\r\n      faPlus,\r\n      faMinus,\r\n      // status\r\n      fetched: false,\r\n      // resources\r\n      msg: \"\",\r\n      chains: [],\r\n      openings: {},\r\n      sortedOpenings: [],\r\n      date: null,\r\n      // outcome\r\n      chain: null,\r\n      unixDate: null,\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    onBack() {\r\n      this.onReturn();\r\n    },\r\n    onContinue() {\r\n      if (!this.unixDate) {\r\n        this.msg = \"You haven't chosen a date\";\r\n        return;\r\n      }\r\n      if (!this.chain) {\r\n        this.msg = \"You haven't chosen a time slot for your appointment\";\r\n        return;\r\n      }\r\n      this.onSelectChain(this.chain, this.unixDate);\r\n    },\r\n    formatTime(seconds) {\r\n      return secondsToClock(seconds);\r\n    },\r\n    onChooseOpening(opening) {\r\n      // reset state\r\n      this.msg = \"\";\r\n      this.chain = null;\r\n      // choose a random chain\r\n      const max = opening.chains.length;\r\n      const random = Math.floor(Math.random() * max);\r\n      this.chain = opening.chains[random];\r\n      this.onContinue();\r\n    },\r\n    isInThePast(value) {\r\n      const today = getTodayUnixTime();\r\n      const validated = parseDate(value);\r\n      const res = validated <= today - 24 * 60 * 60;\r\n      return res;\r\n    },\r\n    resetData() {\r\n      this.msg = \"\";\r\n      this.chains = [];\r\n      this.openings = {};\r\n      this.sortedOpenings = [];\r\n      this.date = null;\r\n      this.chain = null;\r\n      this.unixDate = null;\r\n    },\r\n    async onInputDate(value) {\r\n      // update status\r\n      this.fetched = false;\r\n\r\n      // reset data\r\n      this.resetData();\r\n      // if user select day in the past do nothing\r\n      if (this.isInThePast(value)) {\r\n        return;\r\n      }\r\n\r\n      this.date = value;\r\n      this.unixDate = parseDate(value);\r\n      console.log(\"unix date: \", this.unixDate);\r\n      await this.fetchData();\r\n    },\r\n    async onMoveDate(direction) {\r\n      let current;\r\n      if (this.date) {\r\n        current = new Date(this.date);\r\n      } else {\r\n        const now = new Date();\r\n        const offset = now.getTimezoneOffset();\r\n        current = new Date(now.getTime() - offset * 60 * 1000);\r\n      }\r\n      current.setDate(current.getDate() + direction);\r\n      const newDate = current.toISOString().slice(0, 10);\r\n      await this.onInputDate(newDate);\r\n    },\r\n    async fetchData() {\r\n      if (!this.services) return;\r\n\r\n      const res = await fetchAvailability(this.unixDate, this.services);\r\n\r\n      // if no result -> error occured -> do nothing\r\n      if (!res) return;\r\n\r\n      // append object 'openings'\r\n      this.chains = res;\r\n      for (let chain of this.chains) {\r\n        const start = chain.chainStart;\r\n        const end = chain.chainEnd;\r\n        const minEnd = chain.minEnd;\r\n\r\n        // group chains to groups called 'openings'\r\n        if (!this.openings[start] || this.openings[start].end > end) {\r\n          const opening = {\r\n            start: start,\r\n            end: end,\r\n            minEnd: minEnd,\r\n            chains: [],\r\n          };\r\n          this.openings[start] = opening;\r\n        }\r\n\r\n        if (this.openings[start].end === end) {\r\n          this.openings[start].chains.push(chain);\r\n        }\r\n      }\r\n\r\n      // convert to array\r\n      const newOpenings = Object.values(this.openings);\r\n      this.sortedOpenings = newOpenings.sort((a, b) => a.start - b.start);\r\n\r\n      // update status\r\n      this.fetched = true;\r\n    },\r\n    unixTimeToReminder,\r\n    unixToReadable,\r\n  },\r\n  watch: {\r\n    isReady(newVal) {\r\n      if (newVal && !this.date) this.onMoveDate(1);\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n#duo {\r\n  display: flex;\r\n  gap: 5px;\r\n  width: 90%;\r\n  justify-content: flex-end;\r\n}\r\n\r\n#rightBtn {\r\n  padding-inline: 15px;\r\n  font-size: 20px;\r\n  border-top-right-radius: 30px;\r\n  border-bottom-right-radius: 30px;\r\n}\r\n\r\n#leftBtn {\r\n  font-size: 20px;\r\n  border-top-left-radius: 30px;\r\n  border-bottom-left-radius: 30px;\r\n}\r\n.flexBox {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  font-size: 20px;\r\n}\r\ninput[type=\"date\"] {\r\n  font-size: 16px;\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n}\r\n#note {\r\n  padding: 10px;\r\n  padding-top: 0px;\r\n  color: rgb(184, 121, 3);\r\n  text-align: center;\r\n}\r\n.top {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 5px;\r\n}\r\n.dayBtn {\r\n  font-size: 30px;\r\n  height: fit-content;\r\n  border-radius: 50%;\r\n}\r\n.openings {\r\n  padding: 5px;\r\n  padding-inline: 10px;\r\n  font-size: 18px;\r\n}\r\n#openingBox {\r\n  display: flex;\r\n  gap: 10px;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n  padding: 20px 0px;\r\n  margin: 10px 0px;\r\n\r\n  background: var(--background-i2);\r\n}\r\n#msg {\r\n  text-align: center;\r\n  color: red;\r\n}\r\n</style>","export default function secondsToClock(seconds) {\r\n  if (isNaN(seconds) || seconds < 0) return;\r\n\r\n  const hours = Math.floor(seconds / 3600) % 24;\r\n  const minutes = Math.floor((seconds % 3600) / 60);\r\n\r\n  const period = hours >= 12 ? \"PM\" : \"AM\";\r\n  const formattedHours = hours % 12 === 0 ? 12 : hours % 12;\r\n\r\n  return `${String(formattedHours)}:${String(minutes).padStart(\r\n    2,\r\n    \"0\"\r\n  )} ${period}`;\r\n}\r\n","import notifyReqError from \"@/stores/notifyReqError\";\r\n\r\nexport default async function fetchAvailability(date, services) {\r\n  try {\r\n    console.log(\"services\", services);\r\n\r\n    // parse input to payload\r\n    const DELAs_requests = Object.values(services).map(\r\n      ({ empIds, serviceId, AOSOs }) => ({\r\n        employee_ids: empIds,\r\n        service_id: serviceId,\r\n        selected_AOSO: AOSOs,\r\n        date: date,\r\n      })\r\n    );\r\n\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(\r\n      `${baseURL}/api/appointments/get_availability_list`,\r\n      {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          DELAs_requests: DELAs_requests,\r\n        }),\r\n      }\r\n    );\r\n\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      console.log(\"json.DELAs_list: \", json.DELAs_list);\r\n\r\n      const serviceSlots = getServiceSlots(json.DELAs_list);\r\n      console.log(\"serviceSlots: \", serviceSlots);\r\n\r\n      const chains = getChains(serviceSlots, services);\r\n\r\n      const validChains = removeShortChains(chains, DELAs_requests.length);\r\n      console.log(\"chains: \", validChains);\r\n      return validChains;\r\n    } else {\r\n      notifyReqError(json.message);\r\n      console.log(\"Failed to fetch availabilities, message: \", json.message);\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n\r\nfunction getServiceSlots(DELAs_list) {\r\n  console.log(\"DELAs_list: \", DELAs_list);\r\n  // parent container\r\n  let serviceSlots = [];\r\n\r\n  DELAs_list.forEach((DELAs) => {\r\n    // containers\r\n    const grouped = { serviceId: null, slots: [] };\r\n    const slotsMap = new Map();\r\n\r\n    // unpack\r\n    const { service_id, values } = DELAs;\r\n    grouped.serviceId = service_id;\r\n\r\n    // iterate every employee\r\n    values.forEach((DELA) => {\r\n      // unpack\r\n      const { employee_id, length, slots } = DELA;\r\n\r\n      // iterate slots\r\n      slots.forEach((slot) => {\r\n        const start = slot;\r\n\r\n        const end = start + length;\r\n\r\n        // generate key if need\r\n        if (!slotsMap.has(start)) {\r\n          slotsMap.set(start, new Map()); // Initialize a new Map if start doesn't exist\r\n        }\r\n        if (!slotsMap.get(start).has(end)) {\r\n          const slot = {\r\n            start,\r\n            end,\r\n            empIds: [],\r\n          };\r\n          slotsMap.get(start).set(end, slot);\r\n        }\r\n\r\n        // append empId\r\n        slotsMap.get(start).get(end).empIds.push(employee_id);\r\n      });\r\n    });\r\n\r\n    // load from Map to slot array\r\n    slotsMap.forEach((childMap) => {\r\n      childMap.forEach((slot) => {\r\n        grouped.slots.push(slot);\r\n      });\r\n    });\r\n\r\n    // append\r\n    serviceSlots.push(grouped);\r\n  });\r\n\r\n  // return res\r\n  return serviceSlots;\r\n}\r\n\r\nfunction getChains(serviceSlots, services) {\r\n  // container\r\n  let chains = [];\r\n\r\n  if (serviceSlots.length > 1) {\r\n    // iterate every service\r\n    serviceSlots.forEach((e, index) => {\r\n      // unpack\r\n      const { serviceId, slots } = e;\r\n\r\n      // add serviceId and AOSOs to them\r\n      slots.forEach((slot) => {\r\n        slot.serviceId = serviceId;\r\n        slot.AOSOs = services[serviceId].AOSOs;\r\n        slot.serviceName = services[serviceId].serviceName;\r\n        slot.empAliases = services[serviceId].empAliases;\r\n      });\r\n\r\n      // create sub array excluding current element\r\n      const others = [\r\n        ...serviceSlots.slice(0, index),\r\n        ...serviceSlots.slice(index + 1),\r\n      ];\r\n\r\n      // fetch chains from recursion\r\n      let childChains = getChains(others, services);\r\n\r\n      // append the child with current slots\r\n      childChains = chainsAppend(childChains, slots);\r\n      // merge main slots with child slots\r\n      chains = chains.concat(childChains);\r\n    });\r\n\r\n    return chains;\r\n  }\r\n\r\n  const last = serviceSlots[0];\r\n  const { serviceId, slots } = last;\r\n\r\n  slots.forEach((e) => {\r\n    e.serviceId = serviceId;\r\n    e.AOSOs = services[serviceId].AOSOs;\r\n    e.serviceName = services[serviceId].serviceName;\r\n    e.empAliases = services[serviceId].empAliases;\r\n\r\n    // create new chain\r\n    let chain = {\r\n      chainStart: e.start,\r\n      chainEnd: e.end,\r\n      minEnd: e.end,\r\n      slots: [e],\r\n    };\r\n    chains.push(chain);\r\n  });\r\n\r\n  return chains;\r\n}\r\n\r\nfunction chainsAppend(chains, slots) {\r\n  for (const chain of chains) {\r\n    for (const slot of slots) {\r\n      const min = chain.chainEnd;\r\n      // const max = chain.chainEnd + 15 * 60;\r\n      if (slot.start === min) {\r\n        chain.slots.push(slot);\r\n        chain.chainEnd = slot.end;\r\n        chain.minEnd += slot.end - slot.start;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return chains;\r\n}\r\n\r\nfunction removeShortChains(chains, slotCount) {\r\n  // container\r\n  let newChains = [];\r\n\r\n  chains.forEach((chain) => {\r\n    if (chain.slots.length === slotCount) {\r\n      newChains.push(chain);\r\n    }\r\n  });\r\n\r\n  return newChains;\r\n}\r\n","import { render } from \"./SelectTime.vue?vue&type=template&id=84d4d646&scoped=true\"\nimport script from \"./SelectTime.vue?vue&type=script&lang=js\"\nexport * from \"./SelectTime.vue?vue&type=script&lang=js\"\n\nimport \"./SelectTime.vue?vue&type=style&index=0&id=84d4d646&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-84d4d646\"]])\n\nexport default __exports__","import { parsePhoneNumberFromString } from \"libphonenumber-js\";\r\n\r\nexport default async function requestOTP(phoneNum) {\r\n  try {\r\n    try {\r\n      // parse phone number to E.164\r\n      phoneNum = parsePhoneNumberFromString(phoneNum, \"CA\").number; // E.164 format\r\n    } catch (e) {\r\n      return { message: \"Invalid phone number\" };\r\n    }\r\n\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(`${baseURL}/api/authentication/request_otp`, {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        phone_num: phoneNum,\r\n      }),\r\n    });\r\n\r\n    // fetch json return message\r\n    const json = await res.json();\r\n    const codeId = json.code_id;\r\n    const message = json.message;\r\n    const waitTime = json.wait_time;\r\n\r\n    // return results\r\n    return { codeId, message, waitTime };\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n    return { message: \"Unexpected Error\" };\r\n  }\r\n}\r\n","<template>\r\n  <div id=\"title\">Please leave your phone number to confirm appointment</div>\r\n  <form @submit.prevent=\"onSubmit\">\r\n    <div>\r\n      <input\r\n        type=\"tel\"\r\n        v-model=\"phoneNum\"\r\n        placeholder=\"Phone Number\"\r\n        required\r\n      />\r\n    </div>\r\n    <div>\r\n      <input type=\"text\" v-model=\"name\" placeholder=\"Name\" required />\r\n    </div>\r\n    <div id=\"msg\">{{ msg }}</div>\r\n    <button class=\"blueBtn\">Send Verification Code</button>\r\n  </form>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\n// apis\r\nimport requestOTP from \"../../../apis/requestOTP\";\r\n\r\n// PROPS\r\nconst props = defineProps({\r\n  onNext: Function,\r\n});\r\n\r\n// PAYLOAD\r\nconst phoneNum = ref(\"\");\r\nconst name = ref(\"\");\r\n\r\n// OUTPUT\r\nconst msg = ref(\"\");\r\n\r\n// APIS\r\nasync function onSubmit() {\r\n  const { codeId, message, waitTime } = await requestOTP(phoneNum.value);\r\n\r\n  //   if fail\r\n  if (!codeId) {\r\n    msg.value = message;\r\n    return;\r\n  }\r\n\r\n  // if succesful\r\n  props.onNext(codeId, phoneNum.value, name.value, waitTime);\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n#title {\r\n  margin: 20px 0px;\r\n  font-size: 20px;\r\n}\r\nbutton {\r\n  padding: 8px 20px;\r\n  border-radius: 20px;\r\n}\r\ninput {\r\n  padding: 6px 10px;\r\n  width: 250px;\r\n}\r\nform {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  flex-direction: column;\r\n  padding: 10px;\r\n}\r\n\r\n#msg {\r\n  color: red;\r\n  font-size: 15px;\r\n}\r\n</style>","import script from \"./PhoneNumInput.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PhoneNumInput.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PhoneNumInput.vue?vue&type=style&index=0&id=a752789e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a752789e\"]])\n\nexport default __exports__","export default async function guestAddAppo(otpId, otp, chain, date, name) {\r\n  try {\r\n    // count of presentation of every employee in the chain\r\n    const newSlots = chainToNewSlots(chain);\r\n    console.log(\"new slots:\", newSlots);\r\n    console.log(\"date\", date);\r\n\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(`${baseURL}/api/appointments/guest_add_appo`, {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        otp_id: otpId,\r\n        otp,\r\n        slots: newSlots,\r\n        date,\r\n        name,\r\n      }),\r\n    });\r\n\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (!res.ok) {\r\n      console.log(\r\n        \"Failed to add appointments as guest, message: \",\r\n        json.message\r\n      );\r\n    }\r\n    return {\r\n      ok: res.ok,\r\n      message: json.message,\r\n      customer: { name: json.client_name, phoneNum: json.phone_num },\r\n    };\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n\r\nfunction chainToNewSlots(chain) {\r\n  // count of presentation of every employee in the chain\r\n  const empCount = {};\r\n\r\n  // start counting\r\n  const { slots } = chain;\r\n  for (const slot of slots) {\r\n    const { empIds } = slot;\r\n    for (const empId of empIds) {\r\n      if (!empCount[empId]) {\r\n        empCount[empId] = 0;\r\n      }\r\n      empCount[empId]++;\r\n    }\r\n  }\r\n\r\n  // create new array of slots\r\n  const newSlots = [];\r\n  for (const slot of slots) {\r\n    const { start, end, empIds, serviceId, AOSOs, message } = slot;\r\n\r\n    empIds.sort((a, b) => -(empCount[a] - empCount[b]));\r\n\r\n    // filter employee ids that have most count\r\n    const topEmpId = empIds[0];\r\n    const max = empCount[topEmpId];\r\n\r\n    console.log(\"empIds: \", JSON.stringify(empIds));\r\n    let topEmpIds = empIds; // by default take all values\r\n    for (let i = 0; i < empIds.length; i++) {\r\n      const id = empIds[i];\r\n\r\n      if (empCount[id] < max) {\r\n        const j = i - 1;\r\n        topEmpIds = empIds.slice(0, j);\r\n        break;\r\n      }\r\n    }\r\n    console.log(\"topEmpIds: \", topEmpIds);\r\n\r\n    // get a random emp from the filtered\r\n    const random = Math.floor(Math.random() * topEmpIds.length);\r\n\r\n    // create new slot\r\n    const newSlot = {\r\n      start,\r\n      end,\r\n      empId: topEmpIds[random],\r\n      serviceId,\r\n      AOSOs,\r\n      empIds,\r\n      message,\r\n    };\r\n\r\n    newSlots.push(newSlot);\r\n  }\r\n\r\n  return newSlots;\r\n}\r\n","<template>\r\n  <div id=\"title\">\r\n    Please enter the one time code sent to {{ phoneNum }} by text\r\n  </div>\r\n  <form @submit.prevent=\"onSubmit\">\r\n    <div>\r\n      <input type=\"text\" v-model=\"code\" placeholder=\"Verification Code\" />\r\n    </div>\r\n    <div id=\"msg\">{{ msg }}</div>\r\n    <button class=\"greenBtn\">Verify</button>\r\n    <a v-if=\"wait > 0\" class=\"disabled\"> Resend Code (Wait {{ wait }}s)</a>\r\n    <a v-else @click=\"onResend\"> Resend Code </a>\r\n  </form>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, onUnmounted, ref } from \"vue\";\r\n// apis\r\nimport guestAddAppo from \"../../../apis/guestAddAppo\";\r\nimport requestOTP from \"../../../apis/requestOTP\";\r\n\r\n// PARAMS\r\nconst props = defineProps({\r\n  codeId: Number,\r\n  phoneNum: String,\r\n  chain: Object,\r\n  date: Number,\r\n  name: String,\r\n  onSubmit: Function,\r\n  waitTime: Number,\r\n});\r\n\r\n// RESOURCES\r\nconst wait = ref(props.waitTime);\r\n\r\n// PAYLOAD\r\nconst codeId = ref(props.codeId);\r\nconst code = ref(\"\");\r\nconst msg = ref(\"\");\r\n\r\n// APIS\r\nasync function onSubmit() {\r\n  const { ok, message, customer } = await guestAddAppo(\r\n    codeId.value,\r\n    code.value,\r\n    props.chain,\r\n    props.date,\r\n    props.name\r\n  );\r\n\r\n  //   if fail\r\n  if (!ok) {\r\n    msg.value = message;\r\n    code.value = \"\";\r\n    return;\r\n  }\r\n\r\n  // if succesful\r\n  props.onSubmit(customer.name, customer.phoneNum);\r\n}\r\n\r\nasync function onResend() {\r\n  const {\r\n    codeId: _codeId,\r\n    message,\r\n    waitTime,\r\n  } = await requestOTP(props.phoneNum);\r\n\r\n  //   if fail\r\n  if (!_codeId) {\r\n    msg.value = message;\r\n    return;\r\n  }\r\n\r\n  codeId.value = _codeId;\r\n  wait.value = waitTime;\r\n}\r\n\r\n// LIFECYCLE\r\nlet interval;\r\n\r\nonMounted(() => {\r\n  interval = setInterval(() => {\r\n    wait.value--;\r\n  }, 1000); // count down every 1 second\r\n});\r\n\r\nonUnmounted(() => {\r\n  clearInterval(interval);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n#title {\r\n  margin: 20px 0px;\r\n  font-size: 17px;\r\n}\r\nbutton {\r\n  padding: 8px 50px;\r\n  border-radius: 20px;\r\n  margin-bottom: 50px;\r\n}\r\ninput[type=\"text\"] {\r\n  padding: 6px 10px;\r\n  width: 250px;\r\n}\r\nform {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  flex-direction: column;\r\n  padding: 10px;\r\n}\r\n\r\n#msg {\r\n  color: red;\r\n  font-size: 15px;\r\n}\r\na {\r\n  font-size: 15px;\r\n  text-decoration: none;\r\n  color: rgb(0, 153, 255);\r\n  cursor: pointer;\r\n}\r\n\r\na:hover,\r\na:active {\r\n  text-decoration: underline;\r\n}\r\n\r\n.disabled {\r\n  color: gray;\r\n  pointer-events: none;\r\n}\r\n</style>","import script from \"./OTPverify.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./OTPverify.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./OTPverify.vue?vue&type=style&index=0&id=5ab81cbb&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5ab81cbb\"]])\n\nexport default __exports__","<template>\r\n  <div id=\"parent\">\r\n    <div id=\"background\" />\r\n\r\n    <div id=\"window\">\r\n      <button @click=\"props.onClose()\" id=\"closeBtn\" class=\"redBtn\">\r\n        <FontAwesomeIcon :icon=\"faXmark\" />\r\n      </button>\r\n      <div id=\"content\">\r\n        <div v-if=\"page === 1\"><PhoneNumInput :onNext=\"onRequestCode\" /></div>\r\n        <div v-if=\"page === 2\">\r\n          <OTPverify\r\n            :codeId=\"codeId\"\r\n            :phoneNum=\"phoneNum\"\r\n            :chain=\"props.chain\"\r\n            :date=\"props.date\"\r\n            :name=\"name\"\r\n            :onSubmit=\"onSubmit\"\r\n            :waitTime=\"waitTime\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\n// icons\r\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\r\nimport { faXmark } from \"@fortawesome/free-solid-svg-icons\";\r\n// comps\r\nimport PhoneNumInput from \"./PhoneNumInput.vue\";\r\nimport OTPverify from \"./OTPverify.vue\";\r\n\r\n// PARAMS\r\nconst props = defineProps({\r\n  chain: Object,\r\n  date: Number,\r\n  onClose: Function,\r\n  onSubmit: Function,\r\n});\r\n// RESOURCES\r\nconst page = ref(1);\r\nconst waitTime = ref(0);\r\n// PAYLOAD\r\nconst codeId = ref();\r\nconst phoneNum = ref(\"\");\r\nconst name = ref(\"\");\r\n\r\n// HANDLERS\r\nfunction onRequestCode(_codeId, _phoneNum, _name, _waitTime) {\r\n  codeId.value = _codeId;\r\n  phoneNum.value = _phoneNum;\r\n  waitTime.value = _waitTime;\r\n  name.value = _name;\r\n  // to next page\r\n  page.value++;\r\n}\r\n</script>\r\n\r\n<script>\r\nexport default {};\r\n</script>\r\n\r\n<style scoped>\r\n#parent {\r\n  z-index: 15;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n#background {\r\n  position: fixed;\r\n  height: 100%;\r\n  width: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n}\r\n#window {\r\n  position: relative;\r\n  z-index: 20;\r\n  width: 350px;\r\n  min-height: 100px;\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  background-color: var(--background-i2);\r\n  overflow-y: auto;\r\n}\r\n#content {\r\n  padding: 10px 20px;\r\n  text-align: center;\r\n}\r\n#closeBtn {\r\n  font-size: 20px;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  aspect-ratio: 1;\r\n  height: 30px;\r\n  padding: 0;\r\n  border-radius: 0;\r\n  border: none;\r\n}\r\n</style>","import script from \"./GuestBooking.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./GuestBooking.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./GuestBooking.vue?vue&type=style&index=0&id=99c05362&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-99c05362\"]])\n\nexport default __exports__","import notifyReqError from \"@/stores/notifyReqError\";\r\n\r\nexport default async function clientAddAppo(chain, date) {\r\n  try {\r\n    // count of presentation of every employee in the chain\r\n    const newSlots = chainToNewSlots(chain);\r\n    console.log(\"new slots:\", newSlots);\r\n    console.log(\"date\", date);\r\n\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(`${baseURL}/api/appointments/client_add_appo`, {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        slots: newSlots,\r\n        date: date,\r\n      }),\r\n    });\r\n\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      const customer = { name: json.client_name, phoneNum: json.phone_num };\r\n      console.log(\"customer\", customer);\r\n      return { customer };\r\n    } else {\r\n      notifyReqError(json.message);\r\n      console.log(\r\n        \"Failed to add appointments as client, message: \",\r\n        json.message\r\n      );\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n\r\nfunction chainToNewSlots(chain) {\r\n  // count of presentation of every employee in the chain\r\n  const empCount = {};\r\n\r\n  // start counting\r\n  const { slots } = chain;\r\n  for (const slot of slots) {\r\n    const { empIds } = slot;\r\n    for (const empId of empIds) {\r\n      if (!empCount[empId]) {\r\n        empCount[empId] = 0;\r\n      }\r\n      empCount[empId]++;\r\n    }\r\n  }\r\n\r\n  // create new array of slots\r\n  const newSlots = [];\r\n  for (const slot of slots) {\r\n    const { start, end, empIds, serviceId, AOSOs, message } = slot;\r\n\r\n    empIds.sort((a, b) => -(empCount[a] - empCount[b]));\r\n\r\n    // filter employee ids that have most count\r\n    const topEmpId = empIds[0];\r\n    const max = empCount[topEmpId];\r\n\r\n    console.log(\"empIds: \", JSON.stringify(empIds));\r\n    let topEmpIds = empIds; // by default take all values\r\n    for (let i = 0; i < empIds.length; i++) {\r\n      const id = empIds[i];\r\n\r\n      if (empCount[id] < max) {\r\n        topEmpIds = empIds.slice(0, i);\r\n        break;\r\n      }\r\n    }\r\n    console.log(\"topEmpIds: \", topEmpIds);\r\n\r\n    // get a random emp from the filtered\r\n    const random = Math.floor(Math.random() * topEmpIds.length);\r\n\r\n    // create new slot\r\n    const newSlot = {\r\n      start,\r\n      end,\r\n      empId: topEmpIds[random],\r\n      serviceId,\r\n      AOSOs,\r\n      empIds,\r\n      message,\r\n    };\r\n\r\n    newSlots.push(newSlot);\r\n  }\r\n\r\n  return newSlots;\r\n}\r\n","<template>\r\n  <div id=\"flexBox\">\r\n    <div id=\"note\">Step 4: Review your selections</div>\r\n    <div id=\"date\">\r\n      {{ unixToReadable(date) }} ({{ unixTimeToReminder(date) }})\r\n    </div>\r\n    <div class=\"slot\" v-for=\"(slot, index) in chain.slots\" :key=\"index\">\r\n      <div class=\"service\">{{ slot.serviceName }}</div>\r\n      <div>\r\n        <FontAwesomeIcon :icon=\"faClock\" />\r\n        {{ secsToHours(slot.start) }} to {{ secsToHours(slot.end) }}\r\n      </div>\r\n      <div>\r\n        <FontAwesomeIcon :icon=\"faUser\" />\r\n        {{ slot.empAliases.join(\" / \") }}\r\n      </div>\r\n      <div>\r\n        <textarea\r\n          :ref=\"'textareas'\"\r\n          rows=\"3\"\r\n          placeholder=\"(Optional) Message to technician...\"\r\n          :value=\"slot.message\"\r\n          @input=\"onTypeMessage(index, $event)\"\r\n        ></textarea>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div id=\"duo\">\r\n    <button class=\"orangeBtn\" id=\"leftBtn\" @click=\"onReturn\">\r\n      <FontAwesomeIcon :icon=\"backIcon\" /> Back\r\n    </button>\r\n    <button class=\"greenBtn\" id=\"rightBtn\" @click=\"onSubmit\">\r\n      Submit <FontAwesomeIcon :icon=\"continueIcon\" />\r\n    </button>\r\n  </div>\r\n  <GuestBooking\r\n    :chain=\"props.chain\"\r\n    :date=\"props.date\"\r\n    :onSubmit=\"props.onSubmit\"\r\n    :onClose=\"() => (isGuestBooking = false)\"\r\n    v-if=\"isGuestBooking\"\r\n  />\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, ref } from \"vue\";\r\n// icons\r\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\r\nimport {\r\n  faLeftLong,\r\n  faCheck,\r\n  faClock,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { faUser } from \"@fortawesome/free-regular-svg-icons\";\r\n\r\n// lib\r\nimport unixToReadable from \"@/lib/unixToReadable\";\r\nimport unixTimeToReminder from \"@/lib/unixTimeToReminder\";\r\nimport secsToHours from \"@/lib/secsToHours\";\r\n// comps\r\nimport GuestBooking from \"./guest_booking/GuestBooking.vue\";\r\n// apis\r\nimport clientAddAppo from \"../../apis/clientAddAppo\";\r\n// pinia\r\nimport { useMyProfile } from \"@/stores/myProfile\";\r\n\r\n// props\r\nconst props = defineProps({\r\n  chain: Object,\r\n  date: Number,\r\n  onInputMessage: Function,\r\n  onSubmit: Function,\r\n  onReturn: Function,\r\n});\r\n\r\n// icons\r\nconst backIcon = faLeftLong;\r\nconst continueIcon = faCheck;\r\n\r\n// RESOURCES\r\nconst textareas = ref([]);\r\nconst MPstore = useMyProfile();\r\nconst token = computed(() => MPstore.token);\r\n\r\n// STATUS\r\nconst isGuestBooking = ref(false);\r\n\r\n// HANDLERS\r\nfunction onTypeMessage(index, event) {\r\n  const value = event.target.value;\r\n  if (!value.length) return;\r\n  props.onInputMessage(index, value);\r\n  autoResize(index);\r\n}\r\n\r\nasync function onSubmit() {\r\n  if (!token.value) {\r\n    isGuestBooking.value = true;\r\n    return;\r\n  }\r\n  const res = await clientAddAppo(props.chain, props.date);\r\n  if (res) props.onSubmit(res.customer.name, res.customer.phoneNum);\r\n}\r\n\r\nfunction autoResize(index) {\r\n  const textarea = textareas.value?.[index];\r\n  if (textarea) {\r\n    textarea.style.height = \"auto\";\r\n    textarea.style.height = textarea.scrollHeight + 2 + \"px\";\r\n  }\r\n}\r\n</script>\r\n\r\n<script>\r\nexport default { name: \"FinalPreview\" };\r\n</script>\r\n\r\n<style scoped>\r\n#duo {\r\n  margin-top: 15px;\r\n  display: flex;\r\n  gap: 5px;\r\n  width: 90%;\r\n  justify-content: flex-end;\r\n}\r\n\r\n#rightBtn {\r\n  padding: 0px 20px;\r\n  font-size: 20px;\r\n}\r\n\r\n#leftBtn {\r\n  font-size: 20px;\r\n  border-top-left-radius: 30px;\r\n  border-bottom-left-radius: 30px;\r\n}\r\n#note {\r\n  padding: 10px;\r\n  padding-top: 0px;\r\n  color: rgb(184, 121, 3);\r\n}\r\n#flexBox {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: column;\r\n}\r\n#date {\r\n  font-size: 23px;\r\n  margin: 8px;\r\n}\r\n.slot {\r\n  box-shadow: 0 0 5px var(--shadow-color);\r\n  background-color: var(--background-i2);\r\n  padding: 10px;\r\n  margin: 3px;\r\n  width: 350px;\r\n  max-width: 90%;\r\n  border-radius: 5px;\r\n  font-size: 15px;\r\n}\r\n.service {\r\n  font-size: 20px;\r\n}\r\n.slot > div {\r\n  margin: 8px;\r\n}\r\ntextarea {\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n</style>","import script from \"./Parent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Parent.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Parent.vue?vue&type=style&index=0&id=01c09344&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-01c09344\"]])\n\nexport default __exports__","<template>\r\n  <div id=\"flexBox\">\r\n    <div id=\"title\">Appointment Confirmed  Thank You</div>\r\n    <div>Customer: {{ formatPhone(customer.phoneNum) }}</div>\r\n    <div id=\"date\">\r\n      {{ unixToReadable(date_) }} ({{ unixTimeToReminder(date_) }})\r\n    </div>\r\n    <div class=\"slot\" v-for=\"(slot, index) in chain_.slots\" :key=\"index\">\r\n      <div class=\"service\">{{ slot.serviceName }}</div>\r\n      <div>\r\n        <FontAwesomeIcon :icon=\"faClock\" />\r\n        {{ secsToHours(slot.start) }} to {{ secsToHours(slot.end) }}\r\n      </div>\r\n      <div>\r\n        <FontAwesomeIcon :icon=\"faUser\" />\r\n        {{ slot.empAliases.join(\" / \") }}\r\n      </div>\r\n      <div v-if=\"slot.message\">\r\n        <textarea\r\n          :ref=\"'textareas'\"\r\n          rows=\"3\"\r\n          :value=\"slot.message\"\r\n          @input=\"onTypeMessage(index, $event)\"\r\n          disabled\r\n        ></textarea>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      If you have any questions or need to reschedule, dont hesitate to contact\r\n      us!\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { onMounted, ref } from \"vue\";\r\n// icons\r\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\r\nimport { faClock } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { faUser } from \"@fortawesome/free-regular-svg-icons\";\r\n\r\n// lib\r\nimport unixToReadable from \"@/lib/unixToReadable\";\r\nimport unixTimeToReminder from \"@/lib/unixTimeToReminder\";\r\nimport secsToHours from \"@/lib/secsToHours\";\r\nimport formatPhone from \"@/lib/formatPhone\";\r\n\r\n// PARAMS\r\nconst props = defineProps({\r\n  chain: Object,\r\n  date: Number,\r\n  onClearForm: Function,\r\n  customer: Object,\r\n});\r\n\r\n// RESOURCES\r\nconst chain_ = ref({});\r\nconst date_ = ref(null);\r\n\r\n// LIFECYCLE\r\nonMounted(() => {\r\n  chain_.value = props.chain;\r\n  date_.value = props.date;\r\n  props.onClearForm();\r\n});\r\n</script>\r\n\r\n<script>\r\nexport default {};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n#flexBox {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n#date {\r\n  font-size: 20px;\r\n  margin: 8px;\r\n}\r\n.slot {\r\n  box-shadow: 0 0 5px var(--shadow-color);\r\n  background-color: var(--background-i2);\r\n  padding: 10px;\r\n  margin: 3px;\r\n  width: 350px;\r\n  max-width: 90%;\r\n  border-radius: 5px;\r\n  font-size: 15px;\r\n}\r\n.service {\r\n  font-size: 20px;\r\n}\r\n.slot > div {\r\n  margin: 8px;\r\n}\r\ntextarea {\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n#title {\r\n  font-size: 25px;\r\n  text-align: center;\r\n}\r\n</style>","import script from \"./BookingConfirmation.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BookingConfirmation.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./BookingConfirmation.vue?vue&type=style&index=0&id=07a617b6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-07a617b6\"]])\n\nexport default __exports__","<template>\r\n  <form @submit.prevent=\"onSubmit\">\r\n    <div>\r\n      <input\r\n        type=\"tel\"\r\n        v-model=\"phoneNum\"\r\n        required\r\n        placeholder=\"Phone Number\"\r\n      />\r\n    </div>\r\n    <div>\r\n      <input\r\n        type=\"password\"\r\n        v-model=\"password\"\r\n        required\r\n        placeholder=\"Password\"\r\n      />\r\n    </div>\r\n    <label>\r\n      <input id=\"check\" type=\"checkbox\" v-model=\"rememberMe\" />\r\n      Remember me next time\r\n    </label>\r\n\r\n    <div id=\"msg\">{{ msg }}</div>\r\n    <div>\r\n      <button class=\"blueBtn\">Log in</button>\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\n// apis\r\nimport logIn from \"./apis/logIn\";\r\n\r\n// PROPS\r\nconst props = defineProps({\r\n  closeModal: Function,\r\n});\r\n\r\n// RESOURCES\r\nconst msg = ref(\"\");\r\n\r\n// PAYLOAD\r\nconst phoneNum = ref(\"\");\r\nconst password = ref(\"\");\r\nconst rememberMe = ref(false);\r\n\r\n// APIS\r\nasync function onSubmit() {\r\n  const { message } = await logIn(\r\n    phoneNum.value,\r\n    password.value,\r\n    rememberMe.value\r\n  );\r\n  // if failed\r\n  if (message) {\r\n    msg.value = message;\r\n    return;\r\n  }\r\n\r\n  // if succeeded\r\n  props.closeModal();\r\n}\r\n</script>\r\n\r\n\r\n\r\n<script>\r\nexport default {};\r\n</script>\r\n\r\n<style scoped>\r\nform {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\ninput[type=\"password\"],\r\ninput[type=\"tel\"] {\r\n  padding: 6px 10px;\r\n  width: 250px;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  transform: scale(1.5);\r\n  margin-inline: 3px;\r\n}\r\n\r\nbutton {\r\n  font-size: 15px;\r\n  padding-inline: 50px;\r\n  border-radius: 20px;\r\n  margin-bottom: 20px;\r\n}\r\nlabel {\r\n  font-size: 15px;\r\n}\r\n#msg {\r\n  color: red;\r\n  font-size: 15px;\r\n}\r\n</style>\r\n","import script from \"./LogInForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LogInForm.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LogInForm.vue?vue&type=style&index=0&id=1264354e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1264354e\"]])\n\nexport default __exports__","<template>\r\n  <div id=\"parent\" v-if=\"isOpen && isLoggedOut\">\r\n    <div id=\"background\" />\r\n    <div id=\"window\">\r\n      <button @click.prevent=\"onClose\" id=\"closeBtn\" class=\"redBtn\">\r\n        <FontAwesomeIcon :icon=\"faXmark\" />\r\n      </button>\r\n\r\n      <div id=\"content\">\r\n        <div id=\"title\">Welcome to Online Booking!</div>\r\n        <LogInForm :closeModal=\"onClose\" />\r\n        <router-link to=\"/forgot_password\">Forgot Password</router-link>\r\n        <router-link to=\"/signup\">Create new Account</router-link>\r\n        <button id=\"book\" class=\"greenBtn\" @click=\"onClose\">\r\n          Book without logging in\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// icon\r\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\r\nimport { faXmark } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nimport { computed, ref } from \"vue\";\r\n// pinia\r\nimport { useMyProfile } from \"@/stores/myProfile\";\r\n// comps\r\nimport LogInForm from \"./LogInForm.vue\";\r\n\r\n// STATUS\r\nconst isOpen = ref(true);\r\nconst isLoggedOut = computed(() => {\r\n  const noToken = MPstore.token === null;\r\n  const isFetched = MPstore.isFetched;\r\n  return noToken && isFetched;\r\n});\r\n\r\n// RESOURCES\r\nconst MPstore = useMyProfile();\r\n\r\n// HANDLERS\r\nfunction onClose() {\r\n  isOpen.value = false;\r\n}\r\n</script>\r\n\r\n<script>\r\nexport default {};\r\n</script>\r\n\r\n<style scoped>\r\n#parent {\r\n  z-index: 15;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n#background {\r\n  position: fixed;\r\n  height: 100%;\r\n  width: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n}\r\n#window {\r\n  position: relative;\r\n  z-index: 20;\r\n  width: 350px;\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  background-color: var(--background-i2);\r\n  overflow-y: auto;\r\n}\r\n#content {\r\n  padding: 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-top: 15px;\r\n  gap: 10px;\r\n}\r\n#closeBtn {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  aspect-ratio: 1;\r\n  height: 30px;\r\n  padding: 0;\r\n  border-radius: 0;\r\n  font-size: 20px;\r\n}\r\n#title {\r\n  margin-bottom: 10px;\r\n  font-size: 20px;\r\n}\r\n#book {\r\n  font-size: 15px;\r\n  padding: 10px 50px;\r\n  border-radius: 20px;\r\n  margin: 10px;\r\n}\r\n\r\na {\r\n  font-size: 15px;\r\n  text-decoration: none;\r\n  color: rgb(0, 153, 255);\r\n}\r\n\r\na:hover,\r\na:active {\r\n  text-decoration: underline;\r\n}\r\n</style>","import script from \"./WelcomeModal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WelcomeModal.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WelcomeModal.vue?vue&type=style&index=0&id=0854731e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0854731e\"]])\n\nexport default __exports__","import { render } from \"./Parent.vue?vue&type=template&id=faca83aa&scoped=true\"\nimport script from \"./Parent.vue?vue&type=script&lang=js\"\nexport * from \"./Parent.vue?vue&type=script&lang=js\"\n\nimport \"./Parent.vue?vue&type=style&index=0&id=faca83aa&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-faca83aa\"]])\n\nexport default __exports__"],"names":["dateToUnixTime","date","console","log","torontoDateTime","DateTime","fromISO","zone","getTimezone","unixTimestamp","toSeconds","async","logIn","phoneNum","password","rememberMe","parsePhoneNumberFromString","number","e","message","baseURL","process","res","fetch","method","credentials","headers","body","JSON","stringify","phone_num","remember_me","json","ok","store","useMyProfile","setMyProfile","token","role","user_role","error","id","key","_createElementBlock","_hoisted_1","_createVNode","_component_WelcomeModal","_createElementVNode","_component_Services","getServices","$setup","onNavigateNext","resetPage2","page","page2trigger","_component_SelectTime","isReady","services","onSelectChain","onReturn","page3trigger","_component_FinalPreview","chain","onInputMessage","onSubmit","_hoisted_2","_component_BookingConfirmation","onClearForm","customer","_createCommentVNode","_Fragment","_renderList","service","index","_createBlock","_component_Service","onRemoveService","onInputEmpIds","class","onClick","_cache","args","openSelect","_component_FontAwesomeIcon","icon","addIcon","_createTextVNode","continueIcon","isSelecting","_component_SelectService","onInputService","onClose","closeSelect","isReturnable","$props","$options","$data","backIcon","isFetched","categories","category","_component_Category","onInputServiceId","openAOSs","_component_SelectAOSOs","serviceId","closeAOSOs","onInputAOSOs","length","_toDisplayString","cate_name","$event","onSelectService","service_id","service_name","price","_hoisted_4","_hoisted_3","name","props","Object","Function","methods","formatDate","unixTime","unixToReadable","this","__exports__","fetchActiveServices","getTodayUnixTime","refactorServices","notifyReqError","rawServices","rawCategories","cate_id","forEach","raw","last_date","is_active","push","sorted","values","sort","a","b","handleClose","faXmark","fetched","serviceInfo","_hoisted_5","description","client_can_book","_withModifiers","questions","question","_hoisted_6","questionText","_hoisted_7","options","option","childIndex","type","value","optionId","answers","questionId","required","_hoisted_8","optionText","formatOffset","optionOffset","msg","_hoisted_9","_hoisted_10","fetchAOSs","rawToQuestions","add_on_services","readServiceInfo","service_info","i","currentId","row","duration","Number","data","components","FontAwesomeIcon","AOSOs","seconds","sign","absMinutes","Math","abs","floor","onInputAnswer","created","Boolean","Category","SelectAOSOs","faLeftLong","serviceName","SEs","employee","employee_id","alias","checked","onChange","onCheckEmp","userIcon","onRemove","removeIcon","fetchServicePreview","preview","fetchServiceEmployees","employees","timeIcon","faClock","dollarIcon","faDollarSign","faTrashCan","faUser","map","Promise","all","max","SelectService","Service","setup","faPlus","faRightLong","router","useRouter","route","useRoute","ref","empIds","back","ids","aliases","empAliases","keys","onMounted","watch","params","onMoveDate","faMinus","onInputDate","target","unixDate","unixTimeToReminder","sortedOpenings","opening","onChooseOpening","formatTime","start","_hoisted_11","onBack","onContinue","secondsToClock","isNaN","hours","minutes","period","formattedHours","String","padStart","fetchAvailability","DELAs_requests","employee_ids","selected_AOSO","DELAs_list","serviceSlots","getServiceSlots","chains","getChains","validChains","removeShortChains","DELAs","grouped","slots","slotsMap","Map","DELA","slot","end","has","set","get","childMap","others","slice","childChains","chainsAppend","concat","last","chainStart","chainEnd","minEnd","min","slotCount","newChains","openings","random","isInThePast","today","validated","parseDate","resetData","fetchData","direction","current","Date","now","offset","getTimezoneOffset","getTime","setDate","getDate","newDate","toISOString","newOpenings","newVal","requestOTP","codeId","code_id","waitTime","wait_time","__props","onNext","guestAddAppo","otpId","otp","newSlots","chainToNewSlots","otp_id","client_name","empCount","empId","topEmpId","topEmpIds","j","newSlot","wait","code","onResend","_codeId","interval","setInterval","onUnmounted","clearInterval","__default__","onRequestCode","_phoneNum","_name","_waitTime","clientAddAppo","faCheck","textareas","MPstore","computed","isGuestBooking","onTypeMessage","event","autoResize","textarea","style","height","scrollHeight","chain_","date_","closeModal","isOpen","isLoggedOut","noToken","Services","SelectTime","FinalPreview","WelcomeModal","BookingConfirmation","formIsEmpty","updateURL","selectedChain","selectedDate","onBeforeRouteLeave","to","from","next","fullPath","startsWith","answer","confirm","render"],"sourceRoot":""}