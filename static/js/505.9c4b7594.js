"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[505],{2068:function(e,a,t){t.d(a,{A:function(){return u}});var n=t(7165),o=t(7414);async function u(e,a,t){try{try{e=(0,o.l)(e,"CA").number,console.log("phoneNum: ",e)}catch(u){return{message:"Invalid phone number"}}const s="",r=await fetch(`${s}/api/authentication/log_in`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone_num:e,password:a,remember_me:t})}),l=await r.json();if(r.ok){const e=(0,n.je)();return e.setMyProfile({token:l.token,role:l.user_role}),!0}return console.log("Failed to log in, message: ",l.message),{message:l.message}}catch(u){return console.error("Unexpected Error: ",u),{message:"Unexpected Error"}}}},5505:function(e,a,t){t.r(a),t.d(a,{default:function(){return S}});var n=t(6768),o=t(144),u=t(5130),s=t(4232),r=t(7414);async function l(e,a,t){try{try{e=(0,r.l)(e,"CA").number}catch(n){return{message:"Invalid phone number"}}const o="",u=await fetch(`${o}/api/authentication/request_sign_up`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone_num:e,first_name:a,last_name:t})}),s=await u.json(),l=s.code_id,i=s.message,d=s.wait_time;return{codeId:l,message:i,waitTime:d}}catch(n){return console.error("Unexpected Error: ",n),{message:"Unexpected Error"}}}const i={id:"msg"},d={name:"Credentials-"};var c=Object.assign(d,{props:{onNext:Function},setup(e){const a=e,t=(0,o.KR)(""),r=(0,o.KR)(""),d=(0,o.KR)(""),c=(0,o.KR)(""),v=(0,o.KR)("");async function m(){const{codeId:e,message:n,waitTime:o}=await l(t.value,d.value,c.value);e?a.onNext(e,t.value,r.value,d.value,c.value,o):v.value=n}return(e,a)=>{const o=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("form",{onSubmit:(0,u.D$)(m,["prevent"])},[(0,n.Lk)("div",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),placeholder:"First Name",required:""},null,512),[[u.Jo,d.value]]),(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>c.value=e),placeholder:"Last Name",required:""},null,512),[[u.Jo,c.value]])]),(0,n.Lk)("div",null,[(0,n.bo)((0,n.Lk)("input",{type:"tel","onUpdate:modelValue":a[2]||(a[2]=e=>t.value=e),placeholder:"Phone Number",required:""},null,512),[[u.Jo,t.value]])]),(0,n.Lk)("div",null,[(0,n.bo)((0,n.Lk)("input",{type:"password","onUpdate:modelValue":a[3]||(a[3]=e=>r.value=e),placeholder:"New Password",minlength:"6",required:""},null,512),[[u.Jo,r.value]])]),(0,n.Lk)("div",i,(0,s.v_)(v.value),1),a[5]||(a[5]=(0,n.Lk)("button",{class:"greenBtn"},"Sign up",-1)),(0,n.Lk)("div",null,[(0,n.bF)(o,{to:"/login"},{default:(0,n.k6)((()=>a[4]||(a[4]=[(0,n.eW)("I already have an account")]))),_:1})])],32)}}}),v=t(1241);const m=(0,v.A)(c,[["__scopeId","data-v-319faed9"]]);var p=m,g=(t(4114),t(1387)),h=t(2068);async function f(e,a,t,n,o,u){try{const s="",r=await fetch(`${s}/api/authentication/sign_up`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({code_id:e,code:a,password:n,first_name:o,last_name:u})});if(!r.ok){const e=await r.json();return console.log("Failed to sign up, message: ",e.message),e.message}await(0,h.A)(t,n)}catch(s){return console.error("Unexpected Error: ",s),s.message}}const y={id:"msg"},k={key:0,class:"disabled"};var b={__name:"OTPverify",props:{codeId:Number,phoneNum:String,password:String,firstName:String,lastName:String,waitTime:Number},setup(e){const a=e,t=(0,o.KR)(a.codeId),r=(0,o.KR)(""),i=(0,o.KR)(""),d=(0,g.rd)(),c=(0,o.KR)(a.waitTime);async function v(){const e=await f(t.value,r.value,a.phoneNum,a.password,a.firstName,a.lastName);if(e)return i.value=e,void(r.value="");d.push("/")}async function m(){const{codeId:e,message:n,waitTime:o}=await l(a.phoneNum,a.firstName,a.lastName);console.log(e),e?(t.value=e,c.value=o):i.value=n}let p;return(0,n.sV)((()=>{p=setInterval((()=>{c.value--}),1e3)})),(0,n.hi)((()=>{clearInterval(p)})),(a,t)=>((0,n.uX)(),(0,n.CE)("form",{onSubmit:(0,u.D$)(v,["prevent"])},[(0,n.Lk)("div",null,"Please enter the one time code sent to "+(0,s.v_)(e.phoneNum)+" by text",1),(0,n.Lk)("div",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),placeholder:"Verification Code"},null,512),[[u.Jo,r.value]])]),(0,n.Lk)("div",y,(0,s.v_)(i.value),1),t[1]||(t[1]=(0,n.Lk)("button",{class:"greenBtn"},"Verify",-1)),c.value>0?((0,n.uX)(),(0,n.CE)("a",k," Resend Code (Wait "+(0,s.v_)(c.value)+"s)",1)):((0,n.uX)(),(0,n.CE)("a",{key:1,onClick:m}," Resend Code "))],32))}};const w=(0,v.A)(b,[["__scopeId","data-v-bc92058e"]]);var _=w;const N={id:"layout"},C={key:0},R={key:1},L={};var K=Object.assign(L,{__name:"SignUp",setup(e){const a=(0,o.KR)(1),t=(0,o.KR)(),u=(0,o.KR)(""),s=(0,o.KR)(""),r=(0,o.KR)(""),l=(0,o.KR)(""),i=(0,o.KR)(0);function d(e,n,o,d,c,v){t.value=e,u.value=n,s.value=o,r.value=d,l.value=c,i.value=v,a.value++}return(e,o)=>((0,n.uX)(),(0,n.CE)("div",N,[o[0]||(o[0]=(0,n.Lk)("div",{id:"title"},"Create new account",-1)),1===a.value?((0,n.uX)(),(0,n.CE)("div",C,[(0,n.bF)(p,{onNext:d})])):(0,n.Q3)("",!0),2===a.value?((0,n.uX)(),(0,n.CE)("div",R,[(0,n.bF)(_,{codeId:t.value,phoneNum:u.value,password:s.value,firstName:r.value,lastName:l.value,waitTime:i.value},null,8,["codeId","phoneNum","password","firstName","lastName","waitTime"])])):(0,n.Q3)("",!0)]))}});const I=(0,v.A)(K,[["__scopeId","data-v-ca12e8fc"]]);var S=I}}]);
//# sourceMappingURL=505.9c4b7594.js.map