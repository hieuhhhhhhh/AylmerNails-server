{"version":3,"file":"js/559.ffd357ba.js","mappings":"uKAGe,SAASA,EAAeC,GAGrC,GAFAC,QAAQC,IAAI,YAEPF,EACH,OAIF,MAAMG,EAAWC,EAAAA,GAASC,WAA2B,IAAhBL,GAAsBM,SACzDC,EAAAA,EAAAA,MAIF,OAAOJ,EAASK,eAAe,CAC7BC,QAAS,QACTC,MAAO,QACPC,IAAK,UACLC,KAAM,WAEV,C,sGCnBeC,eAAeC,IAC5B,IAEE,MAAMC,EAAUC,GAGVC,QAAYC,MAChB,GAAGH,kCAAuCI,EAAAA,EAAAA,OAC1C,CACEC,OAAQ,MACRC,YAAa,UACbC,QAAS,CACP,eAAgB,sBAMhBC,QAAaN,EAAIM,OAGvB,GAAIN,EAAIO,GAAI,CAEV,MAAMC,EAAMF,EAAKG,cACXC,EAAY,GAWlB,OAVAF,EAAIG,SAASC,IAEX,MAAOC,EAAaC,EAAOC,EAAWC,EAAWC,GAASL,EACpDM,EAAW,CAAEL,cAAaC,QAAOC,YAAWC,YAAWC,SAE7DP,EAAUS,KAAKD,EAAS,IAI1BlC,QAAQC,IAAI,QAASyB,GACdA,CACT,EACEU,EAAAA,EAAAA,GAAed,EAAKe,SACpBrC,QAAQC,IAAI,2CAA4CqB,EAAKe,QAEjE,CAAE,MAAOT,GACP5B,QAAQsC,MAAM,qBAAsBV,EACtC,CACF,C,qGC7COW,GAAG,Y,EADV,Y,GAAAC,IAAA,EAWWC,MAAM,S,GAMVF,GAAG,Q,8EAjBVG,EAAAA,EAAAA,IAAAC,EAAAA,GAAA,OACEC,EAAAA,EAAAA,IAcM,MAdNC,EAcM,gBAbJH,EAAAA,EAAAA,IAYMC,EAAAA,GAAA,MAdVG,EAAAA,EAAAA,IAKkCC,EAAArB,WALlC,CAKcQ,EAAUc,M,WAHpBN,EAAAA,EAAAA,IAYM,OAXJH,GAAG,UACFE,OAJPQ,EAAAA,EAAAA,IAAA,CAAAC,OAIwBhB,EAASF,YAE1BQ,IAAKQ,EACLG,OAPPC,EAAAA,EAAAA,IAAA,CAAAC,WAO4BnB,EAASD,QAC9BqB,QAAKC,GAAEC,EAAAC,YAAYvB,EAASL,c,EARnC6B,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IAUSzB,EAASJ,OAAQ,IACpB,GAA0BI,EAASF,WAXzC4B,EAAAA,EAAAA,IAAA,SAWkD,WAA5ClB,EAAAA,EAAAA,IAEM,MAFNmB,EAA8C,cACnCF,EAAAA,EAAAA,IAAGH,EAAAM,WAAW5B,EAASH,YAAS,KAZjD,GAAAgC,M,qBAgBEnB,EAAAA,EAAAA,IAAM,qBACNA,EAAAA,EAAAA,IAIM,MAJNoB,EAIM,EAHJpB,EAAAA,EAAAA,IAES,UAFDH,MAAM,UAAUF,GAAG,OAAQe,QAAKW,EAAA,KAAAA,EAAA,GAAAV,GAAEC,EAAAU,mB,EACxCC,EAAAA,EAAAA,IAAoCC,EAAA,CAAlBC,KAAMtB,EAAAuB,UAAQ,8BAnBtCZ,EAAAA,EAAAA,IAmB0C,wBACtC,G,qDAYJ,GACEa,KAAM,aACNC,WAAY,CACVC,gBAAeA,EAAAA,IAEjBC,IAAAA,GACE,MAAO,CACLhD,UAAW,GACX4C,SAAUK,EAAAA,IAEd,EACAC,QAAS,CACPV,cAAAA,GACEW,KAAKC,QAAQ3C,KAAK,0BACpB,EACAsB,WAAAA,CAAY5B,GACVgD,KAAKC,QAAQ3C,KAAK,sBAAsBN,IAC1C,EACAiC,UAAAA,CAAWiB,GACT,OAAOjF,EAAAA,EAAAA,GAAeiF,EACxB,GAEF,aAAMC,GACJH,KAAKnD,gBAAkBb,EAAAA,EAAAA,KACvBb,QAAQC,IAAI,cAAe4E,KAAKnD,UAClC,G,UClDF,MAAMuD,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://frontend/./src/lib/unixToReadable.js","webpack://frontend/./src/views/employees/apis/fetchEmployees.js","webpack://frontend/./src/views/employees/Employees.vue","webpack://frontend/./src/views/employees/Employees.vue?3122"],"sourcesContent":["import { DateTime } from \"luxon\";\r\nimport getTimezone from \"./getTimeZone\";\r\n\r\nexport default function unixToReadable(unixTimestamp) {\r\n  console.log(\"calling\");\r\n\r\n  if (!unixTimestamp) {\r\n    return;\r\n  }\r\n\r\n  // Convert the Unix timestamp to a Luxon DateTime object in the specified timezone\r\n  const dateTime = DateTime.fromMillis(unixTimestamp * 1000).setZone(\r\n    getTimezone()\r\n  );\r\n\r\n  // Format the date with short weekday and month (e.g., \"Mon, Jan 20, 2025\")\r\n  return dateTime.toLocaleString({\r\n    weekday: \"short\",\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n    year: \"numeric\",\r\n  });\r\n}\r\n","import getTodayUnixTime from \"@/lib/getTodayUnixTime\";\r\nimport notifyReqError from \"@/stores/notifyReqError\";\r\n\r\nexport default async function fetchEmployees() {\r\n  try {\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(\r\n      `${baseURL}/api/employees/get_employees/${getTodayUnixTime()}`,\r\n      {\r\n        method: \"GET\",\r\n        credentials: \"include\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    );\r\n\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      // refactor data and return result\r\n      const raw = json.all_employees;\r\n      const employees = [];\r\n      raw.forEach((e) => {\r\n        // unpack properties and create new employee\r\n        const [employee_id, alias, last_date, is_active, color] = e;\r\n        const employee = { employee_id, alias, last_date, is_active, color };\r\n\r\n        employees.push(employee);\r\n      });\r\n\r\n      // return result\r\n      console.log(\"emp: \", employees);\r\n      return employees;\r\n    } else {\r\n      notifyReqError(json.message);\r\n      console.log(\"Failed to fetch employee list, message: \", json.message);\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n","<template>\r\n  <div id=\"category\">\r\n    <div\r\n      id=\"service\"\r\n      :class=\"{ faded: !employee.is_active }\"\r\n      v-for=\"(employee, index) in employees\"\r\n      :key=\"index\"\r\n      :style=\"{ background: employee.color }\"\r\n      @click=\"navigateEmp(employee.employee_id)\"\r\n    >\r\n      {{ employee.alias }}\r\n      <div class=\"faded\" v-if=\"!employee.is_active\">\r\n        ended on {{ formatDate(employee.last_date) }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <br />\r\n  <div id=\"flex\">\r\n    <button class=\"blueBtn\" id=\"plus\" @click=\"navigateAddEmp()\">\r\n      <FontAwesomeIcon :icon=\"plusIcon\" /> Add Employee\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// icons\r\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\r\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\r\n// lib\r\nimport fetchEmployees from \"./apis/fetchEmployees\";\r\nimport unixToReadable from \"@/lib/unixToReadable\";\r\n\r\nexport default {\r\n  name: \"Employees-\",\r\n  components: {\r\n    FontAwesomeIcon,\r\n  },\r\n  data() {\r\n    return {\r\n      employees: [],\r\n      plusIcon: faPlus,\r\n    };\r\n  },\r\n  methods: {\r\n    navigateAddEmp() {\r\n      this.$router.push(`/employees/add_employee`);\r\n    },\r\n    navigateEmp(employee_id) {\r\n      this.$router.push(`/employees/details/${employee_id}`);\r\n    },\r\n    formatDate(unix) {\r\n      return unixToReadable(unix);\r\n    },\r\n  },\r\n  async created() {\r\n    this.employees = await fetchEmployees();\r\n    console.log(\"employees: \", this.employees);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#category {\r\n  box-shadow: 0 0 5px var(--shadow-color);\r\n  width: fit-content;\r\n  max-width: 90vw;\r\n  min-width: min(350px, 90vw);\r\n  border-radius: 5px;\r\n  overflow: hidden;\r\n  background-color: var(--background-i2);\r\n  box-sizing: border-box;\r\n  height: fit-content;\r\n  gap: 10px;\r\n}\r\n\r\n#service {\r\n  color: black;\r\n  padding: 9px;\r\n  padding-inline: 15px;\r\n  font-size: 19px;\r\n  border-top: 1px solid var(--xtrans-gray);\r\n  box-sizing: border-box;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  transition: all 0.1s ease-out;\r\n}\r\n#service:hover {\r\n  background: gray !important;\r\n}\r\n#service:active {\r\n  background: gray !important;\r\n}\r\n.faded {\r\n  color: gray;\r\n  padding-left: 20px;\r\n  font-size: 14px;\r\n}\r\n/* phone view */\r\n@media (orientation: portrait) {\r\n  #service {\r\n    padding: 13px;\r\n  }\r\n}\r\n#flex {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n</style>","import { render } from \"./Employees.vue?vue&type=template&id=fd61942e&scoped=true\"\nimport script from \"./Employees.vue?vue&type=script&lang=js\"\nexport * from \"./Employees.vue?vue&type=script&lang=js\"\n\nimport \"./Employees.vue?vue&type=style&index=0&id=fd61942e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-fd61942e\"]])\n\nexport default __exports__"],"names":["unixToReadable","unixTimestamp","console","log","dateTime","DateTime","fromMillis","setZone","getTimezone","toLocaleString","weekday","month","day","year","async","fetchEmployees","baseURL","process","res","fetch","getTodayUnixTime","method","credentials","headers","json","ok","raw","all_employees","employees","forEach","e","employee_id","alias","last_date","is_active","color","employee","push","notifyReqError","message","error","id","key","class","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_renderList","$data","index","_normalizeClass","faded","style","_normalizeStyle","background","onClick","$event","$options","navigateEmp","_createTextVNode","_toDisplayString","_createCommentVNode","_hoisted_3","formatDate","_hoisted_2","_hoisted_4","_cache","navigateAddEmp","_createVNode","_component_FontAwesomeIcon","icon","plusIcon","name","components","FontAwesomeIcon","data","faPlus","methods","this","$router","unix","created","__exports__","render"],"sourceRoot":""}