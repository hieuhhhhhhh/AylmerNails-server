"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[490],{8297:function(e,n,o){o.d(n,{A:function(){return s}});var t=o(4116),a=o(6156);function s(e){console.log("calling");const n=t.c9.fromSeconds(e),o=n.setZone((0,a.A)());return o.toFormat("h:mm a")}},5490:function(e,n,o){o.r(n),o.d(n,{default:function(){return X}});var t=o(6768),a=o(5130),s=o(4232);const l={id:"topBox"},c=["onClick"],r={class:"newCol"},i={class:"flexBox"},u={key:0,class:"newCell"},d={key:0},p={class:"flex"};function v(e,n,o,v,k,m){const h=(0,t.g2)("UnsaveAllBtn");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",l,[(0,t.bo)((0,t.Lk)("input",{id:"search",type:"text",placeholder:"Search...","onUpdate:modelValue":n[0]||(n[0]=e=>v.query=e),onInput:n[1]||(n[1]=(...e)=>v.onSearch&&v.onSearch(...e))},null,544),[[a.Jo,v.query]]),(0,t.Lk)("div",null,[(0,t.bF)(h)])]),(0,t.Lk)("table",null,[(0,t.Lk)("tbody",null,[n[3]||(n[3]=(0,t.Lk)("tr",null,[(0,t.Lk)("th",{class:"newCol"}),(0,t.Lk)("th",null,"Service"),(0,t.Lk)("th",null,"Employee"),(0,t.Lk)("th",null,"Client"),(0,t.Lk)("th",null,"Booked for")],-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(v.appos,((e,n)=>((0,t.uX)(),(0,t.CE)("tr",{class:"row",key:n,onClick:n=>v.toAppo(e.date,e.appoId)},[(0,t.Lk)("td",r,[(0,t.Lk)("div",i,[e.savedOn>v.lastTracked?((0,t.uX)(),(0,t.CE)("div",u,"NEW")):(0,t.Q3)("",!0)])]),(0,t.Lk)("td",null,[(0,t.eW)((0,s.v_)(e.serviceName)+" ",1),(0,t.Lk)("div",null,(0,s.v_)(e.category),1)]),(0,t.Lk)("td",{style:(0,s.Tr)({color:e.color})},(0,s.v_)(e.empAlias),5),(0,t.Lk)("td",null,[(0,t.Lk)("div",null,(0,s.v_)(v.formatPhone(e.phoneNum)),1),(0,t.eW)(" "+(0,s.v_)(e.contactName)+" ",1),e.profileName&&e.profileName!=e.contactName?((0,t.uX)(),(0,t.CE)("div",d," ("+(0,s.v_)(e.profileName)+") ",1)):(0,t.Q3)("",!0)]),(0,t.Lk)("td",null,[(0,t.eW)((0,s.v_)(v.unixToReadable(e.date))+" ("+(0,s.v_)(v.unixTimeToReminder(e.date))+") ",1),(0,t.Lk)("div",null,(0,s.v_)(v.secsToHours(e.start))+" - "+(0,s.v_)(v.secsToHours(e.end)),1)])],8,c)))),128))])]),(0,t.Lk)("div",p,[v.appos?.length===v.limit?((0,t.uX)(),(0,t.CE)("button",{key:0,id:"show",class:"blueBtn",onClick:n[2]||(n[2]=(...e)=>v.showMore&&v.showMore(...e))}," Show More ")):(0,t.Q3)("",!0)])],64)}o(4114);var k=o(144),m=o(1076),h=o(3519),f=o(6769),y=o(8297),L=o(4714),w=o(1387),g=o(8199);async function C(e,n){try{const o="",t=await fetch(`${o}/api/appointments/search_saved_appointments`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e.trim(),limit:n})}),a=await t.json();if(t.ok){const e=[],n=a.appos;console.log("tables",n);for(let o of n){const[n,t,a,s,l,c,r,i,u,d,p,v,k,m,h]=o,f={appoId:n,savedOn:t,empId:a,empAlias:s,color:l,serviceId:c,serviceName:r,category:i,phoneNumId:u,phoneNum:d,contactName:p,profileName:v,date:k,start:m,end:h};e.push(f)}return e}(0,g.A)(a.message),console.log("Failed to search saved appointments, message: ",a.message)}catch(o){console.error("Unexpected Error: ",o)}}async function _(){try{const e="",n=await fetch(`${e}/api/appointments/get_saved_last_tracked`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),o=await n.json();if(n.ok){const e=o.last_tracked;return console.log("last: ",e),e}console.log("Failed to last tracked on saved appointments, message: ",o.message)}catch(e){console.error("Unexpected Error: ",e)}}var A=o(2405);async function b(){try{const e="",n=await fetch(`${e}/api/appointments/unsave_all_appointments`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(n.ok)return!0;{const e=await n.json();(0,g.A)(e.message),console.log("Failed to unsave all appointments, message: ",e.message)}}catch(e){console.error("Unexpected Error: ",e)}}var T=o(8249),x=o(2353),E=o(92);const N={key:0,id:"parent"},R={id:"window"};var B={__name:"UnsaveAllBtn",setup(e){const n=(0,w.rd)(),o=(0,k.KR)(!1);function a(){o.value=!0}function s(){o.value=!1}async function l(){const e=await b();e&&n.push("/refresh")}return(e,n)=>((0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("button",{class:"orangeBtn",id:"unsave",onClick:a},[(0,t.bF)((0,k.R1)(T.gc),{icon:(0,k.R1)(E.G06)},null,8,["icon"]),n[0]||(n[0]=(0,t.eW)(" Unsave All "))]),o.value?((0,t.uX)(),(0,t.CE)("div",N,[(0,t.Lk)("div",{id:"background",onClick:s}),(0,t.Lk)("div",R,[(0,t.Lk)("button",{onClick:s,id:"closeBtn",class:"redBtn"},[(0,t.bF)((0,k.R1)(T.gc),{icon:(0,k.R1)(x.Jyw)},null,8,["icon"])]),n[1]||(n[1]=(0,t.Lk)("div",{id:"content"},"Unsave All Appointments?",-1)),(0,t.Lk)("div",{id:"flexBox"},[(0,t.Lk)("button",{class:"redBtn",onClick:l},"Yes")])])])):(0,t.Q3)("",!0)],64))}},F=o(1241);const S=(0,F.A)(B,[["__scopeId","data-v-329f5e1c"]]);var U=S,I={name:"CanceledAppos",components:{UnsaveAllBtn:U},setup(){const e=(0,k.KR)(""),n=(0,k.KR)([]),o=(0,k.KR)(null),a=(0,k.KR)(25),s=(0,w.rd)(),l=async()=>{n.value=await C(e.value,a.value)},c=async()=>{const e=await b();e&&s.push("/refresh")},r=(e,n)=>{s.push(`/calendar/${e}/${n}`)},i=async()=>{a.value+=25,await l()};return(0,t.sV)((async()=>{o.value=await _(),await l()})),(0,w.JZ)(((e,n,o)=>{(0,A.Rc)(),o()})),{query:e,appos:n,lastTracked:o,unixToReadable:m.A,unixTimeToReminder:h.A,unixToHours:y.A,secsToHours:f.A,formatPhone:L.A,onSearch:l,toAppo:r,onUnsave:c,showMore:i,limit:a}}};const K=(0,F.A)(I,[["render",v],["__scopeId","data-v-12ab02af"]]);var X=K}}]);
//# sourceMappingURL=490.8a3f6556.js.map