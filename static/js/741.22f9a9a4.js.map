{"version":3,"file":"js/741.22f9a9a4.js","mappings":"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","sources":["webpack://frontend/./src/lib/formatPhone.js","webpack://frontend/./src/lib/secsToHours.js","webpack://frontend/./src/lib/unixTimeToReminder.js","webpack://frontend/./src/lib/unixToReadable.js","webpack://frontend/./src/views/conflicts/ScheduleConflicts.vue","webpack://frontend/./src/views/conflicts/apis/fetchScheduleConflicts.js","webpack://frontend/./src/views/conflicts/ScheduleConflicts.vue?3585"],"sourcesContent":["export default function formatPhone(rawPhone) {\r\n  if (rawPhone.slice(0, 2) !== \"+1\") return rawPhone;\r\n  console.log(\"calling\");\r\n  if (!rawPhone) return;\r\n  let formatted = \"\";\r\n\r\n  rawPhone = rawPhone.slice(2);\r\n\r\n  if (rawPhone.length <= 3) {\r\n    formatted = rawPhone;\r\n  } else if (rawPhone.length <= 6) {\r\n    formatted = `${rawPhone.slice(0, 3)} ${rawPhone.slice(3)}`;\r\n  } else {\r\n    formatted = `${rawPhone.slice(0, 3)} ${rawPhone.slice(\r\n      3,\r\n      6\r\n    )} ${rawPhone.slice(6)}`;\r\n  }\r\n\r\n  // return result\r\n  return formatted;\r\n}\r\n","import { DateTime } from \"luxon\";\r\n\r\nexport default function secsToHours(secs) {\r\n  console.log(\"calling\");\r\n\r\n  return DateTime.fromObject({ hour: 0 })\r\n    .plus({ seconds: secs })\r\n    .toFormat(\"h:mm a\");\r\n}\r\n","import { DateTime } from \"luxon\";\r\n\r\nexport default function unixTimeToReminder(unix) {\r\n  console.log(\"calling\");\r\n\r\n  if (!unix) {\r\n    return;\r\n  }\r\n\r\n  const inputDate = DateTime.fromSeconds(unix).startOf(\"day\");\r\n  const today = DateTime.local().startOf(\"day\");\r\n\r\n  const diff = inputDate.diff(today, \"days\").toObject();\r\n  const daysDiff = Math.round(diff.days);\r\n\r\n  if (inputDate.equals(today)) {\r\n    return \"Today\";\r\n  }\r\n  if (daysDiff === 1) {\r\n    return \"Tomorrow\";\r\n  } else if (daysDiff === -1) {\r\n    return \"Yesterday\";\r\n  }\r\n\r\n  const isFuture = daysDiff > 0 ? \"next\" : \"last\";\r\n\r\n  if (Math.abs(daysDiff) >= 30) {\r\n    return `${isFuture} ${Math.abs(Math.round(daysDiff / 30))}m`;\r\n  } else if (Math.abs(daysDiff) >= 7) {\r\n    return `${isFuture} ${Math.abs(Math.round(daysDiff / 7))}w`;\r\n  } else {\r\n    return `${isFuture} ${Math.abs(daysDiff)}d`;\r\n  }\r\n}\r\n","import { DateTime } from \"luxon\";\r\nimport getTimezone from \"./getTimeZone\";\r\n\r\nexport default function unixToReadable(unixTimestamp) {\r\n  console.log(\"calling\");\r\n\r\n  if (!unixTimestamp) {\r\n    return;\r\n  }\r\n\r\n  // Convert the Unix timestamp to a Luxon DateTime object in the specified timezone\r\n  const dateTime = DateTime.fromMillis(unixTimestamp * 1000).setZone(\r\n    getTimezone()\r\n  );\r\n\r\n  // Format the date with short weekday and month (e.g., \"Mon, Jan 20, 2025\")\r\n  return dateTime.toLocaleString({\r\n    weekday: \"short\",\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n    year: \"numeric\",\r\n  });\r\n}\r\n","<template>\r\n  <div id=\"title\">Service Availability Conflicts</div>\r\n\r\n  <table>\r\n    <colgroup>\r\n      <col style=\"width: auto\" />\r\n      <col style=\"width: auto\" />\r\n    </colgroup>\r\n    <tbody>\r\n      <tr>\r\n        <th>Client</th>\r\n        <th>Service</th>\r\n        <th>Time</th>\r\n        <th>Opening Hours</th>\r\n      </tr>\r\n      <tr\r\n        class=\"row\"\r\n        v-for=\"(conflict, index) in conflicts\"\r\n        :key=\"index\"\r\n        @click=\"toAppoDetails(conflict.appoDate, conflict.appoId)\"\r\n      >\r\n        <td>\r\n          {{ conflict.contactName }}\r\n          <div>{{ formatPhone(conflict.phoneNum) }}</div>\r\n        </td>\r\n        <td>\r\n          {{ conflict.serviceName }}\r\n          <div>{{ conflict.category }}</div>\r\n        </td>\r\n        <td>\r\n          {{ unixToReadable(conflict.appoDate) }} ({{\r\n            unixTimeToReminder(conflict.appoDate)\r\n          }})\r\n          <div>\r\n            {{ secsToHours(conflict.appoStart) }} -\r\n            {{ secsToHours(conflict.appoEnd) }}\r\n          </div>\r\n        </td>\r\n        <td>\r\n          {{ conflict.appoDOW }}\r\n          <div v-if=\"conflict.opening && conflict.closing\">\r\n            {{ secsToHours(conflict.opening) }} -\r\n            {{ secsToHours(conflict.closing) }}\r\n          </div>\r\n          <div v-else :style=\"{ color: 'red' }\">closed</div>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</template>\r\n\r\n<script>\r\n// lib\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { onMounted, ref } from \"vue\";\r\nimport fetchScheduleConflicts from \"./apis/fetchScheduleConflicts\";\r\n\r\nimport formatPhone from \"@/lib/formatPhone\";\r\nimport unixToReadable from \"@/lib/unixToReadable\";\r\nimport unixTimeToReminder from \"@/lib/unixTimeToReminder\";\r\nimport secsToHours from \"@/lib/secsToHours\";\r\n\r\nexport default {\r\n  setup() {\r\n    // param from URL\r\n    const route = useRoute();\r\n    const empId = route.params.empId;\r\n    // router\r\n    const router = useRouter();\r\n    // resources\r\n    const conflicts = ref([]);\r\n\r\n    // BUTTONS\r\n    const toAppoDetails = (date, appoId) => {\r\n      console.log(\"date, appoId\", date, appoId);\r\n      router.push(`/calendar/${date}/${appoId}`);\r\n    };\r\n\r\n    // LIFECYCLE\r\n    onMounted(async () => {\r\n      // fetch resources\r\n      conflicts.value = await fetchScheduleConflicts(empId);\r\n    });\r\n    return {\r\n      empId,\r\n      conflicts,\r\n      toAppoDetails,\r\n      unixTimeToReminder,\r\n      secsToHours,\r\n      unixToReadable,\r\n      formatPhone,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  font-size: 14px;\r\n}\r\nth,\r\ntd {\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n\r\n  text-align: center;\r\n}\r\ntr {\r\n  border: 1px solid;\r\n}\r\n.row {\r\n  cursor: pointer;\r\n}\r\n.row:hover {\r\n  background: var(--hover);\r\n}\r\n.row:active {\r\n  background: var(--active);\r\n}\r\n#title {\r\n  font-size: 25px;\r\n  padding: 10px;\r\n}\r\n</style>","import notifyReqError from \"@/stores/notifyReqError\";\r\n\r\nexport default async function fetchScheduleConflicts(empId) {\r\n  try {\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(\r\n      `${baseURL}/api/employees/get_schedule_conflicts/${empId}`,\r\n      {\r\n        method: \"GET\",\r\n        credentials: \"include\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    );\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      let conflicts = [];\r\n\r\n      const table = json.conflicts;\r\n      for (let row of table) {\r\n        const [\r\n          empId,\r\n          appoId,\r\n          appoDate,\r\n          appoDOW,\r\n          appoStart,\r\n          appoEnd,\r\n          empAlias,\r\n          serviceName,\r\n          category,\r\n          contactName,\r\n          phoneNumId,\r\n          phoneNum,\r\n          opening,\r\n          closing,\r\n        ] = row;\r\n\r\n        conflicts.push({\r\n          empId,\r\n          appoId,\r\n          appoDate,\r\n          appoDOW,\r\n          appoStart,\r\n          appoEnd,\r\n          empAlias,\r\n          serviceName,\r\n          category,\r\n          contactName,\r\n          phoneNumId,\r\n          phoneNum,\r\n          opening,\r\n          closing,\r\n        });\r\n      }\r\n\r\n      return conflicts;\r\n    } else {\r\n      notifyReqError(json.message);\r\n      console.log(\r\n        \"Failed to fetch schedule conflicts, message: \",\r\n        json.message\r\n      );\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n","import { render } from \"./ScheduleConflicts.vue?vue&type=template&id=65d93e24&scoped=true\"\nimport script from \"./ScheduleConflicts.vue?vue&type=script&lang=js\"\nexport * from \"./ScheduleConflicts.vue?vue&type=script&lang=js\"\n\nimport \"./ScheduleConflicts.vue?vue&type=style&index=0&id=65d93e24&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-65d93e24\"]])\n\nexport default __exports__"],"names":["formatPhone","rawPhone","slice","console","log","formatted","length","secsToHours","secs","DateTime","fromObject","hour","plus","seconds","toFormat","unixTimeToReminder","unix","inputDate","fromSeconds","startOf","today","local","diff","toObject","daysDiff","Math","round","days","equals","isFuture","abs","unixToReadable","unixTimestamp","dateTime","fromMillis","setZone","getTimezone","toLocaleString","weekday","month","day","year","key","style","color","_createElementBlock","_Fragment","_createElementVNode","id","_renderList","$setup","conflicts","conflict","index","class","onClick","$event","toAppoDetails","appoDate","appoId","_createTextVNode","_toDisplayString","contactName","phoneNum","serviceName","category","appoStart","appoEnd","appoDOW","opening","closing","_hoisted_2","_hoisted_3","_hoisted_1","async","fetchScheduleConflicts","empId","baseURL","process","res","fetch","method","credentials","headers","json","ok","table","row","empAlias","phoneNumId","push","notifyReqError","message","e","error","setup","route","useRoute","params","router","useRouter","ref","date","onMounted","value","__exports__","render"],"sourceRoot":""}