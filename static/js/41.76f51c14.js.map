{"version":3,"file":"js/41.76f51c14.js","mappings":"kOAGeA,eAAeC,EAAMC,EAAUC,EAAUC,GACtD,IACE,IAEEF,GAAWG,EAAAA,EAAAA,GAA2BH,EAAU,MAAMI,OACtDC,QAAQC,IAAI,aAAcN,EAC5B,CAAE,MAAOO,GACP,MAAM,IAAIC,MAAM,uBAClB,CAGA,MAAMC,EAAUC,GAGVC,QAAYC,MAAM,GAAGH,8BAAqC,CAC9DI,OAAQ,OACRC,YAAa,UACbC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBC,UAAWnB,EACXC,WACAmB,YAAalB,MAKXmB,QAAaV,EAAIU,OAGvB,GAAIV,EAAIW,GAAI,CAEV,MAAMC,GAAQC,EAAAA,EAAAA,MAOd,OALAD,EAAME,aAAa,CACjBC,MAAOL,EAAKK,MACZC,KAAMN,EAAKO,aAGN,CACT,CAEE,OADAvB,QAAQC,IAAI,8BAA+Be,EAAKQ,SACzC,CAAEA,QAASR,EAAKQ,QAE3B,CAAE,MAAOtB,GAEP,OADAF,QAAQyB,MAAM,qBAAsBvB,GAC7B,CAAEsB,QAAStB,EAAEsB,QACtB,CACF,C,iDCgBAE,EAAe,CAAC,E,+CA5BhB,MAAMC,GAASC,EAAAA,EAAAA,MAETjC,GAAWkC,EAAAA,EAAAA,IAAI,IACfjC,GAAWiC,EAAAA,EAAAA,IAAI,IACfC,GAAMD,EAAAA,EAAAA,IAAI,IACVhC,GAAagC,EAAAA,EAAAA,KAAI,GAGvBpC,eAAesC,IACb,MAAM,QAAEP,SAAkB9B,EACxBC,EAASqC,MACTpC,EAASoC,MACTnC,EAAWmC,OAEb,GAAIR,EAGF,OAFAM,EAAIE,MAAQR,OACZ5B,EAASoC,MAAQ,IAKnBL,EAAOM,KAAK,IACd,C,kgCCxDA,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://frontend/./src/views/authentication/apis/logIn.js","webpack://frontend/./src/views/authentication/LogIn.vue","webpack://frontend/./src/views/authentication/LogIn.vue?66c8"],"sourcesContent":["import { useMyProfile } from \"@/stores/myProfile\";\r\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\r\n\r\nexport default async function logIn(phoneNum, password, rememberMe) {\r\n  try {\r\n    try {\r\n      // parse phone number to E.164\r\n      phoneNum = parsePhoneNumberFromString(phoneNum, \"CA\").number; // E.164 format\r\n      console.log(\"phoneNum: \", phoneNum);\r\n    } catch (e) {\r\n      throw new Error(\"Invalid Phone Number\");\r\n    }\r\n\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(`${baseURL}/api/authentication/log_in`, {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        phone_num: phoneNum,\r\n        password,\r\n        remember_me: rememberMe,\r\n      }),\r\n    });\r\n\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      // update pinia states\r\n      const store = useMyProfile();\r\n\r\n      store.setMyProfile({\r\n        token: json.token,\r\n        role: json.user_role,\r\n      });\r\n\r\n      return true;\r\n    } else {\r\n      console.log(\"Failed to log in, message: \", json.message);\r\n      return { message: json.message };\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n    return { message: e.message };\r\n  }\r\n}\r\n","<template>\r\n  <div id=\"layout\">\r\n    <form @submit.prevent=\"onSubmit\">\r\n      <div>\r\n        <input\r\n          type=\"tel\"\r\n          v-model=\"phoneNum\"\r\n          placeholder=\"Phone Number\"\r\n          required\r\n        />\r\n      </div>\r\n      <div>\r\n        <input\r\n          type=\"password\"\r\n          v-model=\"password\"\r\n          placeholder=\"Password\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <label>\r\n        <input id=\"check\" type=\"checkbox\" v-model=\"rememberMe\" />\r\n        Remember me next time\r\n      </label>\r\n      <div id=\"msg\">{{ msg }}</div>\r\n\r\n      <button class=\"blueBtn\">Log in</button>\r\n      <router-link to=\"/forgot_password\">Forgot Password</router-link>\r\n      <router-link to=\"/signup\">Create new Account</router-link>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\n// apis\r\nimport logIn from \"./apis/logIn\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\n// RESOURCES\r\nconst router = useRouter();\r\n// PAYLOAD\r\nconst phoneNum = ref(\"\");\r\nconst password = ref(\"\");\r\nconst msg = ref(\"\");\r\nconst rememberMe = ref(false);\r\n\r\n// APIS\r\nasync function onSubmit() {\r\n  const { message } = await logIn(\r\n    phoneNum.value,\r\n    password.value,\r\n    rememberMe.value\r\n  );\r\n  if (message) {\r\n    msg.value = message;\r\n    password.value = \"\";\r\n    return;\r\n  }\r\n\r\n  // if succesful\r\n  router.push(\"/\");\r\n}\r\n</script>\r\n\r\n\r\n\r\n<script>\r\nexport default {};\r\n</script>\r\n\r\n<style scoped>\r\n#layout {\r\n  background-color: var(--background-i1);\r\n  padding: 10px;\r\n  width: 900px;\r\n  max-width: 100vw;\r\n  margin-inline: auto;\r\n  flex-grow: 1;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\nform {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\na {\r\n  font-size: 15px;\r\n  text-decoration: none;\r\n  color: rgb(0, 153, 255);\r\n}\r\n\r\na:hover,\r\na:active {\r\n  text-decoration: underline;\r\n}\r\nbutton {\r\n  font-size: 20px;\r\n  padding-inline: 50px;\r\n  border-radius: 20px;\r\n  margin-bottom: 50px;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  transform: scale(1.5);\r\n  margin: 10px;\r\n  margin-inline: 3px;\r\n}\r\n\r\ninput[type=\"password\"],\r\ninput[type=\"tel\"] {\r\n  padding: 6px 10px;\r\n  width: 250px;\r\n}\r\nlabel {\r\n  font-size: 15px;\r\n}\r\n#msg {\r\n  color: red;\r\n  font-size: 15px;\r\n}\r\n</style>","import script from \"./LogIn.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LogIn.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LogIn.vue?vue&type=style&index=0&id=57793c86&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-57793c86\"]])\n\nexport default __exports__"],"names":["async","logIn","phoneNum","password","rememberMe","parsePhoneNumberFromString","number","console","log","e","Error","baseURL","process","res","fetch","method","credentials","headers","body","JSON","stringify","phone_num","remember_me","json","ok","store","useMyProfile","setMyProfile","token","role","user_role","message","error","__default__","router","useRouter","ref","msg","onSubmit","value","push","__exports__"],"sourceRoot":""}