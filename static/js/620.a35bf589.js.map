{"version":3,"file":"js/620.a35bf589.js","mappings":"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","sources":["webpack://frontend/./src/lib/formatPhone.js","webpack://frontend/./src/lib/secsToHours.js","webpack://frontend/./src/lib/unixTimeToReminder.js","webpack://frontend/./src/lib/unixToHours.js","webpack://frontend/./src/lib/unixToReadable.js","webpack://frontend/./src/views/activities/Booking.vue","webpack://frontend/./src/views/activities/apis/searchBookings.js","webpack://frontend/./src/views/activities/apis/fetchLastTracked.js","webpack://frontend/./src/views/activities/Booking.vue?4888"],"sourcesContent":["export default function formatPhone(rawPhone) {\r\n  if (rawPhone.slice(0, 2) !== \"+1\") return rawPhone;\r\n  console.log(\"calling\");\r\n  if (!rawPhone) return;\r\n  let formatted = \"\";\r\n\r\n  rawPhone = rawPhone.slice(2);\r\n\r\n  if (rawPhone.length <= 3) {\r\n    formatted = rawPhone;\r\n  } else if (rawPhone.length <= 6) {\r\n    formatted = `${rawPhone.slice(0, 3)} ${rawPhone.slice(3)}`;\r\n  } else {\r\n    formatted = `${rawPhone.slice(0, 3)} ${rawPhone.slice(\r\n      3,\r\n      6\r\n    )} ${rawPhone.slice(6)}`;\r\n  }\r\n\r\n  // return result\r\n  return formatted;\r\n}\r\n","import { DateTime } from \"luxon\";\r\n\r\nexport default function secsToHours(secs) {\r\n  console.log(\"calling\");\r\n\r\n  return DateTime.fromObject({ hour: 0 })\r\n    .plus({ seconds: secs })\r\n    .toFormat(\"h:mm a\");\r\n}\r\n","import { DateTime } from \"luxon\";\r\n\r\nexport default function unixTimeToReminder(unix) {\r\n  console.log(\"calling\");\r\n\r\n  if (!unix) {\r\n    return;\r\n  }\r\n\r\n  const inputDate = DateTime.fromSeconds(unix).startOf(\"day\");\r\n  const today = DateTime.local().startOf(\"day\");\r\n\r\n  const diff = inputDate.diff(today, \"days\").toObject();\r\n  const daysDiff = Math.round(diff.days);\r\n\r\n  if (inputDate.equals(today)) {\r\n    return \"Today\";\r\n  }\r\n  if (daysDiff === 1) {\r\n    return \"Tomorrow\";\r\n  } else if (daysDiff === -1) {\r\n    return \"Yesterday\";\r\n  }\r\n\r\n  const isFuture = daysDiff > 0 ? \"next\" : \"last\";\r\n\r\n  if (Math.abs(daysDiff) >= 30) {\r\n    return `${isFuture} ${Math.abs(Math.round(daysDiff / 30))}m`;\r\n  } else if (Math.abs(daysDiff) >= 7) {\r\n    return `${isFuture} ${Math.abs(Math.round(daysDiff / 7))}w`;\r\n  } else {\r\n    return `${isFuture} ${Math.abs(daysDiff)}d`;\r\n  }\r\n}\r\n","import { DateTime } from \"luxon\";\r\nimport getTimezone from \"./getTimeZone\";\r\n\r\nexport default function unixToHours(unix) {\r\n  console.log(\"calling\");\r\n\r\n  // Create a Luxon DateTime instance from the Unix timestamp (seconds)\r\n  const dt = DateTime.fromSeconds(unix);\r\n\r\n  // Convert to Toronto timezone\r\n  const torontoDate = dt.setZone(getTimezone());\r\n\r\n  // Format the DateTime to return only the hour in 24-hour format (e.g., \"09\" or \"17\")\r\n  return torontoDate.toFormat(\"h:mm a\");\r\n}\r\n","import { DateTime } from \"luxon\";\r\nimport getTimezone from \"./getTimeZone\";\r\n\r\nexport default function unixToReadable(unixTimestamp) {\r\n  console.log(\"calling\");\r\n\r\n  if (!unixTimestamp) {\r\n    return;\r\n  }\r\n\r\n  // Convert the Unix timestamp to a Luxon DateTime object in the specified timezone\r\n  const dateTime = DateTime.fromMillis(unixTimestamp * 1000).setZone(\r\n    getTimezone()\r\n  );\r\n\r\n  // Format the date with short weekday and month (e.g., \"Mon, Jan 20, 2025\")\r\n  return dateTime.toLocaleString({\r\n    weekday: \"short\",\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n    year: \"numeric\",\r\n  });\r\n}\r\n","<template>\r\n  <input\r\n    id=\"search\"\r\n    placeholder=\"Search...\"\r\n    type=\"text\"\r\n    v-model=\"query\"\r\n    @input=\"onSearchBookings\"\r\n  />\r\n  <table>\r\n    <colgroup>\r\n      <col style=\"width: auto\" />\r\n      <col style=\"width: auto\" />\r\n    </colgroup>\r\n    <tbody>\r\n      <tr>\r\n        <th class=\"newCol\"></th>\r\n        <th>Client</th>\r\n        <th>Booked on</th>\r\n        <th>Service</th>\r\n        <th>Employee</th>\r\n        <th>Booked for</th>\r\n      </tr>\r\n      <tr\r\n        class=\"row\"\r\n        v-for=\"(appo, index) in appos\"\r\n        :key=\"index\"\r\n        @click=\"toAppoDetails(appo.date, appo.appoId)\"\r\n      >\r\n        <td class=\"newCol\">\r\n          <div class=\"flexBox\">\r\n            <div class=\"newCell\" v-if=\"appo.bookedTime > lastTracked\">NEW</div>\r\n            <div class=\"todayCell\" v-if=\"appo.bookedTime >= today\">TODAY</div>\r\n          </div>\r\n        </td>\r\n        <td>\r\n          {{ formatPhone(appo.phoneNum) }}\r\n          <div v-if=\"appo.contactName\">\r\n            {{ appo.contactName }}\r\n          </div>\r\n          <div v-if=\"appo.profileName && appo.profileName != appo.contactName\">\r\n            ({{ appo.profileName }})\r\n          </div>\r\n        </td>\r\n        <td>\r\n          {{ unixTimeToReminder(appo.bookedTime) }}\r\n          <div>\r\n            {{ unixToReadable(appo.bookedTime) }}\r\n          </div>\r\n          <div>{{ unixToHours(appo.bookedTime) }}</div>\r\n        </td>\r\n        <td>\r\n          {{ appo.serviceName }}\r\n          <div>{{ appo.category }}</div>\r\n        </td>\r\n        <td :style=\"{ color: appo.color }\">{{ appo.empAlias }}</td>\r\n        <td>\r\n          <div>{{ unixTimeToReminder(appo.date) }}</div>\r\n          {{ unixToReadable(appo.date) }}\r\n          <div>{{ secsToHours(appo.start) }} - {{ secsToHours(appo.end) }}</div>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <div class=\"flex\">\r\n    <button\r\n      id=\"show\"\r\n      class=\"blueBtn\"\r\n      v-if=\"appos?.length === limit\"\r\n      @click=\"showMore\"\r\n    >\r\n      Show More\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// lib\r\nimport { onBeforeRouteLeave, useRouter } from \"vue-router\";\r\nimport { ref, onMounted } from \"vue\";\r\nimport unixToReadable from \"@/lib/unixToReadable\";\r\nimport unixTimeToReminder from \"@/lib/unixTimeToReminder\";\r\nimport secsToHours from \"@/lib/secsToHours\";\r\nimport unixToHours from \"@/lib/unixToHours\";\r\nimport formatPhone from \"@/lib/formatPhone\";\r\nimport getTodayUnixTime from \"@/lib/getTodayUnixTime\";\r\n// apis\r\nimport searhBookings from \"./apis/searchBookings\";\r\nimport fetchLastTracked from \"./apis/fetchLastTracked\";\r\nimport { fetchNewAppoCount } from \"@/components/view-shell/drawer-navigation/apis/connectSocket\";\r\n\r\nexport default {\r\n  name: \"Booking-\",\r\n  setup() {\r\n    // resources\r\n    const query = ref(\"\");\r\n    const appos = ref([]);\r\n    const limit = ref(25);\r\n    const lastTracked = ref(null);\r\n    const today = getTodayUnixTime();\r\n    // lib\r\n    const router = useRouter();\r\n\r\n    // INPUT\r\n    const onSearchBookings = async () => {\r\n      appos.value = await searhBookings(query.value, limit.value);\r\n    };\r\n\r\n    const toAppoDetails = (date, appoId) => {\r\n      console.log(\"date, appoId\", date, appoId);\r\n      router.push(`/calendar/${date}/${appoId}`);\r\n    };\r\n\r\n    const showMore = async () => {\r\n      limit.value += 25;\r\n      await onSearchBookings();\r\n    };\r\n\r\n    // LIFECYCLE\r\n    onMounted(async () => {\r\n      // call api\r\n      lastTracked.value = await fetchLastTracked();\r\n      await onSearchBookings();\r\n    });\r\n\r\n    onBeforeRouteLeave((to, from, next) => {\r\n      fetchNewAppoCount();\r\n      next();\r\n    });\r\n\r\n    return {\r\n      today,\r\n      query,\r\n      appos,\r\n      lastTracked,\r\n      unixToReadable,\r\n      unixTimeToReminder,\r\n      secsToHours,\r\n      unixToHours,\r\n      formatPhone,\r\n      toAppoDetails,\r\n      onSearchBookings,\r\n      showMore,\r\n      limit,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  font-size: 14px;\r\n}\r\nth,\r\ntd {\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n\r\n  text-align: center;\r\n}\r\ntr {\r\n  border: 1px solid;\r\n}\r\n.row {\r\n  cursor: pointer;\r\n}\r\n.row:hover {\r\n  background: var(--hover);\r\n}\r\n.row:active {\r\n  background: var(--active);\r\n}\r\n.newCol {\r\n  padding: 0px;\r\n  font-size: 8px;\r\n}\r\n.flexBox {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 5px;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.newCell {\r\n  padding: 2px;\r\n  background: var(--trans-red);\r\n  color: white;\r\n  border-radius: 2px;\r\n}\r\n.todayCell {\r\n  padding: 2px;\r\n  background: var(--trans-blue);\r\n  color: white;\r\n  border-radius: 2px;\r\n}\r\n#search {\r\n  margin-bottom: 10px;\r\n}\r\n#show {\r\n  padding: 10px 30px;\r\n  margin: 10px;\r\n  border-radius: 20px;\r\n}\r\n.flex {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n</style>","import notifyReqError from \"@/stores/notifyReqError\";\r\n\r\nexport default async function searchBookings(query, limit) {\r\n  try {\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(`${baseURL}/api/appointments/search_bookings`, {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        query: query.trim(),\r\n        limit,\r\n      }),\r\n    });\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      // res holder\r\n      const appos = [];\r\n\r\n      // unpack\r\n      const tables = json.appos;\r\n      for (let row of tables) {\r\n        const [\r\n          appoId,\r\n          bookedTime,\r\n          empId,\r\n          empAlias,\r\n          color,\r\n          serviceId,\r\n          serviceName,\r\n          category,\r\n          phoneNumId,\r\n          phoneNum,\r\n          contactName,\r\n          profileName,\r\n          date,\r\n          start,\r\n          end,\r\n        ] = row;\r\n\r\n        const appo = {\r\n          appoId,\r\n          bookedTime,\r\n          empId,\r\n          empAlias,\r\n          color,\r\n          serviceId,\r\n          serviceName,\r\n          category,\r\n          phoneNumId,\r\n          phoneNum,\r\n          contactName,\r\n          profileName,\r\n          date,\r\n          start,\r\n          end,\r\n        };\r\n        appos.push(appo);\r\n      }\r\n\r\n      //  return results\r\n      return appos;\r\n    } else {\r\n      notifyReqError(json.message);\r\n      console.log(\"Failed to search booking history, message: \", json.message);\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n","export default async function fetchLastTracked() {\r\n  try {\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(`${baseURL}/api/appointments/get_last_tracked`, {\r\n      method: \"GET\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      // res holder\r\n      const lastTracked = json.last_tracked;\r\n      console.log(\"last: \", lastTracked);\r\n\r\n      return lastTracked;\r\n    } else {\r\n      // notifyReqError(json.message);\r\n      console.log(\r\n        \"Failed to last tracked on bookings, message: \",\r\n        json.message\r\n      );\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n","import { render } from \"./Booking.vue?vue&type=template&id=189bcebe&scoped=true\"\nimport script from \"./Booking.vue?vue&type=script&lang=js\"\nexport * from \"./Booking.vue?vue&type=script&lang=js\"\n\nimport \"./Booking.vue?vue&type=style&index=0&id=189bcebe&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-189bcebe\"]])\n\nexport default __exports__"],"names":["formatPhone","rawPhone","slice","console","log","formatted","length","secsToHours","secs","DateTime","fromObject","hour","plus","seconds","toFormat","unixTimeToReminder","unix","inputDate","fromSeconds","startOf","today","local","diff","toObject","daysDiff","Math","round","days","equals","isFuture","abs","unixToHours","dt","torontoDate","setZone","getTimezone","unixToReadable","unixTimestamp","dateTime","fromMillis","toLocaleString","weekday","month","day","year","class","key","_createElementBlock","_Fragment","_createElementVNode","id","placeholder","type","_cache","$event","$setup","query","onInput","args","onSearchBookings","style","_renderList","appos","appo","index","onClick","toAppoDetails","date","appoId","_hoisted_2","_hoisted_3","bookedTime","lastTracked","_hoisted_4","_createCommentVNode","_hoisted_5","_createTextVNode","_toDisplayString","phoneNum","contactName","_hoisted_6","profileName","_hoisted_7","serviceName","category","_normalizeStyle","color","empAlias","start","end","_hoisted_1","_hoisted_8","limit","showMore","async","searchBookings","baseURL","process","res","fetch","method","credentials","headers","body","JSON","stringify","trim","json","ok","tables","row","empId","serviceId","phoneNumId","push","notifyReqError","message","e","error","fetchLastTracked","last_tracked","name","setup","ref","getTodayUnixTime","router","useRouter","value","searhBookings","onMounted","onBeforeRouteLeave","to","from","next","fetchNewAppoCount","__exports__","render"],"sourceRoot":""}