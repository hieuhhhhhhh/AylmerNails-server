{"version":3,"file":"js/759.1a16a3e8.js","mappings":"+GAAe,SAASA,EAAYC,GAClC,GAA6B,OAAzBA,EAASC,MAAM,EAAG,GAAa,OAAOD,EAE1C,GADAE,QAAQC,IAAI,YACPH,EAAU,OACf,IAAII,EAAY,GAgBhB,OAdAJ,EAAWA,EAASC,MAAM,GAGxBG,EADEJ,EAASK,QAAU,EACTL,EACHA,EAASK,QAAU,EAChB,GAAGL,EAASC,MAAM,EAAG,MAAMD,EAASC,MAAM,KAE1C,GAAGD,EAASC,MAAM,EAAG,MAAMD,EAASC,MAC9C,EACA,MACGD,EAASC,MAAM,KAIfG,CACT,C,oGCnBe,SAASE,EAAYC,GAGlC,OAFAL,QAAQC,IAAI,WAELK,EAAAA,GAASC,WAAW,CAAEC,KAAM,IAChCC,KAAK,CAAEC,QAASL,IAChBM,SAAS,SACd,C,qECNe,SAASC,EAAmBC,GAGzC,GAFAb,QAAQC,IAAI,YAEPY,EACH,OAGF,MAAMC,EAAYR,EAAAA,GAASS,YAAYF,GAAMG,QAAQ,OAC/CC,EAAQX,EAAAA,GAASY,QAAQF,QAAQ,OAEjCG,EAAOL,EAAUK,KAAKF,EAAO,QAAQG,WACrCC,EAAWC,KAAKC,MAAMJ,EAAKK,MAEjC,GAAIV,EAAUW,OAAOR,GACnB,MAAO,QAET,GAAiB,IAAbI,EACF,MAAO,WACF,IAAkB,IAAdA,EACT,MAAO,YAGT,MAAMK,EAAWL,EAAW,EAAI,OAAS,OAEzC,OAAIC,KAAKK,IAAIN,IAAa,GACjB,GAAGK,KAAYJ,KAAKK,IAAIL,KAAKC,MAAMF,EAAW,QAC5CC,KAAKK,IAAIN,IAAa,EACxB,GAAGK,KAAYJ,KAAKK,IAAIL,KAAKC,MAAMF,EAAW,OAE9C,GAAGK,KAAYJ,KAAKK,IAAIN,KAEnC,C,+EC9Be,SAASO,EAAYf,GAClCb,QAAQC,IAAI,WAGZ,MAAM4B,EAAKvB,EAAAA,GAASS,YAAYF,GAG1BiB,EAAcD,EAAGE,SAAQC,EAAAA,EAAAA,MAG/B,OAAOF,EAAYnB,SAAS,SAC9B,C,+ECXe,SAASsB,EAAeC,GAGrC,GAFAlC,QAAQC,IAAI,YAEPiC,EACH,OAIF,MAAMC,EAAW7B,EAAAA,GAAS8B,WAA2B,IAAhBF,GAAsBH,SACzDC,EAAAA,EAAAA,MAIF,OAAOG,EAASE,eAAe,CAC7BC,QAAS,QACTC,MAAO,QACPC,IAAK,UACLC,KAAM,WAEV,C,8GCtBA,Y,GAyBYC,MAAM,U,GACHA,MAAM,W,GA1BrBC,IAAA,EA2BiBD,MAAM,W,GA3BvBC,IAAA,EA4BiBD,MAAM,a,GA5BvBC,IAAA,G,GAiEOD,MAAM,Q,0CAjEbE,EAAAA,EAAAA,IAAAC,EAAAA,GAAA,gBACEC,EAAAA,EAAAA,IAME,SALAC,GAAG,SACHC,KAAK,OACLC,YAAY,YAJhB,sBAAAC,EAAA,KAAAA,EAAA,GAAAC,GAKaC,EAAAC,MAAKF,GACbG,QAAKJ,EAAA,KAAAA,EAAA,OAAAK,IAAEH,EAAAI,kBAAAJ,EAAAI,oBAAAD,K,iBADCH,EAAAC,UAGXP,EAAAA,EAAAA,IAwDQ,eAvDNA,EAAAA,EAAAA,IAsDQ,2BArDNA,EAAAA,EAAAA,IAQK,YAPHA,EAAAA,EAAAA,IAAwB,MAApBJ,MAAM,YACVI,EAAAA,EAAAA,IAAoB,UAAhB,gBACJA,EAAAA,EAAAA,IAAoB,UAAhB,gBACJA,EAAAA,EAAAA,IAAgB,UAAZ,YACJA,EAAAA,EAAAA,IAAiB,UAAb,aACJA,EAAAA,EAAAA,IAAe,UAAX,WACJA,EAAAA,EAAAA,IAAmB,UAAf,gBAAU,mBAEhBF,EAAAA,EAAAA,IA2CKC,EAAAA,GAAA,MA9DXY,EAAAA,EAAAA,IAoBgCL,EAAAM,OApBhC,CAoBgBC,EAAMC,M,WADhBhB,EAAAA,EAAAA,IA2CK,MAzCHF,MAAM,MACLC,IAAKiB,EACLC,QAAKV,GAAEC,EAAAU,OAAOH,EAAKI,O,EAEpBjB,EAAAA,EAAAA,IAKK,KALLkB,EAKK,EAJHlB,EAAAA,EAAAA,IAGM,MAHNmB,EAGM,CAFuBN,EAAKO,WAAad,EAAAe,cAAW,WAAxDvB,EAAAA,EAAAA,IAAmE,MAAnEwB,EAA0D,SA3BtEC,EAAAA,EAAAA,IAAA,OA4ByCV,EAAKO,YAAcd,EAAAnC,QAAK,WAArD2B,EAAAA,EAAAA,IAAkE,MAAlE0B,EAAuD,WA5BnED,EAAAA,EAAAA,IAAA,YA+BQvB,EAAAA,EAAAA,IAOK,YAtCbyB,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IAgCapB,EAAAvD,YAAY8D,EAAKc,SAASC,WAAY,IACzC,IAAA5B,EAAAA,EAAAA,IAA0C,YAAA0B,EAAAA,EAAAA,IAAlCb,EAAKc,SAASE,aAAW,GAEtBhB,EAAKc,SAASG,aAAejB,EAAKc,SAASE,cAAW,WAAjE/B,EAAAA,EAAAA,IAEM,MArChBiC,EAmC6E,MAChEL,EAAAA,EAAAA,IAAGb,EAAKc,SAASG,aAAc,KAClC,KArCVP,EAAAA,EAAAA,IAAA,UAuCQvB,EAAAA,EAAAA,IAMK,YA7CbyB,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IAwCapB,EAAAxC,mBAAmB+C,EAAKO,aAAc,IACzC,IAAApB,EAAAA,EAAAA,IAEM,YAAA0B,EAAAA,EAAAA,IADDpB,EAAAnB,eAAe0B,EAAKO,aAAU,IAEnCpB,EAAAA,EAAAA,IAA6C,YAAA0B,EAAAA,EAAAA,IAArCpB,EAAAxB,YAAY+B,EAAKO,aAAU,MAErCpB,EAAAA,EAAAA,IAGK,YAjDbyB,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IA+Cab,EAAKmB,aAAc,IACtB,IAAAhC,EAAAA,EAAAA,IAA8B,YAAA0B,EAAAA,EAAAA,IAAtBb,EAAKoB,UAAQ,MAEvBjC,EAAAA,EAAAA,IAA2D,MAAtDkC,OAlDbC,EAAAA,EAAAA,IAAA,CAAAC,MAkD6BvB,EAAKuB,U,QAAYvB,EAAKwB,UAAQ,IACnDrC,EAAAA,EAAAA,IAGK,YAFHA,EAAAA,EAAAA,IAA8C,YAAA0B,EAAAA,EAAAA,IAAtCpB,EAAAvD,YAAY8D,EAAKyB,cAAW,IApD9Cb,EAAAA,EAAAA,IAoDwD,KAC9CC,EAAAA,EAAAA,IAAGb,EAAKgB,aAAW,MAErB7B,EAAAA,EAAAA,IAMK,YA7DbyB,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IAwDapB,EAAAxC,mBAAmB+C,EAAKI,OAAQ,IACnC,IAAAjB,EAAAA,EAAAA,IAEM,YAAA0B,EAAAA,EAAAA,IADDpB,EAAAnB,eAAe0B,EAAKI,OAAI,IAE7BjB,EAAAA,EAAAA,IAAsE,YAAA0B,EAAAA,EAAAA,IAA9DpB,EAAAhD,YAAYuD,EAAK0B,QAAS,OAAGb,EAAAA,EAAAA,IAAGpB,EAAAhD,YAAYuD,EAAK2B,MAAG,QA5DtEC,M,WAiEEzC,EAAAA,EAAAA,IASM,MATN0C,EASM,CALIpC,EAAAM,OAAOvD,SAAWiD,EAAAqC,QAAK,WAH/B7C,EAAAA,EAAAA,IAOS,UAzEbD,IAAA,EAmEMI,GAAG,OACHL,MAAM,UAELmB,QAAKX,EAAA,KAAAA,EAAA,OAAAK,IAAEH,EAAAsC,UAAAtC,EAAAsC,YAAAnC,KACT,iBAvELc,EAAAA,EAAAA,IAAA,a,qGCEesB,eAAeC,EAAoBvC,EAAOoC,GACvD,IAEE,MAAMI,EAAUC,GAGVC,QAAYC,MAChB,GAAGH,kDACH,CACEI,OAAQ,OACRC,YAAa,UACbC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBjD,MAAOA,EAAMkD,OACbd,YAKAe,QAAaT,EAAIS,OAGvB,GAAIT,EAAIU,GAAI,CAEV,MAAM/C,EAAQ,GAGRgD,EAASF,EAAK9C,MACpB,IAAK,IAAIiD,KAAOD,EAAQ,CACtB,MACEE,EACAC,EACAC,EACAC,EACApC,EACAC,EACAF,GACEiC,EAEEhD,EAAO0C,KAAKW,MAAMF,GACxBnD,EAAKiD,SAAWA,EAChBjD,EAAKc,SAAW,CAAEoC,SAAQlC,cAAaC,cAAaF,YACpDf,EAAKO,WAAa6C,EAElBrD,EAAMuD,KAAKtD,EACb,CAGA,OAAOD,CACT,EACEwD,EAAAA,EAAAA,GAAeV,EAAKW,SACpBnH,QAAQC,IACN,oDACAuG,EAAKW,QAGX,CAAE,MAAOC,GACPpH,QAAQqH,MAAM,qBAAsBD,EACtC,CACF,CC/DezB,eAAe2B,IAC5B,IAEE,MAAMzB,EAAUC,GAGVC,QAAYC,MAChB,GAAGH,+CACH,CACEI,OAAQ,MACRC,YAAa,UACbC,QAAS,CACP,eAAgB,sBAKhBK,QAAaT,EAAIS,OAGvB,GAAIT,EAAIU,GAAI,CAEV,MAAMtC,EAAcqC,EAAKe,aAGzB,OAFAvH,QAAQC,IAAI,SAAUkE,GAEfA,CACT,CAEEnE,QAAQC,IACN,gDACAuG,EAAKW,QAGX,CAAE,MAAOC,GACPpH,QAAQqH,MAAM,qBAAsBD,EACtC,CACF,C,cFuDA,GACEI,KAAM,gBACNC,KAAAA,GAEE,MAAMpE,GAAQqE,EAAAA,EAAAA,IAAI,IACZhE,GAAQgE,EAAAA,EAAAA,IAAI,IACZvD,GAAcuD,EAAAA,EAAAA,IAAI,MAClBjC,GAAQiC,EAAAA,EAAAA,IAAI,IACZzG,GAAQ0G,EAAAA,EAAAA,KAERC,GAASC,EAAAA,EAAAA,MAGTrE,EAAmBmC,UACvBjC,EAAMoE,YAAclC,EAAoBvC,EAAMyE,MAAOrC,EAAMqC,MAAM,EAG7DhE,EAAUC,IACd6D,EAAOX,KAAK,aAAalD,IAAO,EAG5B2B,EAAWC,UACfF,EAAMqC,OAAS,SACTtE,GAAkB,EAc1B,OAVAuE,EAAAA,EAAAA,KAAUpC,UACRxB,EAAY2D,YAAcR,UACpB9D,GAAkB,KAG1BwE,EAAAA,EAAAA,KAAmB,CAACC,EAAIC,EAAMC,MAC5BC,EAAAA,EAAAA,MACAD,GAAM,IAGD,CACLlH,QACAoC,QACAK,QACAS,cACAlC,eAAc,IACdrB,mBAAkB,IAClBgB,YAAW,IACXxB,YAAW,IACXP,YAAW,IACX2D,mBACAM,SACA4B,WACAD,QAEJ,G,UGxIF,MAAM4C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://frontend/./src/lib/formatPhone.js","webpack://frontend/./src/lib/secsToHours.js","webpack://frontend/./src/lib/unixTimeToReminder.js","webpack://frontend/./src/lib/unixToHours.js","webpack://frontend/./src/lib/unixToReadable.js","webpack://frontend/./src/views/activities/Canceled.vue","webpack://frontend/./src/views/activities/apis/searchCanceledAppos.js","webpack://frontend/./src/views/activities/apis/fetchCanceledLastTracked.js","webpack://frontend/./src/views/activities/Canceled.vue?a8dd"],"sourcesContent":["export default function formatPhone(rawPhone) {\r\n  if (rawPhone.slice(0, 2) !== \"+1\") return rawPhone;\r\n  console.log(\"calling\");\r\n  if (!rawPhone) return;\r\n  let formatted = \"\";\r\n\r\n  rawPhone = rawPhone.slice(2);\r\n\r\n  if (rawPhone.length <= 3) {\r\n    formatted = rawPhone;\r\n  } else if (rawPhone.length <= 6) {\r\n    formatted = `${rawPhone.slice(0, 3)} ${rawPhone.slice(3)}`;\r\n  } else {\r\n    formatted = `${rawPhone.slice(0, 3)} ${rawPhone.slice(\r\n      3,\r\n      6\r\n    )} ${rawPhone.slice(6)}`;\r\n  }\r\n\r\n  // return result\r\n  return formatted;\r\n}\r\n","import { DateTime } from \"luxon\";\r\n\r\nexport default function secsToHours(secs) {\r\n  console.log(\"calling\");\r\n\r\n  return DateTime.fromObject({ hour: 0 })\r\n    .plus({ seconds: secs })\r\n    .toFormat(\"h:mm a\");\r\n}\r\n","import { DateTime } from \"luxon\";\r\n\r\nexport default function unixTimeToReminder(unix) {\r\n  console.log(\"calling\");\r\n\r\n  if (!unix) {\r\n    return;\r\n  }\r\n\r\n  const inputDate = DateTime.fromSeconds(unix).startOf(\"day\");\r\n  const today = DateTime.local().startOf(\"day\");\r\n\r\n  const diff = inputDate.diff(today, \"days\").toObject();\r\n  const daysDiff = Math.round(diff.days);\r\n\r\n  if (inputDate.equals(today)) {\r\n    return \"Today\";\r\n  }\r\n  if (daysDiff === 1) {\r\n    return \"Tomorrow\";\r\n  } else if (daysDiff === -1) {\r\n    return \"Yesterday\";\r\n  }\r\n\r\n  const isFuture = daysDiff > 0 ? \"next\" : \"last\";\r\n\r\n  if (Math.abs(daysDiff) >= 30) {\r\n    return `${isFuture} ${Math.abs(Math.round(daysDiff / 30))}m`;\r\n  } else if (Math.abs(daysDiff) >= 7) {\r\n    return `${isFuture} ${Math.abs(Math.round(daysDiff / 7))}w`;\r\n  } else {\r\n    return `${isFuture} ${Math.abs(daysDiff)}d`;\r\n  }\r\n}\r\n","import { DateTime } from \"luxon\";\r\nimport getTimezone from \"./getTimeZone\";\r\n\r\nexport default function unixToHours(unix) {\r\n  console.log(\"calling\");\r\n\r\n  // Create a Luxon DateTime instance from the Unix timestamp (seconds)\r\n  const dt = DateTime.fromSeconds(unix);\r\n\r\n  // Convert to Toronto timezone\r\n  const torontoDate = dt.setZone(getTimezone());\r\n\r\n  // Format the DateTime to return only the hour in 24-hour format (e.g., \"09\" or \"17\")\r\n  return torontoDate.toFormat(\"h:mm a\");\r\n}\r\n","import { DateTime } from \"luxon\";\r\nimport getTimezone from \"./getTimeZone\";\r\n\r\nexport default function unixToReadable(unixTimestamp) {\r\n  console.log(\"calling\");\r\n\r\n  if (!unixTimestamp) {\r\n    return;\r\n  }\r\n\r\n  // Convert the Unix timestamp to a Luxon DateTime object in the specified timezone\r\n  const dateTime = DateTime.fromMillis(unixTimestamp * 1000).setZone(\r\n    getTimezone()\r\n  );\r\n\r\n  // Format the date with short weekday and month (e.g., \"Mon, Jan 20, 2025\")\r\n  return dateTime.toLocaleString({\r\n    weekday: \"short\",\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n    year: \"numeric\",\r\n  });\r\n}\r\n","<template>\r\n  <input\r\n    id=\"search\"\r\n    type=\"text\"\r\n    placeholder=\"Search...\"\r\n    v-model=\"query\"\r\n    @input=\"onSearchCanceled\"\r\n  />\r\n  <table>\r\n    <tbody>\r\n      <tr>\r\n        <th class=\"newCol\"></th>\r\n        <th>Canceled by</th>\r\n        <th>Canceled on</th>\r\n        <th>Service</th>\r\n        <th>Employee</th>\r\n        <th>Client</th>\r\n        <th>Booked for</th>\r\n      </tr>\r\n      <tr\r\n        v-for=\"(appo, index) in appos\"\r\n        class=\"row\"\r\n        :key=\"index\"\r\n        @click=\"toDate(appo.date)\"\r\n      >\r\n        <td class=\"newCol\">\r\n          <div class=\"flexBox\">\r\n            <div class=\"newCell\" v-if=\"appo.cancelTime > lastTracked\">NEW</div>\r\n            <div class=\"todayCell\" v-if=\"appo.cancelTime >= today\">TODAY</div>\r\n          </div>\r\n        </td>\r\n        <td>\r\n          {{ formatPhone(appo.canceler.phoneNum) }}\r\n          <div>{{ appo.canceler.contactName }}</div>\r\n\r\n          <div v-if=\"appo.canceler.profileName != appo.canceler.contactName\">\r\n            ({{ appo.canceler.profileName }})\r\n          </div>\r\n        </td>\r\n        <td>\r\n          {{ unixTimeToReminder(appo.cancelTime) }}\r\n          <div>\r\n            {{ unixToReadable(appo.cancelTime) }}\r\n          </div>\r\n          <div>{{ unixToHours(appo.cancelTime) }}</div>\r\n        </td>\r\n        <td>\r\n          {{ appo.serviceName }}\r\n          <div>{{ appo.category }}</div>\r\n        </td>\r\n        <td :style=\"{ color: appo.color }\">{{ appo.empAlias }}</td>\r\n        <td>\r\n          <div>{{ formatPhone(appo.phoneNumber) }}</div>\r\n          {{ appo.contactName }}\r\n        </td>\r\n        <td>\r\n          {{ unixTimeToReminder(appo.date) }}\r\n          <div>\r\n            {{ unixToReadable(appo.date) }}\r\n          </div>\r\n          <div>{{ secsToHours(appo.start) }} - {{ secsToHours(appo.end) }}</div>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <div class=\"flex\">\r\n    <button\r\n      id=\"show\"\r\n      class=\"blueBtn\"\r\n      v-if=\"appos?.length === limit\"\r\n      @click=\"showMore\"\r\n    >\r\n      Show More\r\n    </button>\r\n  </div>\r\n</template>\r\n<script>\r\n// lib\r\nimport { onMounted, ref } from \"vue\";\r\nimport unixToReadable from \"@/lib/unixToReadable\";\r\nimport unixTimeToReminder from \"@/lib/unixTimeToReminder\";\r\nimport secsToHours from \"@/lib/secsToHours\";\r\nimport unixToHours from \"@/lib/unixToHours\";\r\nimport { onBeforeRouteLeave, useRouter } from \"vue-router\";\r\nimport formatPhone from \"@/lib/formatPhone\";\r\nimport getTodayUnixTime from \"@/lib/getTodayUnixTime\";\r\n// apis\r\nimport searchCanceledAppos from \"./apis/searchCanceledAppos\";\r\nimport fetchLastTracked from \"./apis/fetchCanceledLastTracked\";\r\nimport { fetchNewCanceledCount } from \"@/components/view-shell/drawer-navigation/apis/connectSocket\";\r\n\r\nexport default {\r\n  name: \"CanceledAppos\",\r\n  setup() {\r\n    // resoures\r\n    const query = ref(\"\");\r\n    const appos = ref([]);\r\n    const lastTracked = ref(null);\r\n    const limit = ref(25);\r\n    const today = getTodayUnixTime();\r\n    // lib\r\n    const router = useRouter();\r\n\r\n    // INPUT\r\n    const onSearchCanceled = async () => {\r\n      appos.value = await searchCanceledAppos(query.value, limit.value);\r\n    };\r\n\r\n    const toDate = (date) => {\r\n      router.push(`/calendar/${date}`);\r\n    };\r\n\r\n    const showMore = async () => {\r\n      limit.value += 25;\r\n      await onSearchCanceled();\r\n    };\r\n\r\n    // LIFECYCLE\r\n    onMounted(async () => {\r\n      lastTracked.value = await fetchLastTracked();\r\n      await onSearchCanceled();\r\n    });\r\n\r\n    onBeforeRouteLeave((to, from, next) => {\r\n      fetchNewCanceledCount();\r\n      next();\r\n    });\r\n\r\n    return {\r\n      today,\r\n      query,\r\n      appos,\r\n      lastTracked,\r\n      unixToReadable,\r\n      unixTimeToReminder,\r\n      unixToHours,\r\n      secsToHours,\r\n      formatPhone,\r\n      onSearchCanceled,\r\n      toDate,\r\n      showMore,\r\n      limit,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  font-size: 14px;\r\n}\r\nth,\r\ntd {\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n\r\n  text-align: center;\r\n}\r\ntr {\r\n  border: 1px solid;\r\n}\r\n.newCol {\r\n  padding: 0px;\r\n  font-size: 8px;\r\n}\r\n.flexBox {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 5px;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.newCell {\r\n  padding: 2px;\r\n  background: var(--trans-red);\r\n  color: white;\r\n  border-radius: 2px;\r\n}\r\n#search {\r\n  margin-bottom: 10px;\r\n}\r\n.row:hover {\r\n  background: var(--hover);\r\n}\r\n.row:active {\r\n  background: var(--active);\r\n}\r\n.row {\r\n  cursor: pointer;\r\n}\r\n.todayCell {\r\n  padding: 2px;\r\n  background: var(--trans-blue);\r\n  color: white;\r\n  border-radius: 2px;\r\n}\r\n#show {\r\n  padding: 10px 30px;\r\n  margin: 10px;\r\n  border-radius: 20px;\r\n}\r\n.flex {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n</style>\r\n","import notifyReqError from \"@/stores/notifyReqError\";\r\n\r\nexport default async function searchCanceledAppos(query, limit) {\r\n  try {\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(\r\n      `${baseURL}/api/appointments/search_canceled_appointments`,\r\n      {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          query: query.trim(),\r\n          limit,\r\n        }),\r\n      }\r\n    );\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      // res holder\r\n      const appos = [];\r\n\r\n      // unpack\r\n      const tables = json.appos;\r\n      for (let row of tables) {\r\n        const [\r\n          cancelId,\r\n          userId,\r\n          details,\r\n          time,\r\n          contactName,\r\n          profileName,\r\n          phoneNum,\r\n        ] = row;\r\n\r\n        const appo = JSON.parse(details);\r\n        appo.cancelId = cancelId;\r\n        appo.canceler = { userId, contactName, profileName, phoneNum };\r\n        appo.cancelTime = time;\r\n\r\n        appos.push(appo);\r\n      }\r\n\r\n      //  return results\r\n      return appos;\r\n    } else {\r\n      notifyReqError(json.message);\r\n      console.log(\r\n        \"Failed to search canceled appointments, message: \",\r\n        json.message\r\n      );\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n","export default async function fetchLastTracked() {\r\n  try {\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(\r\n      `${baseURL}/api/appointments/get_canceled_last_tracked`,\r\n      {\r\n        method: \"GET\",\r\n        credentials: \"include\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    );\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      // res holder\r\n      const lastTracked = json.last_tracked;\r\n      console.log(\"last: \", lastTracked);\r\n\r\n      return lastTracked;\r\n    } else {\r\n      // notifyReqError(json.message);\r\n      console.log(\r\n        \"Failed to last tracked on bookings, message: \",\r\n        json.message\r\n      );\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n","import { render } from \"./Canceled.vue?vue&type=template&id=5917ea71&scoped=true\"\nimport script from \"./Canceled.vue?vue&type=script&lang=js\"\nexport * from \"./Canceled.vue?vue&type=script&lang=js\"\n\nimport \"./Canceled.vue?vue&type=style&index=0&id=5917ea71&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5917ea71\"]])\n\nexport default __exports__"],"names":["formatPhone","rawPhone","slice","console","log","formatted","length","secsToHours","secs","DateTime","fromObject","hour","plus","seconds","toFormat","unixTimeToReminder","unix","inputDate","fromSeconds","startOf","today","local","diff","toObject","daysDiff","Math","round","days","equals","isFuture","abs","unixToHours","dt","torontoDate","setZone","getTimezone","unixToReadable","unixTimestamp","dateTime","fromMillis","toLocaleString","weekday","month","day","year","class","key","_createElementBlock","_Fragment","_createElementVNode","id","type","placeholder","_cache","$event","$setup","query","onInput","args","onSearchCanceled","_renderList","appos","appo","index","onClick","toDate","date","_hoisted_2","_hoisted_3","cancelTime","lastTracked","_hoisted_4","_createCommentVNode","_hoisted_5","_createTextVNode","_toDisplayString","canceler","phoneNum","contactName","profileName","_hoisted_6","serviceName","category","style","_normalizeStyle","color","empAlias","phoneNumber","start","end","_hoisted_1","_hoisted_7","limit","showMore","async","searchCanceledAppos","baseURL","process","res","fetch","method","credentials","headers","body","JSON","stringify","trim","json","ok","tables","row","cancelId","userId","details","time","parse","push","notifyReqError","message","e","error","fetchLastTracked","last_tracked","name","setup","ref","getTodayUnixTime","router","useRouter","value","onMounted","onBeforeRouteLeave","to","from","next","fetchNewCanceledCount","__exports__","render"],"sourceRoot":""}