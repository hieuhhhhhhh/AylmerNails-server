"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[360],{5868:function(e,t,n){n.d(t,{A:function(){return c}});n(4114);var o=n(8199);async function c(){try{const e="",t=await fetch(`${e}/api/employees/get_colors`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),n=await t.json();if(t.ok){const e=[],t=n.colors;for(const n of t){const[t,o,c]=n,l={colorId:t,name:o,code:c};e.push(l)}return e}(0,o.A)(n.message),console.log("Failed to fetch color list, message: ",n.message)}catch(e){console.error("Unexpected Error: ",e)}}},179:function(e,t,n){n.d(t,{A:function(){return l}});n(4114),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(8992),n(3949);var o=n(445),c=n(8199);async function l(e){try{const t="",n=await fetch(`${t}/api/employees/get_employee_services/${e}/${(0,o.A)()}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),l=await n.json();if(n.ok){const e=r(l.services,l.categories),t=i(l.services);return console.log("categories: ",e),console.log("ES_ids: ",t),{categories:e,ES_ids:t}}(0,c.A)(l.message),console.log("Failed to fetch employee's services, message: ",l.message)}catch(t){console.error("Unexpected Error: ",t)}}function r(e,t){const n={null:{cate_id:null,cate_name:"Unclassified",services:[]}};t.forEach((e=>{const[t,o]=e;n[t]={cate_id:t,cate_name:o,services:[]}})),e.forEach((e=>{const[t,o,c,l]=e;n[c].services.push({service_id:t,service_name:o,cate_id:c,employee_id:l})})),!n[null].services.length>0&&delete n[null];const o=Object.values(n).sort(((e,t)=>t.services.length-e.services.length));return o}function i(e){const t=new Set;return e.forEach((e=>{const[n,,,o]=e;o&&t.add(n)})),t}},1360:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var o=n(6768),c=n(5130),l=n(4232);const r={id:"flexBox"},i={id:"flexBox"},s=["value"],a={id:"flexBox"},d={id:"flexBox"},u={id:"flexBox"},h={id:"categories"},v={id:"flex"},k={id:"confirm",class:"greenBtn"};function p(e,t,n,p,m,g){const y=(0,o.g2)("Category"),f=(0,o.g2)("FontAwesomeIcon");return(0,o.uX)(),(0,o.CE)("form",{onSubmit:t[5]||(t[5]=(0,c.D$)(((...e)=>g.onSubmit&&g.onSubmit(...e)),["prevent"]))},[(0,o.Lk)("table",null,[t[12]||(t[12]=(0,o.Lk)("colgroup",null,[(0,o.Lk)("col",{style:{width:"auto"}}),(0,o.Lk)("col",{style:{width:"80%"}})],-1)),(0,o.Lk)("tbody",null,[(0,o.Lk)("tr",null,[t[6]||(t[6]=(0,o.Lk)("th",null,"Name:",-1)),(0,o.Lk)("td",r,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>m.name=e),required:""},null,512),[[c.Jo,m.name]])])]),(0,o.Lk)("tr",null,[t[7]||(t[7]=(0,o.Lk)("th",null,"Color:",-1)),(0,o.Lk)("td",i,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>m.colorId=e),style:(0,l.Tr)({backgroundColor:g.getColor(),color:"black"}),required:""},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(m.colors,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.colorId,value:e.colorId,style:(0,l.Tr)({backgroundColor:e.code,color:"black"})},(0,l.v_)(e.name),13,s)))),128))],4),[[c.u1,m.colorId]])])]),(0,o.Lk)("tr",null,[t[8]||(t[8]=(0,o.Lk)("th",null,[(0,o.eW)("Favorite Length:"),(0,o.Lk)("br"),(0,o.eW)("(minutes)")],-1)),(0,o.Lk)("td",a,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>m.interval1=e),required:"",min:5,step:"1"},null,512),[[c.Jo,m.interval1]])])]),(0,o.Lk)("tr",null,[t[9]||(t[9]=(0,o.Lk)("th",null,[(0,o.eW)(" Second Favorite Length:"),(0,o.Lk)("br"),(0,o.eW)(" (Optional) ")],-1)),(0,o.Lk)("td",d,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>m.interval2=e),min:5,step:"1"},null,512),[[c.Jo,m.interval2]])])]),(0,o.Lk)("tr",null,[t[10]||(t[10]=(0,o.Lk)("th",null,[(0,o.eW)(" Ideal Percentage:"),(0,o.Lk)("br"),(0,o.eW)(" (should be > 40) ")],-1)),(0,o.Lk)("td",u,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=e=>m.intervalPercent=e),required:"",min:10,max:100,step:"1"},null,512),[[c.Jo,m.intervalPercent]])])]),t[11]||(t[11]=(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Services:")],-1))])]),(0,o.Lk)("div",h,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(m.categories,((e,t)=>((0,o.uX)(),(0,o.Wv)(y,{key:t,isEditing:!0,category:e,checkService:g.checkService,uncheckService:g.uncheckService,uncheckedAll:!0},null,8,["category","checkService","uncheckService"])))),128))]),t[15]||(t[15]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",v,[(0,o.Lk)("button",k,[(0,o.bF)(f,{icon:m.saveIcon},null,8,["icon"]),t[13]||(t[13]=(0,o.eW)()),t[14]||(t[14]=(0,o.Lk)("b",null,"Confirm New Employee",-1))])])],32)}n(4114),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(8992),n(2577);var m=n(8249),g=n(2353),y=n(8264),f=n(179),L=(n(1454),n(8199));async function b(e,t,n,o,c){try{const l="";t=t.map((e=>60*e));const r=await fetch(`${l}/api/employees/add_employee`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({alias:e,key_intervals:t,interval_percent:n,color_id:o,service_ids:c})}),i=await r.json();if(r.ok)return i.added_employee_id;(0,L.A)(i.message),console.log("Failed to add employee, message: ",i.message)}catch(l){console.error("Unexpected Error: ",l)}}var _=n(5868),S={components:{FontAwesomeIcon:m.gc,Category:y.A},data(){return{saveIcon:g.e68,categories:[],colors:[],colorCode:"",intervalPercent:null,ESs:new Set,name:"",colorId:null,interval1:null,interval2:null}},methods:{getColor(){const e=this.colors.find((e=>e.colorId===this.colorId));return e?e.code:"gray"},checkService(e){this.ESs.add(e)},uncheckService(e){this.ESs.delete(e)},async onSubmit(){const e=[];e.push(this.interval1),this.interval2?e.push(this.interval2):e.push(this.interval1),console.log("intervals: ",e);const t=await b(this.name,e,this.intervalPercent,this.colorId,Array.from(this.ESs));t&&this.$router.push(`/employees/details/${t}`)}},async created(){const[e,t]=await Promise.all([(0,f.A)(1),(0,_.A)()]);this.categories=e.categories,this.colors=t}},C=n(1241);const E=(0,C.A)(S,[["render",p],["__scopeId","data-v-40dc42db"]]);var I=E},8264:function(e,t,n){n.d(t,{A:function(){return h}});var o=n(6768),c=n(4232);const l={key:0,id:"category"},r={id:"title"},i=["value","checked","disabled"];function s(e,t,n,s,a,d){return n.category.services.length?((0,o.uX)(),(0,o.CE)("div",l,[(0,o.Lk)("div",r,(0,c.v_)(n.category.cate_name),1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.category.services,((e,l)=>((0,o.uX)(),(0,o.CE)("div",{key:l},[(0,o.Lk)("div",null,[(0,o.Lk)("label",null,[(0,o.Lk)("input",{id:"check",type:"checkbox",value:e.service_id,checked:e.employee_id&&!n.uncheckedAll,onChange:t[0]||(t[0]=(...e)=>d.updateChecked&&d.updateChecked(...e)),disabled:!n.isEditing},null,40,i),(0,o.eW)(" "+(0,c.v_)(e.service_name),1)])])])))),128))])):(0,o.Q3)("",!0)}var a={name:"Category-",props:{category:Object,isEditing:Boolean,uncheckedAll:Boolean,checkService:Function,uncheckService:Function},methods:{updateChecked(e){const t=e.target.value;!0===e.target.checked?this.checkService(t):this.uncheckService(t)}}},d=n(1241);const u=(0,d.A)(a,[["render",s],["__scopeId","data-v-7e188470"]]);var h=u}}]);
//# sourceMappingURL=360.e3b7f43b.js.map