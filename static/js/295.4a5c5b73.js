"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[295],{6744:function(e,n,t){t.d(n,{A:function(){return i}});var o=t(4116),l=t(6156);function i(e){if(console.log("calling"),!e)return null;const n=o.c9.fromISO(e,{zone:(0,l.A)()}),t=n.toSeconds();return console.log("date to unix: ",t),t}},7907:function(e,n,t){t.d(n,{A:function(){return i}});t(4114),t(8992),t(3949);var o=t(445),l=t(8199);async function i(){try{const e="",n=await fetch(`${e}/api/employees/get_employees/${(0,o.A)()}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await n.json();if(n.ok){const e=t.all_employees,n=[];return e.forEach((e=>{const[t,o,l,i,s]=e,u={employee_id:t,alias:o,last_date:l,is_active:i,color:s};n.push(u)})),console.log("emp: ",n),n}(0,l.A)(t.message),console.log("Failed to fetch employee list, message: ",t.message)}catch(e){console.error("Unexpected Error: ",e)}}},1001:function(e,n,t){t.d(n,{A:function(){return l}});t(4114),t(8992),t(3949);var o=t(8199);async function l(){try{const e="",n=await fetch(`${e}/api/services/get_categories`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await n.json();if(n.ok){const e=t.categories,n=[];return e.forEach((e=>{const[t,o]=e,l={cate_id:t,name:o};n.push(l)})),n}(0,o.A)(t.message),console.log("Failed to fetch categories list, message: ",t.message)}catch(e){console.error("Unexpected Error: ",e)}}},8295:function(e,n,t){t.r(n),t.d(n,{default:function(){return J}});var o=t(6768),l=t(5130),i=t(4232);const s={id:"flexBox"},u={id:"flexBox"},a=["value"],c={id:"flexBox"},r={id:"flexBox"},d={id:"flexBox"},p={id:"flexBox"},k={key:0},m=["value"],h={id:"addOn",type:"button"},L={id:"flex"},v={id:"confirm",class:"greenBtn"};function g(e,n,t,g,f,b){const y=(0,o.g2)("AOSsEdit"),A=(0,o.g2)("FontAwesomeIcon");return(0,o.uX)(),(0,o.CE)("form",{onSubmit:n[8]||(n[8]=(0,l.D$)(((...e)=>b.onSubmit&&b.onSubmit(...e)),["prevent"]))},[(0,o.Lk)("table",null,[n[18]||(n[18]=(0,o.Lk)("colgroup",null,[(0,o.Lk)("col",{style:{width:"auto"}}),(0,o.Lk)("col",{style:{width:"80%"}})],-1)),(0,o.Lk)("tbody",null,[(0,o.Lk)("tr",null,[n[9]||(n[9]=(0,o.Lk)("th",null,"Name:",-1)),(0,o.Lk)("td",s,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>f.name=e),required:""},null,512),[[l.Jo,f.name]])])]),(0,o.Lk)("tr",null,[n[11]||(n[11]=(0,o.Lk)("th",null,"Category:",-1)),(0,o.Lk)("td",u,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":n[1]||(n[1]=e=>f.categoryId=e),required:""},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(f.categories,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.cate_id,value:e.cate_id},(0,i.v_)(e.name),9,a)))),128)),n[10]||(n[10]=(0,o.Lk)("option",{value:"null"},"none",-1))],512),[[l.u1,f.categoryId]])])]),(0,o.Lk)("tr",null,[n[12]||(n[12]=(0,o.Lk)("th",null,"Starting Date:",-1)),(0,o.Lk)("td",c,[(0,o.bo)((0,o.Lk)("input",{type:"date",id:"datePicker","onUpdate:modelValue":n[2]||(n[2]=e=>f.date=e),required:""},null,512),[[l.Jo,f.date]])])]),(0,o.Lk)("tr",null,[n[13]||(n[13]=(0,o.Lk)("th",null,[(0,o.eW)(" Default Length:"),(0,o.Lk)("br"),(0,o.eW)(" (minutes) ")],-1)),(0,o.Lk)("td",r,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":n[3]||(n[3]=e=>f.length=e),required:"",min:5,step:"1"},null,512),[[l.Jo,f.length]])])]),(0,o.Lk)("tr",null,[n[14]||(n[14]=(0,o.Lk)("th",null,"Starting Price $:",-1)),(0,o.Lk)("td",d,[(0,o.bo)((0,o.Lk)("input",{type:"number",step:"any","onUpdate:modelValue":n[4]||(n[4]=e=>f.price=e),min:1},null,512),[[l.Jo,f.price]])])]),(0,o.Lk)("tr",null,[n[15]||(n[15]=(0,o.Lk)("th",null,[(0,o.Lk)("label",{for:"check"}," Available for online booking ")],-1)),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{id:"check",type:"checkbox","onUpdate:modelValue":n[5]||(n[5]=e=>f.clientCanBook=e)},null,512),[[l.lH,f.clientCanBook]])])]),(0,o.Lk)("tr",null,[n[16]||(n[16]=(0,o.Lk)("th",null,"Description:",-1)),(0,o.Lk)("td",p,[(0,o.bo)((0,o.Lk)("textarea",{id:"description",type:"text",rows:"3","onUpdate:modelValue":n[6]||(n[6]=e=>f.description=e)},null,512),[[l.Jo,f.description]])])]),(0,o.Lk)("tr",null,[n[17]||(n[17]=(0,o.Lk)("th",null,"Technicians:",-1)),(0,o.Lk)("td",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(f.employees,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.employee_id},[e.is_active?((0,o.uX)(),(0,o.CE)("div",k,[(0,o.bo)((0,o.Lk)("input",{id:"check",type:"checkbox",value:e.employee_id,"onUpdate:modelValue":n[7]||(n[7]=e=>f.checkedEmp=e)},null,8,m),[[l.lH,f.checkedEmp]]),(0,o.Lk)("label",null,(0,i.v_)(e.alias),1)])):(0,o.Q3)("",!0)])))),128))])])])]),n[22]||(n[22]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",h,[n[19]||(n[19]=(0,o.Lk)("b",null,"Questions & Answers:",-1)),(0,o.bF)(y,{AOSs:f.AOSs,editAOS:b.editAOS,removeOption:b.removeOption,addOption:b.addOption,addQuestion:b.addQuestion,removeQuestion:b.removeQuestion,onInputQuestion:b.onInputQuestion},null,8,["AOSs","editAOS","removeOption","addOption","addQuestion","removeQuestion","onInputQuestion"])]),(0,o.Lk)("div",L,[(0,o.Lk)("button",v,[(0,o.bF)(A,{icon:f.saveIcon},null,8,["icon"]),n[20]||(n[20]=(0,o.eW)()),n[21]||(n[21]=(0,o.Lk)("b",null,"Confirm New Service",-1))])])],32)}t(4114);var f=t(8249),b=t(2353);const y={id:"title"},A=["onClick"],I=["value","onInput"],O={border:"1"},S={id:"flexBox"},_=["onClick"],C=["value","onInput"],x=["value","onInput"],E={colspan:"2"},F=["onClick"];function Q(e,n,t,s,u,a){const c=(0,o.g2)("FontAwesomeIcon");return(0,o.uX)(),(0,o.CE)(o.FK,null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.AOSs,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s},[(0,o.Lk)("div",y,[(0,o.Lk)("button",{class:"redBtn",id:"smallBtn",onClick:(0,l.D$)((e=>t.removeQuestion(s)),["prevent"])},[(0,o.bF)(c,{icon:u.removeIcon},null,8,["icon"])],8,A),n[1]||(n[1]=(0,o.eW)("  ")),(0,o.Lk)("b",null,"Question "+(0,i.v_)(s+1),1),n[2]||(n[2]=(0,o.eW)(": ")),(0,o.Lk)("input",{id:"prompt",type:"text",value:e.prompt,onInput:e=>t.onInputQuestion(s,e.target.value),required:""},null,40,I)]),(0,o.Lk)("table",O,[n[5]||(n[5]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Answer"),(0,o.Lk)("th",null,[(0,o.eW)("Duration Increase (minutes) "),(0,o.Lk)("br")])])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.options,((e,i)=>((0,o.uX)(),(0,o.CE)("tr",{key:i},[(0,o.Lk)("td",null,[(0,o.Lk)("div",S,[i>0?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"redBtn",id:"smallBtn",onClick:(0,l.D$)((e=>t.removeOption(s,i)),["prevent"])},[(0,o.bF)(c,{icon:u.removeIcon},null,8,["icon"])],8,_)):(0,o.Q3)("",!0),n[3]||(n[3]=(0,o.eW)("  ")),(0,o.Lk)("input",{id:"nameInput",type:"text",value:e.name,onInput:e=>a.onInputOption(s,i,e),required:""},null,40,C)])]),(0,o.Lk)("td",null,[(0,o.Lk)("input",{type:"number",value:e.length_offset/60,onInput:e=>a.onInputLength(s,i,e),required:"",step:"1"},null,40,x)])])))),128)),(0,o.Lk)("tr",null,[(0,o.Lk)("td",E,[(0,o.Lk)("button",{class:"orangeBtn",id:"smallBtn",onClick:(0,l.D$)((e=>t.addOption(s)),["prevent"])},[(0,o.bF)(c,{icon:u.plusIcon},null,8,["icon"]),n[4]||(n[4]=(0,o.eW)(" Add Option "))],8,F)])])])]),n[6]||(n[6]=(0,o.Lk)("div",{id:"note"},[(0,o.eW)("* "),(0,o.Lk)("i",null,"Duration Increase"),(0,o.eW)(" can be negative")],-1)),n[7]||(n[7]=(0,o.Lk)("div",{id:"note"},"* Questions & Answers can not be updated once created",-1)),n[8]||(n[8]=(0,o.Lk)("br",null,null,-1))])))),128)),(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"orangeBtn",onClick:n[0]||(n[0]=(0,l.D$)(((...e)=>t.addQuestion&&t.addQuestion(...e)),["prevent"]))},[(0,o.bF)(c,{icon:u.plusIcon},null,8,["icon"]),n[9]||(n[9]=(0,o.eW)(" Add Question "))])]),n[10]||(n[10]=(0,o.Lk)("br",null,null,-1))],64)}var w={props:{AOSs:Object,editAOS:Function,removeOption:Function,addOption:Function,addQuestion:Function,removeQuestion:Function,onInputQuestion:Function},components:{FontAwesomeIcon:f.gc},data(){return{plusIcon:b.QLR,removeIcon:b.sjs}},methods:{onInputLength(e,n,t){this.editAOS(e,n,"length_offset",60*t.target.value)},onInputOption(e,n,t){this.editAOS(e,n,"name",t.target.value)}}},B=t(1241);const X=(0,B.A)(w,[["render",Q],["__scopeId","data-v-f07112f6"]]);var $=X,U=t(7907),W=t(1001),D=(t(8992),t(3949),t(6744)),j=t(8199);async function V(e,n,t,o,l,i,s,u,a){try{const c=[];i.forEach((e=>{c.push(e.prompt);const n=[];e.options.forEach((e=>{n.push(e.name),n.push(e.length_offset)})),c.push(n)}));const r="",d=await fetch(`${r}/api/services/add_service`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,category_id:n,description:t,date:(0,D.A)(o),duration:l,AOSs:c,employee_ids:s,price:parseFloat(u.toFixed(2)),client_can_book:a})}),p=await d.json();if(d.ok)return p.added_service_id;(0,j.A)(p.message),console.log("Failed to add service, message: ",p.message)}catch(c){console.error("Unexpected Error: ",c)}}var q={props:{serviceInfo:Object,isFetched:Boolean},components:{FontAwesomeIcon:f.gc,AOSsEdit:$},data(){return{saveIcon:b.e68,name:"",description:"",date:null,length:null,categoryId:"null",AOSs:[],checkedEmp:[],price:null,clientCanBook:!0,categories:[],employees:[]}},methods:{editAOS(e,n,t,o){this.AOSs[e].options[n][t]=o},removeOption(e,n){n>0&&this.AOSs[e].options.splice(n,1)},addOption(e){this.AOSs[e].options.push({name:null,length_offset:0})},addQuestion(){const e={propmpt:null,options:[]};e.options.push({name:null,length_offset:0}),this.AOSs.push(e)},removeQuestion(e){this.AOSs.splice(e,1)},onInputQuestion(e,n){this.AOSs[e].prompt=n},async onSubmit(){"null"==this.categoryId&&(this.categoryId=null);const e=await V(this.name,this.categoryId,this.description,this.date,60*this.length,this.AOSs,this.checkedEmp,this.price,this.clientCanBook);e&&this.$router.push("/services/all")}},async created(){this.categoryId=this.$route.params.cate_id;const[e,n]=await Promise.all([(0,U.A)(),(0,W.A)()]);this.employees=e,this.categories=n}};const T=(0,B.A)(q,[["render",g],["__scopeId","data-v-65b31414"]]);var J=T}}]);
//# sourceMappingURL=295.4a5c5b73.js.map