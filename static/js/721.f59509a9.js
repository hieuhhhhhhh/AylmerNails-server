"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[721],{1076:function(e,t,o){o.d(t,{A:function(){return n}});var s=o(4116),c=o(6156);function n(e){if(console.log("calling"),!e)return;const t=s.c9.fromMillis(1e3*e).setZone((0,c.A)());return t.toLocaleString({weekday:"short",month:"short",day:"numeric",year:"numeric"})}},3721:function(e,t,o){o.r(t),o.d(t,{default:function(){return L}});var s=o(6768);const c={id:"services"},n={id:"flexBox"};function r(e,t,o,r,a,i){const d=(0,s.g2)("Category"),l=(0,s.g2)("FontAwesomeIcon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",c,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.categories,((e,t)=>((0,s.uX)(),(0,s.Wv)(d,{key:t,category:e},null,8,["category"])))),128))]),(0,s.Lk)("div",n,[(0,s.Lk)("button",{class:"blueBtn",id:"add",onClick:t[0]||(t[0]=(...e)=>i.addCate&&i.addCate(...e))},[(0,s.bF)(l,{icon:a.plusIcon},null,8,["icon"]),t[1]||(t[1]=(0,s.eW)(" Add Category "))])])],64)}o(4114);var a=o(8249),i=o(2353),d=(o(8992),o(3949),o(445)),l=o(8199);async function u(){try{const e="",t=await fetch(`${e}/api/services/get_services/${(0,d.A)()}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),o=await t.json();if(t.ok){const e=v(o.services,o.categories);return e}(0,l.A)(o.message),console.log("Failed to fetch employee list, message: ",o.message)}catch(e){console.error("Unexpected Error: ",e)}}function v(e,t){const o={null:{cate_id:null,cate_name:"Unclassified",services:[]}};t.forEach((e=>{const[t,s,c]=e;o[t]={cate_id:t,cate_name:s,sort_order:c,services:[]}})),e.forEach((e=>{const[t,s,c,n,r]=e;o[r].services.push({service_id:t,service_name:s,last_date:c,is_active:n})})),!o[null].services.length>0&&delete o[null];const s=Object.values(o).sort(((e,t)=>e.sort_order-t.sort_order));return s}var g=o(4232);const p={id:"category"},y={id:"top"},m={id:"title"},h=["onClick"],f={id:"flexBox"};function _(e,t,o,c,n,r){const a=(0,s.g2)("FontAwesomeIcon");return(0,s.uX)(),(0,s.CE)("div",p,[(0,s.Lk)("div",y,[(0,s.Lk)("div",{class:"moveUp",onClick:t[0]||(t[0]=e=>r.onMoveUp(o.category.cate_id))},[(0,s.bF)(a,{icon:n.faCaretUp},null,8,["icon"])]),(0,s.Lk)("div",m,(0,g.v_)(o.category.cate_name),1)]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.category.services,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{id:"service",class:(0,g.C4)({faded:!e.is_active}),key:t,onClick:t=>r.openServiceDetails(e.service_id)},(0,g.v_)(e.service_name),11,h)))),128)),(0,s.Lk)("div",f,[(0,s.Lk)("button",{class:"blueBtn",id:"plus",onClick:t[1]||(t[1]=e=>r.addService(o.category.cate_id))},[(0,s.bF)(a,{icon:n.plusIcon},null,8,["icon"])]),o.category.services.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:0,class:"redBtn",id:"plus",onClick:t[2]||(t[2]=e=>r.removeCate(o.category.cate_id))},[(0,s.bF)(a,{icon:n.removeIcon},null,8,["icon"])]))])])}var C=o(1076);async function k(e){try{const t="",o=await fetch(`${t}/api/services/remove_category`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({cate_id:e})});if(o.ok)return!0;{const e=await o.json();(0,l.A)(e.message),console.log("Failed to add category, message: ",e.message)}}catch(t){console.error("Unexpected Error: ",t)}}async function b(e){try{const t="",o=await fetch(`${t}/api/services/move_category_up`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({cate_id:e})});if(o.ok)return!0;{const e=await o.json();(0,l.A)(e.message),console.log("Failed to move category up, message: ",e.message)}}catch(t){console.error("Unexpected Error: ",t)}}var w={name:"Category-",components:{FontAwesomeIcon:a.gc},data(){return{plusIcon:i.QLR,removeIcon:i.sjs,faCaretUp:i.S$_}},props:{category:Object},methods:{openServiceDetails(e){this.$router.push(`/services/details/${e}`)},addService(e){this.$router.push(`/services/add_service/${e}`)},async removeCate(e){const t=await k(e);t&&this.$router.push("/services/refresh")},formatDate(e){return(0,C.A)(e)},async onMoveUp(e){const t=await b(e);t&&this.$router.push("/services/refresh")}}},A=o(1241);const F=(0,A.A)(w,[["render",_],["__scopeId","data-v-98b4bb10"]]);var I=F,E={name:"Services-",components:{Category:I,FontAwesomeIcon:a.gc},data(){return{categories:[],plusIcon:i.QLR}},async created(){this.categories=await u(),console.log("categories: ",this.categories)},methods:{addCate(){this.$router.push("/services/add_category")}}};const $=(0,A.A)(E,[["render",r],["__scopeId","data-v-757b40fc"]]);var L=$}}]);
//# sourceMappingURL=721.f59509a9.js.map