{"version":3,"file":"js/488.9ad491f3.js","mappings":"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","sources":["webpack://frontend/./src/lib/unixToReadable.js","webpack://frontend/./src/views/services/Services.vue","webpack://frontend/./src/views/services/apis/fetchCategorizedServices.js","webpack://frontend/./src/views/services/comps/Category.vue","webpack://frontend/./src/views/services/apis/removeCategory.js","webpack://frontend/./src/views/services/comps/Category.vue?a7a6","webpack://frontend/./src/views/services/Services.vue?426c"],"sourcesContent":["import { DateTime } from \"luxon\";\r\nimport getTimezone from \"./getTimeZone\";\r\n\r\nexport default function unixToReadable(unixTimestamp) {\r\n  console.log(\"calling\");\r\n\r\n  if (!unixTimestamp) {\r\n    return;\r\n  }\r\n\r\n  // Convert the Unix timestamp to a Luxon DateTime object in the specified timezone\r\n  const dateTime = DateTime.fromMillis(unixTimestamp * 1000).setZone(\r\n    getTimezone()\r\n  );\r\n\r\n  // Format the date with short weekday and month (e.g., \"Mon, Jan 20, 2025\")\r\n  return dateTime.toLocaleString({\r\n    weekday: \"short\",\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n    year: \"numeric\",\r\n  });\r\n}\r\n","<template>\r\n  <div id=\"services\">\r\n    <Category\r\n      v-for=\"(category, index) in categories\"\r\n      :key=\"index\"\r\n      :category=\"category\"\r\n    />\r\n  </div>\r\n  <div id=\"flexBox\">\r\n    <button class=\"blueBtn\" id=\"add\" @click=\"addCate\">\r\n      <FontAwesomeIcon :icon=\"plusIcon\" /> Add Category\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// icons\r\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\r\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\r\n// lib\r\nimport fetchCategorizedServices from \"./apis/fetchCategorizedServices\";\r\n// comps\r\nimport Category from \"./comps/Category.vue\";\r\n\r\nexport default {\r\n  name: \"Services-\",\r\n  components: {\r\n    Category,\r\n    FontAwesomeIcon,\r\n  },\r\n  data() {\r\n    return {\r\n      categories: [],\r\n      plusIcon: faPlus,\r\n    };\r\n  },\r\n  async created() {\r\n    this.categories = await fetchCategorizedServices();\r\n    console.log(\"categories: \", this.categories);\r\n  },\r\n  methods: {\r\n    addCate() {\r\n      this.$router.push(`/services/add_category`);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#services {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  gap: 10px;\r\n}\r\n#flexBox {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n#add {\r\n  margin: 10px;\r\n}\r\n</style>","import getTodayUnixTime from \"@/lib/getTodayUnixTime\";\r\nimport notifyReqError from \"@/stores/notifyReqError\";\r\n\r\nexport default async function fetchCategorizedServices() {\r\n  try {\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(\r\n      `${baseURL}/api/services/get_services/${getTodayUnixTime()}`,\r\n      {\r\n        method: \"GET\",\r\n        credentials: \"include\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    );\r\n    // fetch json\r\n    const json = await res.json();\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      // refactor services to categories and return result\r\n      const categories = refactorServices(json.services, json.categories);\r\n\r\n      return categories;\r\n    } else {\r\n      notifyReqError(json.message);\r\n      console.log(\"Failed to fetch employee list, message: \", json.message);\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n\r\n// re-group services by category_ids, then sort the group by number of services\r\nfunction refactorServices(rawServices, rawCategories) {\r\n  // a map of categories where category_id is key\r\n  const categories = {};\r\n  categories[null] = {\r\n    cate_id: null,\r\n    cate_name: \"Unclassified\",\r\n    services: [],\r\n  };\r\n\r\n  rawCategories.forEach((raw) => {\r\n    const [cate_id, cate_name, sort_order] = raw;\r\n    categories[cate_id] = { cate_id, cate_name, sort_order, services: [] };\r\n  });\r\n\r\n  // re-group services based on their category_id\r\n  rawServices.forEach((raw) => {\r\n    const [service_id, service_name, last_date, is_active, cate_id] = raw;\r\n\r\n    // add the service to the matching category_id\r\n    categories[cate_id].services.push({\r\n      service_id,\r\n      service_name,\r\n      last_date,\r\n      is_active,\r\n    });\r\n  });\r\n\r\n  // remove 'Unclassified' if no services in there\r\n  if (!categories[null].services.length > 0) {\r\n    delete categories[null];\r\n  }\r\n\r\n  // sort the map based on the length of prop 'services'\r\n  const sorted = Object.values(categories).sort(\r\n    (a, b) => b.sort_order - a.sort_order\r\n  );\r\n\r\n  // return result\r\n  return sorted;\r\n}\r\n","<template>\r\n  <div id=\"category\">\r\n    <div id=\"title\">{{ category.cate_name }}</div>\r\n    <div\r\n      id=\"service\"\r\n      :class=\"{ faded: !service.is_active }\"\r\n      v-for=\"(service, index) in category.services\"\r\n      :key=\"index\"\r\n      @click=\"openServiceDetails(service.service_id)\"\r\n    >\r\n      {{ service.service_name }}\r\n    </div>\r\n\r\n    <div id=\"flexBox\">\r\n      <button class=\"blueBtn\" id=\"plus\" @click=\"addService(category.cate_id)\">\r\n        <FontAwesomeIcon :icon=\"plusIcon\" />\r\n      </button>\r\n      <button\r\n        v-if=\"!category.services.length\"\r\n        class=\"redBtn\"\r\n        id=\"plus\"\r\n        @click=\"removeCate(category.cate_id)\"\r\n      >\r\n        <FontAwesomeIcon :icon=\"removeIcon\" />\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// icon\r\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\r\nimport { faPlus, faTrashCan } from \"@fortawesome/free-solid-svg-icons\";\r\n// lib\r\nimport removeCategory from \"../apis/removeCategory\";\r\nimport unixToReadable from \"@/lib/unixToReadable\";\r\n\r\nexport default {\r\n  name: \"Category-\",\r\n  components: {\r\n    FontAwesomeIcon,\r\n  },\r\n  data() {\r\n    return { plusIcon: faPlus, removeIcon: faTrashCan };\r\n  },\r\n  props: {\r\n    category: Object,\r\n  },\r\n  methods: {\r\n    openServiceDetails(service_id) {\r\n      this.$router.push(`/services/details/${service_id}`);\r\n    },\r\n    addService(cate_id) {\r\n      this.$router.push(`/services/add_service/${cate_id}`);\r\n    },\r\n    async removeCate(cate_id) {\r\n      const res = await removeCategory(cate_id);\r\n      if (res) {\r\n        this.$router.push(\"/services/refresh\");\r\n      }\r\n    },\r\n    formatDate(unixTime) {\r\n      return unixToReadable(unixTime);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#plus {\r\n  aspect-ratio: 1;\r\n  width: 30px;\r\n  padding: 0;\r\n  border-radius: 20px;\r\n  margin: 5px;\r\n}\r\n#flexBox {\r\n  border-top: 1px solid var(--xtrans-gray);\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n#category {\r\n  box-shadow: 0 0 5px var(--shadow-color);\r\n  max-width: 90vw;\r\n  width: 350px;\r\n  border-radius: 5px;\r\n  background-color: var(--background-i2);\r\n  box-sizing: border-box;\r\n  height: fit-content;\r\n}\r\n#title {\r\n  padding: 10px;\r\n  text-align: center;\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n  box-sizing: border-box;\r\n}\r\n#service {\r\n  padding: 8px;\r\n  padding-inline: 15px;\r\n  font-size: 17px;\r\n  border-top: 1px solid var(--xtrans-gray);\r\n  box-sizing: border-box;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n#service:hover {\r\n  background: var(--hover);\r\n}\r\n#service:active {\r\n  background: var(--active);\r\n}\r\n.faded {\r\n  color: gray;\r\n  font-size: 14px;\r\n}\r\n/* phone view */\r\n@media (orientation: portrait) {\r\n  #service {\r\n    padding: 13px;\r\n  }\r\n  #title {\r\n    padding: 15px;\r\n  }\r\n}\r\n</style>","import notifyReqError from \"@/stores/notifyReqError\";\r\n\r\nexport default async function removeCategory(cate_id) {\r\n  try {\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(`${baseURL}/api/services/remove_category`, {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        cate_id: cate_id,\r\n      }),\r\n    });\r\n\r\n    // read status and process response\r\n    if (res.ok) {\r\n      return true;\r\n    } else {\r\n      // fetch json\r\n      const json = await res.json();\r\n      notifyReqError(json.message);\r\n      console.log(\"Failed to add category, message: \", json.message);\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n  }\r\n}\r\n","import { render } from \"./Category.vue?vue&type=template&id=4a01a6dc&scoped=true\"\nimport script from \"./Category.vue?vue&type=script&lang=js\"\nexport * from \"./Category.vue?vue&type=script&lang=js\"\n\nimport \"./Category.vue?vue&type=style&index=0&id=4a01a6dc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4a01a6dc\"]])\n\nexport default __exports__","import { render } from \"./Services.vue?vue&type=template&id=757b40fc&scoped=true\"\nimport script from \"./Services.vue?vue&type=script&lang=js\"\nexport * from \"./Services.vue?vue&type=script&lang=js\"\n\nimport \"./Services.vue?vue&type=style&index=0&id=757b40fc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-757b40fc\"]])\n\nexport default __exports__"],"names":["unixToReadable","unixTimestamp","console","log","dateTime","DateTime","fromMillis","setZone","getTimezone","toLocaleString","weekday","month","day","year","id","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_renderList","$data","categories","category","index","_createBlock","_component_Category","key","_hoisted_2","class","onClick","_cache","args","$options","addCate","_createVNode","_component_FontAwesomeIcon","icon","plusIcon","_createTextVNode","async","fetchCategorizedServices","baseURL","process","res","fetch","getTodayUnixTime","method","credentials","headers","json","ok","refactorServices","services","notifyReqError","message","e","error","rawServices","rawCategories","cate_id","cate_name","forEach","raw","sort_order","service_id","service_name","last_date","is_active","push","length","sorted","Object","values","sort","a","b","_toDisplayString","$props","service","_normalizeClass","faded","$event","openServiceDetails","_hoisted_3","_hoisted_4","addService","_createCommentVNode","removeCate","removeIcon","removeCategory","body","JSON","stringify","name","components","FontAwesomeIcon","data","faPlus","faTrashCan","props","methods","this","$router","formatDate","unixTime","__exports__","Category","created","render"],"sourceRoot":""}