"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[488],{1076:function(e,t,c){c.d(t,{A:function(){return n}});var s=c(4116),o=c(6156);function n(e){if(console.log("calling"),!e)return;const t=s.c9.fromMillis(1e3*e).setZone((0,o.A)());return t.toLocaleString({weekday:"short",month:"short",day:"numeric",year:"numeric"})}},6488:function(e,t,c){c.r(t),c.d(t,{default:function(){return E}});var s=c(6768);const o={id:"services"},n={id:"flexBox"};function r(e,t,c,r,a,i){const d=(0,s.g2)("Category"),l=(0,s.g2)("FontAwesomeIcon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",o,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.categories,((e,t)=>((0,s.uX)(),(0,s.Wv)(d,{key:t,category:e},null,8,["category"])))),128))]),(0,s.Lk)("div",n,[(0,s.Lk)("button",{class:"blueBtn",id:"add",onClick:t[0]||(t[0]=(...e)=>i.addCate&&i.addCate(...e))},[(0,s.bF)(l,{icon:a.plusIcon},null,8,["icon"]),t[1]||(t[1]=(0,s.eW)(" Add Category "))])])],64)}c(4114);var a=c(8249),i=c(2353),d=(c(8992),c(3949),c(445)),l=c(8199);async function u(){try{const e="",t=await fetch(`${e}/api/services/get_services/${(0,d.A)()}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),c=await t.json();if(t.ok){const e=v(c.services,c.categories);return e}(0,l.A)(c.message),console.log("Failed to fetch employee list, message: ",c.message)}catch(e){console.error("Unexpected Error: ",e)}}function v(e,t){const c={null:{cate_id:null,cate_name:"Unclassified",services:[]}};t.forEach((e=>{const[t,s]=e;c[t]={cate_id:t,cate_name:s,services:[]}})),e.forEach((e=>{const[t,s,o,n,r]=e;c[r].services.push({service_id:t,service_name:s,last_date:o,is_active:n})})),!c[null].services.length>0&&delete c[null];const s=Object.values(c).sort(((e,t)=>t.services.length-e.services.length));return s}var g=c(4232);const h={id:"category"},p={id:"title"},m=["onClick"],y={id:"flexBox"};function f(e,t,c,o,n,r){const a=(0,s.g2)("FontAwesomeIcon");return(0,s.uX)(),(0,s.CE)("div",h,[(0,s.Lk)("div",p,(0,g.v_)(c.category.cate_name),1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.category.services,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{id:"service",class:(0,g.C4)({faded:!e.is_active}),key:t,onClick:t=>r.openServiceDetails(e.service_id)},(0,g.v_)(e.service_name),11,m)))),128)),(0,s.Lk)("div",y,[(0,s.Lk)("button",{class:"blueBtn",id:"plus",onClick:t[0]||(t[0]=e=>r.addService(c.category.cate_id))},[(0,s.bF)(a,{icon:n.plusIcon},null,8,["icon"])]),c.category.services.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:0,class:"redBtn",id:"plus",onClick:t[1]||(t[1]=e=>r.removeCate(c.category.cate_id))},[(0,s.bF)(a,{icon:n.removeIcon},null,8,["icon"])]))])])}async function C(e){try{const t="",c=await fetch(`${t}/api/services/remove_category`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({cate_id:e})});if(c.ok)return!0;{const e=await c.json();(0,l.A)(e.message),console.log("Failed to add category, message: ",e.message)}}catch(t){console.error("Unexpected Error: ",t)}}var _=c(1076),k={name:"Category-",components:{FontAwesomeIcon:a.gc},data(){return{plusIcon:i.QLR,removeIcon:i.sjs}},props:{category:Object},methods:{openServiceDetails(e){this.$router.push(`/services/details/${e}`)},addService(e){this.$router.push(`/services/add_service/${e}`)},async removeCate(e){const t=await C(e);t&&this.$router.push("/services/refresh")},formatDate(e){return(0,_.A)(e)}}},b=c(1241);const I=(0,b.A)(k,[["render",f],["__scopeId","data-v-4a01a6dc"]]);var w=I,A={name:"Services-",components:{Category:w,FontAwesomeIcon:a.gc},data(){return{categories:[],plusIcon:i.QLR}},async created(){this.categories=await u(),console.log("categories: ",this.categories)},methods:{addCate(){this.$router.push("/services/add_category")}}};const F=(0,b.A)(A,[["render",r],["__scopeId","data-v-757b40fc"]]);var E=F}}]);
//# sourceMappingURL=488.db2c3555.js.map