"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[634],{4714:function(n,e,t){function o(n){if("+1"!==n.slice(0,2))return n;if(console.log("calling"),!n)return;let e="";return n=n.slice(2),e=n.length<=3?n:n.length<=6?`${n.slice(0,3)} ${n.slice(3)}`:`${n.slice(0,3)} ${n.slice(3,6)} ${n.slice(6)}`,e}t.d(e,{A:function(){return o}})},8297:function(n,e,t){t.d(e,{A:function(){return l}});var o=t(4116),a=t(6156);function l(n){console.log("calling");const e=o.c9.fromSeconds(n),t=e.setZone((0,a.A)());return t.toFormat("h:mm a")}},1076:function(n,e,t){t.d(e,{A:function(){return l}});var o=t(4116),a=t(6156);function l(n){if(console.log("calling"),!n)return;const e=o.c9.fromMillis(1e3*n).setZone((0,a.A)());return e.toLocaleString({weekday:"short",month:"short",day:"numeric",year:"numeric"})}},6916:function(n,e,t){t.d(e,{A:function(){return l}});var o=t(8199),a=t(7414);async function l(n,e){try{try{n=(0,a.l)(n,"CA").number,console.log("phoneNum: ",n)}catch(t){throw new Error("Invalid Phone Number")}const l="",s=await fetch(`${l}/api/users/ban_unban_phone_number`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone_num:n,boolean:e})});if(s.ok)return!0;{const n=await s.json();(0,o.A)(n.message),console.log("Failed to ban/unban phone number, message: ",n.message)}}catch(t){console.error("Unexpected Error: ",t)}}},4634:function(n,e,t){t.r(e),t.d(e,{default:function(){return $}});var o=t(6768),a=t(5130),l=t(4232);const s={id:"topBox"},c={class:"newCol"},r={class:"flexBox"},i={key:0,class:"newCell"},u={key:1,class:"todayCell"},d={class:"btn"},k=["onClick"],h={class:"flex"};function m(n,e,t,m,p,f){const b=(0,o.g2)("AddBlacklistBtn");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",s,[(0,o.bo)((0,o.Lk)("input",{id:"search",type:"text",placeholder:"Search...","onUpdate:modelValue":e[0]||(e[0]=n=>m.query=n),onInput:e[1]||(e[1]=(...n)=>m.onSearch&&m.onSearch(...n))},null,544),[[a.Jo,m.query]]),(0,o.Lk)("div",null,[(0,o.bF)(b)])]),(0,o.Lk)("table",null,[(0,o.Lk)("tbody",null,[e[3]||(e[3]=(0,o.Lk)("tr",null,[(0,o.Lk)("th",{class:"newCol"}),(0,o.Lk)("th",null,"Phone Number"),(0,o.Lk)("th",null,"Banned On"),(0,o.Lk)("th",null,"Client Name"),(0,o.Lk)("th",null,"Account Name")],-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(m.rows,((n,e)=>((0,o.uX)(),(0,o.CE)("tr",{class:"row",key:e},[(0,o.Lk)("td",c,[(0,o.Lk)("div",r,[n.bannedOn>m.lastTracked?((0,o.uX)(),(0,o.CE)("div",i,"NEW")):(0,o.Q3)("",!0),n.bannedOn>=m.today?((0,o.uX)(),(0,o.CE)("div",u,"TODAY")):(0,o.Q3)("",!0)])]),(0,o.Lk)("td",null,(0,l.v_)(m.formatPhone(n.phoneNum)),1),(0,o.Lk)("td",null,[(0,o.eW)((0,l.v_)(m.unixToReadable(n.bannedOn))+" ",1),(0,o.Lk)("div",null,(0,l.v_)(m.unixToHours(n.bannedOn)),1)]),(0,o.Lk)("td",null,(0,l.v_)(n.contactName),1),(0,o.Lk)("td",null,(0,l.v_)(n.firstName)+" "+(0,l.v_)(n.lastName),1),(0,o.Lk)("td",d,[(0,o.Lk)("button",{class:"blueBtn",onClick:e=>m.onUnban(n.phoneNum)}," Unblacklist ",8,k)])])))),128))])]),(0,o.Lk)("div",h,[m.rows?.length===m.limit?((0,o.uX)(),(0,o.CE)("button",{key:0,id:"show",class:"blueBtn",onClick:e[2]||(e[2]=(...n)=>m.showMore&&m.showMore(...n))}," Show more ")):(0,o.Q3)("",!0)])],64)}t(4114);var p=t(144),f=t(4714),b=t(1076),v=t(8297),y=t(8199);async function g(n,e){try{const t="",o=await fetch(`${t}/api/users/search_blacklist`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n.trim(),limit:e})}),a=await o.json();if(o.ok){const n=[],e=a.appos;for(let t of e){const[e,o,a,l,s]=t,c={phoneNum:e,bannedOn:o,firstName:a,lastName:l,contactName:s};n.push(c)}return n}(0,y.A)(a.message),console.log("Failed to search on blacklist, message: ",a.message)}catch(t){console.error("Unexpected Error: ",t)}}async function L(){try{const n="",e=await fetch(`${n}/api/users/get_blacklist_last_tracked`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();if(e.ok){const n=t.last_tracked;return console.log("last: ",n),n}console.log("Failed to get last tracked on blacklist, message: ",t.message)}catch(n){console.error("Unexpected Error: ",n)}}var w=t(6916),C=t(1387),A=t(2405),_=t(445),B=t(8249),N=t(2353);const x={key:0,id:"parent"},E={id:"content"},T={};var O=Object.assign(T,{__name:"AddBlacklistBtn",setup(n){const e=(0,C.rd)(),t=(0,p.KR)(""),l=(0,p.KR)(!1);function s(){l.value=!1}function c(){l.value=!0}async function r(){const n="+1"+t.value.replace(/\D/g,""),o=await(0,w.A)(n,!0);o&&e.push("/refresh")}return(n,e)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("button",{id:"unsave",class:"redBtn",onClick:c},[(0,o.bF)((0,p.R1)(B.gc),{icon:(0,p.R1)(N.QLR)},null,8,["icon"]),e[1]||(e[1]=(0,o.eW)(" Add to Blacklist "))]),l.value?((0,o.uX)(),(0,o.CE)("div",x,[(0,o.Lk)("div",{id:"background",onClick:s}),(0,o.Lk)("form",{onSubmit:(0,a.D$)(r,["prevent"]),id:"window"},[(0,o.Lk)("button",{type:"button",onClick:s,id:"closeBtn",class:"redBtn"}," X "),(0,o.Lk)("div",E,[(0,o.Lk)("label",null,[e[2]||(e[2]=(0,o.eW)(" Phone Number ")),(0,o.bo)((0,o.Lk)("input",{type:"tel",placeholder:"Phone number","onUpdate:modelValue":e[0]||(e[0]=n=>t.value=n),required:""},null,512),[[a.Jo,t.value]])])]),e[3]||(e[3]=(0,o.Lk)("div",{id:"flexBox"},[(0,o.Lk)("button",{class:"redBtn"},"Add to Blacklist")],-1))],32)])):(0,o.Q3)("",!0)],64))}}),S=t(1241);const R=(0,S.A)(O,[["__scopeId","data-v-8566601a"]]);var F=R,K={name:"CanceledAppos",components:{AddBlacklistBtn:F},setup(){const n=(0,p.KR)(""),e=(0,p.KR)([]),t=(0,p.KR)(null),a=(0,p.KR)(25),l=(0,_.A)(),s=(0,C.rd)(),c=async()=>{e.value=await g(n.value,a.value)},r=async n=>{const e=await(0,w.A)(n,!1);e&&s.push("/refresh")},i=async()=>{a.value+=25,await c()};return(0,o.sV)((async()=>{t.value=await L(),await c()})),(0,C.JZ)(((n,e,t)=>{console.log("leaving"),(0,A.F4)(),t()})),{today:l,query:n,rows:e,lastTracked:t,formatPhone:f.A,onSearch:c,unixToReadable:b.A,unixToHours:v.A,onUnban:r,showMore:i,limit:a}}};const X=(0,S.A)(K,[["render",m],["__scopeId","data-v-783961e8"]]);var $=X}}]);
//# sourceMappingURL=634.5678a9c1.js.map