"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[67],{4714:function(e,t,o){function n(e){if("+1"!==e.slice(0,2))return e;if(console.log("calling"),!e)return;let t="";return e=e.slice(2),t=e.length<=3?e:e.length<=6?`${e.slice(0,3)} ${e.slice(3)}`:`${e.slice(0,3)} ${e.slice(3,6)} ${e.slice(6)}`,t}o.d(t,{A:function(){return n}})},6769:function(e,t,o){o.d(t,{A:function(){return a}});var n=o(4116);function a(e){return console.log("calling"),n.c9.fromObject({hour:0}).plus({seconds:e}).toFormat("h:mm a")}},3519:function(e,t,o){o.d(t,{A:function(){return a}});var n=o(4116);function a(e){if(console.log("calling"),!e)return;const t=n.c9.fromSeconds(e).startOf("day"),o=n.c9.local().startOf("day"),a=t.diff(o,"days").toObject(),l=Math.round(a.days);if(t.equals(o))return"Today";if(1===l)return"Tomorrow";if(-1===l)return"Yesterday";const r=l>0?"next":"last";return Math.abs(l)>=30?`${r} ${Math.abs(Math.round(l/30))}m`:Math.abs(l)>=7?`${r} ${Math.abs(Math.round(l/7))}w`:`${r} ${Math.abs(l)}d`}},1076:function(e,t,o){o.d(t,{A:function(){return l}});var n=o(4116),a=o(6156);function l(e){if(console.log("calling"),!e)return;const t=n.c9.fromMillis(1e3*e).setZone((0,a.A)());return t.toLocaleString({weekday:"short",month:"short",day:"numeric",year:"numeric"})}},4067:function(e,t,o){o.r(t),o.d(t,{default:function(){return y}});var n=o(6768),a=o(4232);const l=["onClick"];function r(e,t,o,r,c,s){return(0,n.uX)(),(0,n.CE)(n.FK,null,[t[2]||(t[2]=(0,n.Lk)("div",{id:"title"},"Service Availability Conflicts",-1)),(0,n.Lk)("table",null,[t[1]||(t[1]=(0,n.Lk)("colgroup",null,[(0,n.Lk)("col",{style:{width:"auto"}}),(0,n.Lk)("col",{style:{width:"auto"}})],-1)),(0,n.Lk)("tbody",null,[t[0]||(t[0]=(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Client"),(0,n.Lk)("th",null,"Employee"),(0,n.Lk)("th",null,"Time")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.conflicts,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{class:"row",key:t,onClick:t=>r.toAppoDetails(e.appoDate,e.appoId)},[(0,n.Lk)("td",null,[(0,n.eW)((0,a.v_)(e.contactName)+" ",1),(0,n.Lk)("div",null,(0,a.v_)(r.formatPhone(e.phoneNum)),1)]),(0,n.Lk)("td",{style:(0,a.Tr)({color:e.color})},(0,a.v_)(e.empAlias),5),(0,n.Lk)("td",null,[(0,n.eW)((0,a.v_)(r.unixToReadable(e.appoDate))+" ("+(0,a.v_)(r.unixTimeToReminder(e.appoDate))+") ",1),(0,n.Lk)("div",null,(0,a.v_)(r.secsToHours(e.appoStart))+" - "+(0,a.v_)(r.secsToHours(e.appoEnd)),1)])],8,l)))),128))])])],64)}o(4114);var c=o(1387),s=o(144),i=o(8199);async function u(e){try{const t="",o=await fetch(`${t}/api/services/get_service_ld_conflicts/${e}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),n=await o.json();if(o.ok){let e=[];const t=n.conflicts;for(let o of t){const[t,n,a,l,r,c,s,i,u,d,p,f]=o;e.push({serviceId:t,appoId:n,appoDate:a,appoDOW:l,appoStart:r,appoEnd:c,empAlias:s,serviceName:i,contactName:u,phoneNumId:d,phoneNum:p,color:f})}return e}(0,i.A)(n.message),console.log("Failed to fetch service's last date conflicts, message: ",n.message)}catch(t){console.error("Unexpected Error: ",t)}}var d=o(4714),p=o(1076),f=o(3519),h=o(6769),m={setup(){const e=(0,c.lq)(),t=e.params.serviceId,o=(0,c.rd)(),a=(0,s.KR)([]),l=(e,t)=>{console.log("date, appoId",e,t),o.push(`/calendar/${e}/${t}`)};return(0,n.sV)((async()=>{a.value=await u(t)})),{serviceId:t,conflicts:a,toAppoDetails:l,unixTimeToReminder:f.A,secsToHours:h.A,unixToReadable:p.A,formatPhone:d.A}}},v=o(1241);const k=(0,v.A)(m,[["render",r],["__scopeId","data-v-dfdc317a"]]);var y=k}}]);
//# sourceMappingURL=67.74e1b1e7.js.map