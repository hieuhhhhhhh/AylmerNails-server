{"version":3,"file":"js/944.44bdd6e7.js","mappings":"mOAEeA,eAAeC,EAAQC,EAAUC,EAAUC,EAAWC,GACnE,IACE,IAEEH,GAAWI,EAAAA,EAAAA,GAA2BJ,EAAU,MAAMK,MACxD,CAAE,MAAOC,GACP,MAAO,CAAEC,QAAS,uBACpB,CAGA,MAAMC,EAAUC,GAGVC,QAAYC,MAAM,GAAGH,mCAA0C,CACnEI,OAAQ,OACRC,YAAa,UACbC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBC,UAAWlB,EACXC,WACAkB,WAAYjB,EACZkB,UAAWjB,MAKTkB,QAAaX,EAAIW,OACjBC,EAASD,EAAKE,QACdhB,EAAUc,EAAKd,QAGrB,MAAO,CAAEe,SAAQf,UACnB,CAAE,MAAOD,GAEP,OADAkB,QAAQC,MAAM,qBAAsBnB,GAC7B,CAAEC,QAAS,mBACpB,CACF,C,0ECQA,MAAMmB,GAASC,EAAAA,EAAAA,MAGT3B,GAAW4B,EAAAA,EAAAA,IAAI,IACf3B,GAAW2B,EAAAA,EAAAA,IAAI,IACf1B,GAAY0B,EAAAA,EAAAA,IAAI,IAChBzB,GAAWyB,EAAAA,EAAAA,IAAI,IAGfC,GAAMD,EAAAA,EAAAA,IAAI,IAGhB9B,eAAegC,IACb,MAAM,OAAER,EAAM,QAAEf,SAAkBR,EAChCC,EAAS+B,MACT9B,EAAS8B,MACT7B,EAAU6B,MACV5B,EAAS4B,OAINT,EAMLI,EAAOM,KAAK,UAAUV,KALpBO,EAAIE,MAAQxB,CAMhB,C,y4BCtEA,MAAM0B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://frontend/./src/views/authentication/apis/addUser.js","webpack://frontend/./src/views/authentication/create_account/CreateAccount.vue","webpack://frontend/./src/views/authentication/create_account/CreateAccount.vue?21ea"],"sourcesContent":["import { parsePhoneNumberFromString } from \"libphonenumber-js\";\r\n\r\nexport default async function addUser(phoneNum, password, firstName, lastName) {\r\n  try {\r\n    try {\r\n      // parse phone number to E.164\r\n      phoneNum = parsePhoneNumberFromString(phoneNum, \"CA\").number; // E.164 format\r\n    } catch (e) {\r\n      return { message: \"Invalid phone number\" };\r\n    }\r\n\r\n    // get app path\r\n    const baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n    // start requesting server\r\n    const res = await fetch(`${baseURL}/api/authentication/create_user`, {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        phone_num: phoneNum,\r\n        password,\r\n        first_name: firstName,\r\n        last_name: lastName,\r\n      }),\r\n    });\r\n\r\n    // fetch json return message\r\n    const json = await res.json();\r\n    const userId = json.user_id;\r\n    const message = json.message;\r\n\r\n    // return results\r\n    return { userId, message };\r\n  } catch (e) {\r\n    console.error(\"Unexpected Error: \", e);\r\n    return { message: \"Unexpected Error\" };\r\n  }\r\n}\r\n","<template>\r\n  <div id=\"layout\">\r\n    <form @submit.prevent=\"onSubmit\">\r\n      <div>\r\n        <input\r\n          type=\"text\"\r\n          v-model=\"firstName\"\r\n          placeholder=\"First Name\"\r\n          required\r\n        />\r\n\r\n        <input\r\n          type=\"text\"\r\n          v-model=\"lastName\"\r\n          placeholder=\"Last Name\"\r\n          required\r\n        />\r\n      </div>\r\n      <div>\r\n        <input\r\n          type=\"tel\"\r\n          v-model=\"phoneNum\"\r\n          placeholder=\"Phone Number\"\r\n          required\r\n        />\r\n      </div>\r\n      <div>\r\n        <input\r\n          type=\"password\"\r\n          v-model=\"password\"\r\n          placeholder=\"New Password\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div id=\"msg\">{{ msg }}</div>\r\n      <button class=\"greenBtn\">Add User</button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\n// apis\r\nimport addUser from \"../apis/addUser\";\r\n\r\n// RESOURCES\r\nconst router = useRouter();\r\n\r\n// PAYLOAD\r\nconst phoneNum = ref(\"\");\r\nconst password = ref(\"\");\r\nconst firstName = ref(\"\");\r\nconst lastName = ref(\"\");\r\n\r\n// OUTPUT\r\nconst msg = ref(\"\");\r\n\r\n// APIS\r\nasync function onSubmit() {\r\n  const { userId, message } = await addUser(\r\n    phoneNum.value,\r\n    password.value,\r\n    firstName.value,\r\n    lastName.value\r\n  );\r\n\r\n  //   if fail\r\n  if (!userId) {\r\n    msg.value = message;\r\n    return;\r\n  }\r\n\r\n  // if succesful\r\n  router.push(`/users/${userId}`);\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#layout {\r\n  background-color: var(--background-i1);\r\n  padding: 10px;\r\n  width: 900px;\r\n  max-width: 100vw;\r\n  margin-inline: auto;\r\n  flex-grow: 1;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\nform {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\nbutton {\r\n  font-size: 20px;\r\n  padding-inline: 50px;\r\n  border-radius: 20px;\r\n  margin-bottom: 50px;\r\n}\r\ninput[type=\"password\"],\r\ninput[type=\"tel\"] {\r\n  padding: 6px 10px;\r\n  width: 280px;\r\n}\r\ninput[type=\"text\"] {\r\n  width: 123px;\r\n  margin-inline: 5px;\r\n  padding: 6px 10px;\r\n}\r\n#msg {\r\n  color: red;\r\n  font-size: 15px;\r\n}\r\n</style>\r\n","import script from \"./CreateAccount.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CreateAccount.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CreateAccount.vue?vue&type=style&index=0&id=37c8871a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-37c8871a\"]])\n\nexport default __exports__"],"names":["async","addUser","phoneNum","password","firstName","lastName","parsePhoneNumberFromString","number","e","message","baseURL","process","res","fetch","method","credentials","headers","body","JSON","stringify","phone_num","first_name","last_name","json","userId","user_id","console","error","router","useRouter","ref","msg","onSubmit","value","push","__exports__"],"sourceRoot":""}